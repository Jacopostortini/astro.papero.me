{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js","mtime":1616326159018},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1610909371557},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1610909371551},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js","mtime":1610909371562},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/eslint-loader/index.js","mtime":1610909415268}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAqIGFzIFBoYXNlciBmcm9tICJwaGFzZXIiOwppbXBvcnQgeyBjb2xvcnMsIHNjZW5lS2V5cyB9IGZyb20gIi4uL2NvbnN0YW50cy9jb25zdGFudHMiOwoKdmFyIExvYmJ5U2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QaGFzZXIkU2NlbmUpIHsKICBfaW5oZXJpdHMoTG9iYnlTY2VuZSwgX1BoYXNlciRTY2VuZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTG9iYnlTY2VuZSk7CgogIGZ1bmN0aW9uIExvYmJ5U2NlbmUoc29ja2V0LCBwbGF5ZXJzLCBjdXJyZW50UGxheWVyKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvYmJ5U2NlbmUpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgewogICAgICBzZXR0aW5nS2V5OiBzY2VuZUtleXMubG9iYnkKICAgIH0pOwogICAgX3RoaXMuc2hpcFZlbG9jaXR5ID0gMjAwOwogICAgX3RoaXMuc29ja2V0ID0gc29ja2V0OwogICAgX3RoaXMucGxheWVycyA9IHBsYXllcnM7CiAgICBfdGhpcy5jdXJyZW50UGxheWVyID0gY3VycmVudFBsYXllcjsKICAgIF90aGlzLnNoaXBzID0gW107CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTG9iYnlTY2VuZSwgW3sKICAgIGtleTogImdldEFuZ2xlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBbmdsZSh4LCB5KSB7CiAgICAgIHZhciBhbmdsZTsKCiAgICAgIGlmICh4ICE9PSAwKSB7CiAgICAgICAgYW5nbGUgPSBNYXRoLmF0YW4oeSAvIHgpOwogICAgICAgIGFuZ2xlID0geCA8IDAgPyBhbmdsZSArIE1hdGguUEkgOiBhbmdsZTsKICAgICAgfSBlbHNlIGlmICh5ID49IDApIGFuZ2xlID0gTWF0aC5QSSAvIDI7ZWxzZSBpZiAoeSA8IDApIGFuZ2xlID0gLU1hdGguUEkgLyAyOwoKICAgICAgcmV0dXJuIGFuZ2xlOwogICAgfQogIH0sIHsKICAgIGtleTogInByZWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZWxvYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy53aWR0aCA9IHRoaXMuc3lzLmdhbWUuY2FudmFzLndpZHRoOwogICAgICB0aGlzLmhlaWdodCA9IHRoaXMuc3lzLmdhbWUuY2FudmFzLmhlaWdodDsKICAgICAgY29sb3JzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIF90aGlzMi5sb2FkLmltYWdlKCJzaGlwIiArIGluZGV4LCByZXF1aXJlKCJAL2Fzc2V0cy9zaGlwIiArIGluZGV4ICsgIi5wbmciKSk7CiAgICAgIH0pOwogICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3BhcnRpY2xlJywgJ2h0dHBzOi8vbGFicy5waGFzZXIuaW8vYXNzZXRzL3BhcnRpY2xlcy9yZWQucG5nJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5wbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKHBsYXllcikgewogICAgICAgIHZhciB4ID0gUGhhc2VyLk1hdGguQmV0d2VlbigwLCBfdGhpczMud2lkdGgpOwogICAgICAgIHZhciB5ID0gUGhhc2VyLk1hdGguQmV0d2VlbigwLCBfdGhpczMuaGVpZ2h0KTsKICAgICAgICBfdGhpczMuc2hpcHNbcGxheWVyXSA9IF90aGlzMy5waHlzaWNzLmFkZC5pbWFnZSh4LCB5LCAic2hpcCIgKyBwbGF5ZXIpOwogICAgICAgIHZhciBhbmdsZSA9IFBoYXNlci5NYXRoLkJldHdlZW4oTWF0aC5QSSAvIDQsIE1hdGguUEkgKiAzIC8gNCk7CgogICAgICAgIF90aGlzMy5zaGlwc1twbGF5ZXJdLnNldFZlbG9jaXR5KF90aGlzMy5zaGlwVmVsb2NpdHkgKiBNYXRoLmNvcyhhbmdsZSksIF90aGlzMy5zaGlwVmVsb2NpdHkgKiBNYXRoLnNpbihhbmdsZSkpOwoKICAgICAgICBfdGhpczMuc2hpcHNbcGxheWVyXS5yb3RhdGlvbiA9IGFuZ2xlOwoKICAgICAgICBfdGhpczMuc2hpcHNbcGxheWVyXS5zZXRDb2xsaWRlV29ybGRCb3VuZHModHJ1ZSk7CgogICAgICAgIF90aGlzMy5zaGlwc1twbGF5ZXJdLnNldEJvdW5jZSgxLCAxKTsKCiAgICAgICAgaWYgKHBsYXllciA9PT0gX3RoaXMzLmN1cnJlbnRQbGF5ZXIpIHsKICAgICAgICAgIHZhciBwYXJ0aWNsZSA9IF90aGlzMy5hZGQucGFydGljbGVzKCJwYXJ0aWNsZSIpOwoKICAgICAgICAgIHZhciBlbWl0dGVyID0gcGFydGljbGUuY3JlYXRlRW1pdHRlcih7CiAgICAgICAgICAgIHNwZWVkOiAxMDAsCiAgICAgICAgICAgIHNjYWxlOiB7CiAgICAgICAgICAgICAgc3RhcnQ6IDAuMywKICAgICAgICAgICAgICBlbmQ6IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmxlbmRNb2RlOiAiQUREIgogICAgICAgICAgfSk7CiAgICAgICAgICBlbWl0dGVyLnN0YXJ0Rm9sbG93KF90aGlzMy5zaGlwc1twbGF5ZXJdKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuc2hpcHMuZm9yRWFjaChmdW5jdGlvbiAoc2hpcCkgewogICAgICAgIHZhciBfc2hpcCRib2R5JHZlbG9jaXR5ID0gc2hpcC5ib2R5LnZlbG9jaXR5LAogICAgICAgICAgICB4ID0gX3NoaXAkYm9keSR2ZWxvY2l0eS54LAogICAgICAgICAgICB5ID0gX3NoaXAkYm9keSR2ZWxvY2l0eS55OwogICAgICAgIHNoaXAucm90YXRpb24gPSBfdGhpczQuZ2V0QW5nbGUoeCwgeSk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIExvYmJ5U2NlbmU7Cn0oUGhhc2VyLlNjZW5lKTsKCmV4cG9ydCB7IExvYmJ5U2NlbmUgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js"],"names":["Phaser","colors","sceneKeys","LobbyScene","socket","players","currentPlayer","settingKey","lobby","shipVelocity","ships","x","y","angle","Math","atan","PI","width","sys","game","canvas","height","forEach","value","index","load","image","require","player","Between","physics","add","setVelocity","cos","sin","rotation","setCollideWorldBounds","setBounce","particle","particles","emitter","createEmitter","speed","scale","start","end","blendMode","startFollow","ship","body","velocity","getAngle","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, sceneKeys} from \"../constants/constants\";\n\nexport default class LobbyScene extends Phaser.Scene {\n\n    constructor(socket, players, currentPlayer) {\n        super({settingKey: sceneKeys.lobby});\n        this.shipVelocity = 200;\n        this.socket = socket;\n        this.players = players;\n        this.currentPlayer = currentPlayer;\n        this.ships = [];\n    }\n\n    getAngle(x, y){\n        let angle;\n        if(x!==0) {\n            angle = Math.atan(y / x);\n            angle = x < 0 ? angle + Math.PI : angle;\n        } else if(y>=0) angle = Math.PI / 2;\n        else if(y<0) angle = -Math.PI / 2;\n        return angle;\n    }\n\n    preload(){\n        this.width = this.sys.game.canvas.width;\n        this.height = this.sys.game.canvas.height;\n\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ship\"+index+\".png\"))\n        });\n        this.load.image('particle', 'https://labs.phaser.io/assets/particles/red.png');\n    }\n\n    create(){\n        this.players.forEach(player => {\n            let x = Phaser.Math.Between(0, this.width);\n            let y = Phaser.Math.Between(0, this.height)\n            this.ships[player] = this.physics.add.image(x, y, \"ship\"+player);\n            let angle = Phaser.Math.Between(Math.PI/4, Math.PI*3/4);\n            this.ships[player].setVelocity(this.shipVelocity*Math.cos(angle), this.shipVelocity*Math.sin(angle));\n            this.ships[player].rotation = angle;\n            this.ships[player].setCollideWorldBounds(true);\n            this.ships[player].setBounce(1, 1);\n            if(player===this.currentPlayer) {\n                let particle = this.add.particles(\"particle\");\n                let emitter = particle.createEmitter({\n                    speed: 100,\n                    scale: {start: 0.3, end: 0},\n                    blendMode: \"ADD\"\n                });\n                emitter.startFollow(this.ships[player]);\n            }\n        });\n    }\n\n    update(){\n        this.ships.forEach(ship =>{\n            let {x, y} = ship.body.velocity;\n            ship.rotation = this.getAngle(x, y);\n        })\n    }\n}"]}]}
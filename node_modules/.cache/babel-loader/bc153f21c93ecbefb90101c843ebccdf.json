{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js","mtime":1616328788456},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1610909371557},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1610909371551},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js","mtime":1610909371562},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/eslint-loader/index.js","mtime":1610909415268}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAqIGFzIFBoYXNlciBmcm9tICJwaGFzZXIiOwppbXBvcnQgeyBjb2xvcnMsIHNjZW5lS2V5cyB9IGZyb20gIi4uL2NvbnN0YW50cy9jb25zdGFudHMiOwoKdmFyIExvYmJ5U2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QaGFzZXIkU2NlbmUpIHsKICBfaW5oZXJpdHMoTG9iYnlTY2VuZSwgX1BoYXNlciRTY2VuZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTG9iYnlTY2VuZSk7CgogIGZ1bmN0aW9uIExvYmJ5U2NlbmUoc29ja2V0LCBwbGF5ZXJzLCBjdXJyZW50UGxheWVyKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvYmJ5U2NlbmUpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgewogICAgICBrZXk6IHNjZW5lS2V5cy5sb2JieQogICAgfSk7CiAgICBfdGhpcy5zaGlwVmVsb2NpdHkgPSAyMDA7CiAgICBfdGhpcy5zb2NrZXQgPSBzb2NrZXQ7CiAgICBfdGhpcy5wbGF5ZXJzID0gcGxheWVyczsKICAgIF90aGlzLmN1cnJlbnRQbGF5ZXIgPSBjdXJyZW50UGxheWVyOwogICAgX3RoaXMuc2hpcHMgPSBbXTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhMb2JieVNjZW5lLCBbewogICAga2V5OiAiZ2V0QW5nbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFuZ2xlKHgsIHkpIHsKICAgICAgdmFyIGFuZ2xlOwoKICAgICAgaWYgKHggIT09IDApIHsKICAgICAgICBhbmdsZSA9IE1hdGguYXRhbih5IC8geCk7CiAgICAgICAgYW5nbGUgPSB4IDwgMCA/IGFuZ2xlICsgTWF0aC5QSSA6IGFuZ2xlOwogICAgICB9IGVsc2UgaWYgKHkgPj0gMCkgYW5nbGUgPSBNYXRoLlBJIC8gMjtlbHNlIGlmICh5IDwgMCkgYW5nbGUgPSAtTWF0aC5QSSAvIDI7CgogICAgICByZXR1cm4gYW5nbGU7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLndpZHRoID0gdGhpcy5zeXMuZ2FtZS5jYW52YXMud2lkdGg7CiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5zeXMuZ2FtZS5jYW52YXMuaGVpZ2h0OwogICAgICBjb2xvcnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7CiAgICAgICAgX3RoaXMyLmxvYWQuaW1hZ2UoInNoaXAiICsgaW5kZXgsIHJlcXVpcmUoIkAvYXNzZXRzL3NoaXAiICsgaW5kZXggKyAiLnBuZyIpKTsKICAgICAgfSk7CiAgICAgIHRoaXMubG9hZC5pbWFnZSgncGFydGljbGUnLCAnaHR0cHM6Ly9sYWJzLnBoYXNlci5pby9hc3NldHMvcGFydGljbGVzL3JlZC5wbmcnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAocGxheWVyKSB7CiAgICAgICAgdmFyIHggPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKDAsIF90aGlzMy53aWR0aCk7CiAgICAgICAgdmFyIHkgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKDAsIF90aGlzMy5oZWlnaHQpOwogICAgICAgIF90aGlzMy5zaGlwc1twbGF5ZXJdID0gX3RoaXMzLnBoeXNpY3MuYWRkLmltYWdlKHgsIHksICJzaGlwIiArIHBsYXllcik7CiAgICAgICAgdmFyIGFuZ2xlID0gUGhhc2VyLk1hdGguQmV0d2VlbihNYXRoLlBJIC8gNCwgTWF0aC5QSSAqIDMgLyA0KTsKCiAgICAgICAgX3RoaXMzLnNoaXBzW3BsYXllcl0uc2V0VmVsb2NpdHkoX3RoaXMzLnNoaXBWZWxvY2l0eSAqIE1hdGguY29zKGFuZ2xlKSwgX3RoaXMzLnNoaXBWZWxvY2l0eSAqIE1hdGguc2luKGFuZ2xlKSk7CgogICAgICAgIF90aGlzMy5zaGlwc1twbGF5ZXJdLnJvdGF0aW9uID0gYW5nbGU7CgogICAgICAgIF90aGlzMy5zaGlwc1twbGF5ZXJdLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTsKCiAgICAgICAgX3RoaXMzLnNoaXBzW3BsYXllcl0uc2V0Qm91bmNlKDEsIDEpOwoKICAgICAgICBpZiAocGxheWVyID09PSBfdGhpczMuY3VycmVudFBsYXllcikgewogICAgICAgICAgdmFyIHBhcnRpY2xlID0gX3RoaXMzLmFkZC5wYXJ0aWNsZXMoInBhcnRpY2xlIik7CgogICAgICAgICAgdmFyIGVtaXR0ZXIgPSBwYXJ0aWNsZS5jcmVhdGVFbWl0dGVyKHsKICAgICAgICAgICAgc3BlZWQ6IDEwMCwKICAgICAgICAgICAgc2NhbGU6IHsKICAgICAgICAgICAgICBzdGFydDogMC4zLAogICAgICAgICAgICAgIGVuZDogMAogICAgICAgICAgICB9LAogICAgICAgICAgICBibGVuZE1vZGU6ICJBREQiCiAgICAgICAgICB9KTsKICAgICAgICAgIGVtaXR0ZXIuc3RhcnRGb2xsb3coX3RoaXMzLnNoaXBzW3BsYXllcl0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5zaGlwcy5mb3JFYWNoKGZ1bmN0aW9uIChzaGlwKSB7CiAgICAgICAgdmFyIF9zaGlwJGJvZHkkdmVsb2NpdHkgPSBzaGlwLmJvZHkudmVsb2NpdHksCiAgICAgICAgICAgIHggPSBfc2hpcCRib2R5JHZlbG9jaXR5LngsCiAgICAgICAgICAgIHkgPSBfc2hpcCRib2R5JHZlbG9jaXR5Lnk7CiAgICAgICAgc2hpcC5yb3RhdGlvbiA9IF90aGlzNC5nZXRBbmdsZSh4LCB5KTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTG9iYnlTY2VuZTsKfShQaGFzZXIuU2NlbmUpOwoKZXhwb3J0IHsgTG9iYnlTY2VuZSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js"],"names":["Phaser","colors","sceneKeys","LobbyScene","socket","players","currentPlayer","key","lobby","shipVelocity","ships","x","y","angle","Math","atan","PI","width","sys","game","canvas","height","forEach","value","index","load","image","require","player","Between","physics","add","setVelocity","cos","sin","rotation","setCollideWorldBounds","setBounce","particle","particles","emitter","createEmitter","speed","scale","start","end","blendMode","startFollow","ship","body","velocity","getAngle","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, sceneKeys} from \"../constants/constants\";\n\nexport default class LobbyScene extends Phaser.Scene {\n\n    constructor(socket, players, currentPlayer) {\n        super({key: sceneKeys.lobby});\n        this.shipVelocity = 200;\n        this.socket = socket;\n        this.players = players;\n        this.currentPlayer = currentPlayer;\n        this.ships = [];\n    }\n\n    getAngle(x, y){\n        let angle;\n        if(x!==0) {\n            angle = Math.atan(y / x);\n            angle = x < 0 ? angle + Math.PI : angle;\n        } else if(y>=0) angle = Math.PI / 2;\n        else if(y<0) angle = -Math.PI / 2;\n        return angle;\n    }\n\n    preload(){\n        this.width = this.sys.game.canvas.width;\n        this.height = this.sys.game.canvas.height;\n\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ship\"+index+\".png\"))\n        });\n        this.load.image('particle', 'https://labs.phaser.io/assets/particles/red.png');\n    }\n\n    create(){\n        this.players.forEach(player => {\n            let x = Phaser.Math.Between(0, this.width);\n            let y = Phaser.Math.Between(0, this.height)\n            this.ships[player] = this.physics.add.image(x, y, \"ship\"+player);\n            let angle = Phaser.Math.Between(Math.PI/4, Math.PI*3/4);\n            this.ships[player].setVelocity(this.shipVelocity*Math.cos(angle), this.shipVelocity*Math.sin(angle));\n            this.ships[player].rotation = angle;\n            this.ships[player].setCollideWorldBounds(true);\n            this.ships[player].setBounce(1, 1);\n            if(player===this.currentPlayer) {\n                let particle = this.add.particles(\"particle\");\n                let emitter = particle.createEmitter({\n                    speed: 100,\n                    scale: {start: 0.3, end: 0},\n                    blendMode: \"ADD\"\n                });\n                emitter.startFollow(this.ships[player]);\n            }\n        });\n    }\n\n    update(){\n        this.ships.forEach(ship =>{\n            let {x, y} = ship.body.velocity;\n            ship.rotation = this.getAngle(x, y);\n        })\n    }\n}"]}]}
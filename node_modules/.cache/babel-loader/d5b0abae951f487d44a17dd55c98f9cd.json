{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js","mtime":1616751059348},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1616495189815},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1616495190967},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1616495189787},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1616495190059}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL21lZGlhL2phY29wby9Wb2x1bWVEYXRpL0RvY3VtZW50aS9wYXBlcm8udGsvY29zbW9zLnBhcGVyby5tZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAqIGFzIFBoYXNlciBmcm9tICJwaGFzZXIiOwppbXBvcnQgeyBjb2xvcnMsIGdhbWVEaW1lbnNpb25zLCBzY2VuZUtleXMgfSBmcm9tICIuLi9jb25zdGFudHMvY29uc3RhbnRzIjsKaW1wb3J0IHdlYnNvY2tldEV2ZW50cyBmcm9tICIuLi9jb25zdGFudHMvd2Vic29ja2V0RXZlbnRzIjsKaW1wb3J0IEJ1bGxldEdyb3VwIGZyb20gIi4vYnVsbGV0R3JvdXAiOwoKdmFyIEdhbWVTY2VuZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1BoYXNlciRTY2VuZSkgewogIF9pbmhlcml0cyhHYW1lU2NlbmUsIF9QaGFzZXIkU2NlbmUpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEdhbWVTY2VuZSk7CgogIGZ1bmN0aW9uIEdhbWVTY2VuZShzb2NrZXQsIGdhbWUpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2FtZVNjZW5lKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHsKICAgICAga2V5OiBzY2VuZUtleXMuZ2FtZQogICAgfSk7CiAgICBfdGhpcy5zb2NrZXQgPSBzb2NrZXQ7CiAgICBfdGhpcy5zZXR0aW5ncyA9IGdhbWUuc2V0dGluZ3M7CiAgICBfdGhpcy5jdXJyZW50UGxheWVyID0gZ2FtZS5jdXJyZW50UGxheWVyOwogICAgX3RoaXMubWF4VmVsb2NpdHlMaXR0bGUgPSBnYW1lLnNldHRpbmdzLnZlbG9jaXR5ICsgMC41OwogICAgX3RoaXMucGxheWVycyA9IHt9OwogICAgZ2FtZS5wbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKHBsYXllcikgewogICAgICBfdGhpcy5wbGF5ZXJzW3BsYXllci5sb2NhbElkXSA9IHBsYXllcjsKICAgICAgX3RoaXMucGxheWVyc1twbGF5ZXIubG9jYWxJZF0uYXZhaWxhYmxlQnVsbGV0cyA9IDM7CiAgICB9KTsKICAgIF90aGlzLm5vcm1hbGl6ZXJzID0gewogICAgICB2ZWxvY2l0eTogMTAwLAogICAgICBhbmd1bGFyVmVsb2NpdHk6IE1hdGguUEkgLyAxMjAwLAogICAgICByZWxvYWRpbmdWZWxvY2l0eTogMSAvIDIwMDAsCiAgICAgIGJ1bGxldFZlbG9jaXR5OiAyMDAKICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoR2FtZVNjZW5lLCBbewogICAga2V5OiAicHJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBjb2xvcnMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7CiAgICAgICAgX3RoaXMyLmxvYWQuaW1hZ2UoInNoaXAiICsgaW5kZXgsIHJlcXVpcmUoIkAvYXNzZXRzL3NoaXBzL3NoaXAiICsgaW5kZXggKyAiLnBuZyIpKTsKICAgICAgfSk7CiAgICAgIHRoaXMudGV4dHVyZXMuYWRkQmFzZTY0KCJidWxsZXQiLCByZXF1aXJlKCJAL2Fzc2V0cy9idWxsZXQucG5nIikpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuYnVsbGV0c0dyb3VwID0gbmV3IEJ1bGxldEdyb3VwKHRoaXMpOwogICAgICB0aGlzLnNldHVwTmV3U2hpcHMoKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLk1PVkVfQklHLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMub25CaWdNb3ZlZChkYXRhKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5NT1ZFX0xJVFRMRSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLm9uTGl0dGxlTW92ZWQoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5jcmVhdGVCdWxsZXQoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMudXBkYXRlU3RhdGUoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuUkVMT0FELCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMucmVsb2FkKGRhdGEpOwogICAgICB9KTsKICAgICAgdGhpcy5yb3RhdGlvbktleSA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5TUEFDRSk7CiAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQub24oImtleXVwLUVOVEVSIiwgdGhpcy5zaG9vdCwgdGhpcyk7CiAgICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIodGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcCwgdGhpcy5idWxsZXRzR3JvdXAsIHRoaXMub25Db2xsaXNpb24pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKHRpbWUsIGRlbHRhKSB7CiAgICAgIGlmICh0aGlzLnJvdGF0aW9uS2V5LmlzRG93bikgdGhpcy5tb3ZlQmlnKGRlbHRhKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWZWxvY2l0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmVsb2NpdHkoYW5nbGUsIG1hZykgewogICAgICByZXR1cm4gewogICAgICAgIHg6IE1hdGguY29zKGFuZ2xlKSAqIG1hZywKICAgICAgICB5OiBNYXRoLnNpbihhbmdsZSkgKiBtYWcKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXR1cE5ld1NoaXBzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cE5ld1NoaXBzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIE9iamVjdC5rZXlzKHRoaXMucGxheWVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpbmRleCkgewogICAgICAgIF90aGlzNC5wbGF5ZXJzW2tleV0uc2hpcCA9IF90aGlzNC5waHlzaWNzLmFkZC5pbWFnZSgoaW5kZXggPCAyID8gMC4wNSA6IDAuOTUpICogZ2FtZURpbWVuc2lvbnMud2lkdGgsIChpbmRleCAlIDIgPT09IDAgPyAwLjA1IDogMC45NSkgKiBnYW1lRGltZW5zaW9ucy5oZWlnaHQsICJzaGlwIiArIF90aGlzNC5wbGF5ZXJzW2tleV0uY29sb3IpOwogICAgICAgIF90aGlzNC5wbGF5ZXJzW2tleV0uc2hpcC5yb3RhdGlvbiA9IC1NYXRoLlBJIC8gNCAqIChpbmRleCA8IDIgPyAxIDogMykgKiAoaW5kZXggJSAyICogMiAtIDEpOwogICAgICAgIF90aGlzNC5wbGF5ZXJzW2tleV0uc2hpcC5sb2NhbElkID0ga2V5OwoKICAgICAgICB2YXIgX3RoaXM0JGdldFZlbG9jaXR5ID0gX3RoaXM0LmdldFZlbG9jaXR5KF90aGlzNC5wbGF5ZXJzW2tleV0uc2hpcC5yb3RhdGlvbiwgX3RoaXM0LnNldHRpbmdzLnZlbG9jaXR5ICogX3RoaXM0Lm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgICAgeCA9IF90aGlzNCRnZXRWZWxvY2l0eS54LAogICAgICAgICAgICB5ID0gX3RoaXM0JGdldFZlbG9jaXR5Lnk7CgogICAgICAgIF90aGlzNC5wbGF5ZXJzW2tleV0uc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKCiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGxheWVycyk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25CaWdNb3ZlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25CaWdNb3ZlZChkYXRhKSB7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0UG9zaXRpb24oZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnkpOwogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFJvdGF0aW9uKGRhdGEucm90YXRpb24pOwoKICAgICAgdmFyIF90aGlzJGdldFZlbG9jaXR5ID0gdGhpcy5nZXRWZWxvY2l0eShkYXRhLnJvdGF0aW9uLCB0aGlzLnNldHRpbmdzLnZlbG9jaXR5ICogdGhpcy5ub3JtYWxpemVycy52ZWxvY2l0eSksCiAgICAgICAgICB4ID0gX3RoaXMkZ2V0VmVsb2NpdHkueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eS55OwoKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3ZlQmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlQmlnKGRlbHRhKSB7CiAgICAgIHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAucm90YXRpb24gKz0gZGVsdGEgKiB0aGlzLnNldHRpbmdzLmFuZ3VsYXJWZWxvY2l0eSAqIHRoaXMubm9ybWFsaXplcnMuYW5ndWxhclZlbG9jaXR5OwoKICAgICAgdmFyIF90aGlzJGdldFZlbG9jaXR5MiA9IHRoaXMuZ2V0VmVsb2NpdHkodGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5yb3RhdGlvbiwgdGhpcy5zZXR0aW5ncy52ZWxvY2l0eSAqIHRoaXMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgeCA9IF90aGlzJGdldFZlbG9jaXR5Mi54LAogICAgICAgICAgeSA9IF90aGlzJGdldFZlbG9jaXR5Mi55OwoKICAgICAgdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgICAgdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuTU9WRV9CSUcsIHsKICAgICAgICBsb2NhbElkOiB0aGlzLmN1cnJlbnRQbGF5ZXIsCiAgICAgICAgcm90YXRpb246IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAucm90YXRpb24sCiAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgIHg6IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAueCwKICAgICAgICAgIHk6IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAueQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25MaXR0bGVNb3ZlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25MaXR0bGVNb3ZlZChkYXRhKSB7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0UG9zaXRpb24oZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnkpOwogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFJvdGF0aW9uKGRhdGEucm90YXRpb24pOwoKICAgICAgdmFyIF90aGlzJGdldFZlbG9jaXR5MyA9IHRoaXMuZ2V0VmVsb2NpdHkoZGF0YS5yb3RhdGlvbiwgdGhpcy5tYXhWZWxvY2l0eUxpdHRsZSAqIHRoaXMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgeCA9IF90aGlzJGdldFZlbG9jaXR5My54LAogICAgICAgICAgeSA9IF90aGlzJGdldFZlbG9jaXR5My55OwoKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRNYXhWZWxvY2l0eSh4LCB5KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRBY2NlbGVyYXRpb24oZGF0YS5hY2NlbGVyYXRpb24ueCwgZGF0YS5hY2NlbGVyYXRpb24ueSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibW92ZUxpdHRsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZUxpdHRsZSgpIHt9CiAgfSwgewogICAga2V5OiAiY3JlYXRlQnVsbGV0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVCdWxsZXQoZGF0YSkgewogICAgICB2YXIgdmVsb2NpdHkgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMuc2V0dGluZ3MuYnVsbGV0VmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLmJ1bGxldFZlbG9jaXR5KTsKICAgICAgdGhpcy5idWxsZXRzR3JvdXAuc2hvb3QoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksIGRhdGEucm90YXRpb24sIHZlbG9jaXR5LCBkYXRhLmxvY2FsSWQpOwogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5hdmFpbGFibGVCdWxsZXRzLS07CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvb3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob290KCkgewogICAgICBpZiAodGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uYXZhaWxhYmxlQnVsbGV0cyA+IDApIHsKICAgICAgICB2YXIgc2hpcCA9IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXA7CiAgICAgICAgdmFyIGFuZ2xlID0gc2hpcC5yb3RhdGlvbjsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgICAgIHg6IHNoaXAueCArIHNoaXAud2lkdGggKiBNYXRoLmNvcyhhbmdsZSksCiAgICAgICAgICAgIHk6IHNoaXAueSArIHNoaXAud2lkdGggKiBNYXRoLnNpbihhbmdsZSkKICAgICAgICAgIH0sCiAgICAgICAgICByb3RhdGlvbjogYW5nbGUsCiAgICAgICAgICBsb2NhbElkOiB0aGlzLmN1cnJlbnRQbGF5ZXIKICAgICAgICB9OwogICAgICAgIHRoaXMuc29ja2V0LmVtaXQod2Vic29ja2V0RXZlbnRzLlNIT09ULCBkYXRhKTsKICAgICAgICB0aGlzLmNyZWF0ZUJ1bGxldChkYXRhKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTdGF0ZShkYXRhKSB7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnN0YXRlID0gZGF0YS5zdGF0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkNvbGxpc2lvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db2xsaXNpb24oc2hpcCwgYnVsbGV0KSB7CiAgICAgIGJ1bGxldC5kZXN0cm95KCk7CiAgICAgIHNoaXAuZGVzdHJveSgpOwogICAgICAvKnRoaXMuc29ja2V0LmVtaXQod2Vic29ja2V0RXZlbnRzLkNIQU5HRV9TVEFURSwgewogICAgICAgICAgbG9jYWxJZDogc2hpcC5sb2NhbElkLAogICAgICAgICAgc3RhdGU6IC0tdGhpcy5wbGF5ZXJzW3NoaXAubG9jYWxJZF0uc3RhdGUKICAgICAgfSkqLwogICAgfQogIH0sIHsKICAgIGtleTogInJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVsb2FkKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uYXZhaWxhYmxlQnVsbGV0cyA9IGRhdGEuYXZhaWxhYmxlQnVsbGV0czsKICAgIH0KICB9XSk7CgogIHJldHVybiBHYW1lU2NlbmU7Cn0oUGhhc2VyLlNjZW5lKTsKCmV4cG9ydCB7IEdhbWVTY2VuZSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js"],"names":["Phaser","colors","gameDimensions","sceneKeys","websocketEvents","BulletGroup","GameScene","socket","game","key","settings","currentPlayer","maxVelocityLittle","velocity","players","forEach","player","localId","availableBullets","normalizers","angularVelocity","Math","PI","reloadingVelocity","bulletVelocity","value","index","load","image","require","textures","addBase64","bulletsGroup","setupNewShips","on","MOVE_BIG","data","onBigMoved","MOVE_LITTLE","onLittleMoved","SHOOT","createBullet","CHANGE_STATE","updateState","RELOAD","reload","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","shoot","physics","add","collider","ship","onCollision","time","delta","isDown","moveBig","angle","mag","x","cos","y","sin","Object","keys","width","height","color","rotation","getVelocity","setVelocity","setCollideWorldBounds","console","log","setPosition","position","setRotation","emit","setMaxVelocity","setAcceleration","acceleration","state","bullet","destroy","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, gameDimensions, sceneKeys} from \"../constants/constants\";\nimport websocketEvents from \"../constants/websocketEvents\";\nimport BulletGroup from \"./bulletGroup\";\n\nexport default class GameScene extends Phaser.Scene {\n\n    constructor(socket, game) {\n        super({key: sceneKeys.game});\n\n        this.socket = socket;\n        this.settings = game.settings;\n        this.currentPlayer = game.currentPlayer;\n        this.maxVelocityLittle = game.settings.velocity+0.5;\n\n        this.players = {};\n        game.players.forEach(player => {\n            this.players[player.localId] = player;\n            this.players[player.localId].availableBullets = 3;\n        });\n\n        this.normalizers = {\n            velocity: 100,\n            angularVelocity: Math.PI/1200,\n            reloadingVelocity: 1/2000,\n            bulletVelocity: 200\n        }\n    }\n\n    preload(){\n\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ships/ship\"+index+\".png\"));\n        });\n        this.textures.addBase64(\"bullet\", require(\"@/assets/bullet.png\"));\n\n    }\n\n    create(){\n        this.bulletsGroup = new BulletGroup(this);\n\n        this.setupNewShips();\n\n        this.socket.on(websocketEvents.MOVE_BIG, data => this.onBigMoved(data));\n        this.socket.on(websocketEvents.MOVE_LITTLE, data => this.onLittleMoved(data));\n        this.socket.on(websocketEvents.SHOOT, data => this.createBullet(data));\n        this.socket.on(websocketEvents.CHANGE_STATE, data => this.updateState(data));\n        this.socket.on(websocketEvents.RELOAD, data => this.reload(data));\n\n        this.rotationKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n        this.input.keyboard.on(\"keyup-ENTER\", this.shoot, this);\n\n        this.physics.add.collider(this.players[this.currentPlayer].ship, this.bulletsGroup, this.onCollision);\n    }\n\n    update(time, delta){\n        if(this.rotationKey.isDown) this.moveBig(delta);\n    }\n\n    getVelocity(angle, mag){\n        return {\n            x: Math.cos(angle)*mag,\n            y: Math.sin(angle)*mag\n        }\n    }\n\n    setupNewShips(){\n        Object.keys(this.players).forEach((key, index) => {\n            this.players[key].ship = this.physics.add.image(\n                (index<2 ? 0.05 : 0.95) * gameDimensions.width,\n                ( index%2 === 0 ? 0.05 : 0.95 ) * gameDimensions.height,\n                \"ship\"+this.players[key].color\n            );\n            this.players[key].ship.rotation = -Math.PI / 4  * ( index < 2 ? 1 : 3) * ( ( index % 2 ) * 2 - 1 );\n            this.players[key].ship.localId = key;\n            let {x, y} = this.getVelocity(this.players[key].ship.rotation, this.settings.velocity*this.normalizers.velocity);\n            this.players[key].ship.setVelocity(x, y);\n            this.players[key].ship.setCollideWorldBounds(true);\n        });\n        console.log(this.players);\n    }\n\n    onBigMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.settings.velocity * this.normalizers.velocity);\n        this.players[data.localId].ship.setVelocity(x, y);\n    }\n\n    moveBig(delta){\n        this.players[this.currentPlayer].ship.rotation += delta * this.settings.angularVelocity * this.normalizers.angularVelocity;\n        let {x, y} = this.getVelocity(\n            this.players[this.currentPlayer].ship.rotation,\n            this.settings.velocity * this.normalizers.velocity\n        );\n        this.players[this.currentPlayer].ship.setVelocity(x, y);\n        this.socket.emit(websocketEvents.MOVE_BIG, {\n            localId: this.currentPlayer,\n            rotation: this.players[this.currentPlayer].ship.rotation,\n            position: {\n                x: this.players[this.currentPlayer].ship.x,\n                y: this.players[this.currentPlayer].ship.y\n            }\n        });\n    }\n\n\n    onLittleMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.maxVelocityLittle*this.normalizers.velocity);\n        this.players[data.localId].ship.setMaxVelocity(x, y);\n        this.players[data.localId].ship.setAcceleration(data.acceleration.x, data.acceleration.y);\n    }\n\n    moveLittle(){\n\n    }\n\n\n    createBullet(data){\n        let velocity = this.getVelocity(data.rotation,this.settings.bulletVelocity*this.normalizers.bulletVelocity);\n        this.bulletsGroup.shoot(data.position.x, data.position.y, data.rotation, velocity, data.localId);\n        this.players[data.localId].availableBullets--;\n    }\n\n    shoot(){\n        if(this.players[this.currentPlayer].availableBullets>0){\n            let ship = this.players[this.currentPlayer].ship;\n            let angle = ship.rotation;\n            let data = {\n                position: {\n                    x: ship.x + ship.width*Math.cos(angle),\n                    y: ship.y + ship.width*Math.sin(angle)\n                },\n                rotation: angle,\n                localId: this.currentPlayer\n            };\n            this.socket.emit(websocketEvents.SHOOT, data);\n            this.createBullet(data);\n        }\n    }\n\n\n    updateState(data){\n        this.players[data.localId].state = data.state;\n    }\n\n    onCollision(ship, bullet){\n        bullet.destroy();\n        ship.destroy();\n        /*this.socket.emit(websocketEvents.CHANGE_STATE, {\n            localId: ship.localId,\n            state: --this.players[ship.localId].state\n        })*/\n    }\n\n\n    reload(data){\n        this.players[data.localId].availableBullets = data.availableBullets;\n    }\n\n\n}"]}]}
{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js","mtime":1616252723860},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1610909371557},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js","mtime":1610909371562},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/eslint-loader/index.js","mtime":1610909415268}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAqIGFzIFBoYXNlciBmcm9tICJwaGFzZXIiOwppbXBvcnQgeyBjb2xvcnMsIHNjZW5lS2V5cyB9IGZyb20gIi4uL2NvbnN0YW50cy9jb25zdGFudHMiOwoKdmFyIExvYmJ5U2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QaGFzZXIkU2NlbmUpIHsKICBfaW5oZXJpdHMoTG9iYnlTY2VuZSwgX1BoYXNlciRTY2VuZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTG9iYnlTY2VuZSk7CgogIGZ1bmN0aW9uIExvYmJ5U2NlbmUoc29ja2V0LCBwbGF5ZXJzLCBjdXJyZW50UGxheWVyKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvYmJ5U2NlbmUpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgewogICAgICBrZXk6IHNjZW5lS2V5cy5sb2JieQogICAgfSk7CiAgICBfdGhpcy5zaGlwVmVsb2NpdHkgPSAyMDA7CiAgICBfdGhpcy5zb2NrZXQgPSBzb2NrZXQ7CiAgICBfdGhpcy5wbGF5ZXJzID0gcGxheWVyczsKICAgIF90aGlzLmN1cnJlbnRQbGF5ZXIgPSBjdXJyZW50UGxheWVyOwogICAgX3RoaXMuc2hpcHMgPSBbXTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhMb2JieVNjZW5lLCBbewogICAga2V5OiAiZ2V0QW5nbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFuZ2xlKHgsIHkpIHsKICAgICAgdmFyIGFuZ2xlOwoKICAgICAgaWYgKHggIT09IDApIHsKICAgICAgICBhbmdsZSA9IE1hdGguYXRhbih5IC8geCk7CiAgICAgICAgYW5nbGUgPSB4IDwgMCA/IGFuZ2xlICsgTWF0aC5QSSA6IGFuZ2xlOwogICAgICB9IGVsc2UgaWYgKHkgPj0gMCkgYW5nbGUgPSBNYXRoLlBJIC8gMjtlbHNlIGlmICh5IDwgMCkgYW5nbGUgPSAtTWF0aC5QSSAvIDI7CgogICAgICByZXR1cm4gYW5nbGU7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLndpZHRoID0gdGhpcy5zeXMuZ2FtZS5jYW52YXMud2lkdGg7CiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5zeXMuZ2FtZS5jYW52YXMuaGVpZ2h0OwogICAgICB0aGlzLmNhbWVyYXMubWFpbi5zZXRCYWNrZ3JvdW5kQ29sb3IoIiNmZmZmZmYiKTsKICAgICAgY29sb3JzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIF90aGlzMi5sb2FkLmltYWdlKCJzaGlwIiArIGluZGV4LCByZXF1aXJlKCJAL2Fzc2V0cy9zaGlwIiArIGluZGV4ICsgIi5wbmciKSk7CiAgICAgIH0pOwogICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3BhcnRpY2xlJywgJ2h0dHBzOi8vbGFicy5waGFzZXIuaW8vYXNzZXRzL3BhcnRpY2xlcy9yZWQucG5nJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5wbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKHBsYXllcikgewogICAgICAgIHZhciB4ID0gUGhhc2VyLk1hdGguQmV0d2VlbigwLCBfdGhpczMud2lkdGgpOwogICAgICAgIHZhciB5ID0gUGhhc2VyLk1hdGguQmV0d2VlbigwLCBfdGhpczMuaGVpZ2h0KTsKICAgICAgICBfdGhpczMuc2hpcHNbcGxheWVyXSA9IF90aGlzMy5waHlzaWNzLmFkZC5pbWFnZSh4LCB5LCAic2hpcCIgKyBwbGF5ZXIpOwogICAgICAgIHZhciBhbmdsZSA9IFBoYXNlci5NYXRoLkJldHdlZW4oTWF0aC5QSSAvIDQsIE1hdGguUEkgKiAzIC8gNCk7CgogICAgICAgIF90aGlzMy5zaGlwc1twbGF5ZXJdLnNldFZlbG9jaXR5KF90aGlzMy5zaGlwVmVsb2NpdHkgKiBNYXRoLmNvcyhhbmdsZSksIF90aGlzMy5zaGlwVmVsb2NpdHkgKiBNYXRoLnNpbihhbmdsZSkpOwoKICAgICAgICBfdGhpczMuc2hpcHNbcGxheWVyXS5yb3RhdGlvbiA9IGFuZ2xlOwoKICAgICAgICBfdGhpczMuc2hpcHNbcGxheWVyXS5zZXRDb2xsaWRlV29ybGRCb3VuZHModHJ1ZSk7CgogICAgICAgIF90aGlzMy5zaGlwc1twbGF5ZXJdLnNldEJvdW5jZSgxLCAxKTsKICAgICAgICAvKmxldCBwYXJ0aWNsZSA9IHRoaXMuYWRkLnBhcnRpY2xlcygicGFydGljbGUiKTsKICAgICAgICBsZXQgZW1pdHRlciA9IHBhcnRpY2xlLmNyZWF0ZUVtaXR0ZXIoewogICAgICAgICAgICBzcGVlZDogMjAwLAogICAgICAgICAgICBzY2FsZTogeyBzdGFydDogMC4zLCBlbmQ6IDAgfSwKICAgICAgICAgICAgYmxlbmRNb2RlOiAiQUREIgogICAgICAgIH0pOwogICAgICAgIGVtaXR0ZXIuc3RhcnRGb2xsb3codGhpcy5zaGlwc1twbGF5ZXJdKTsqLwoKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5zaGlwcy5mb3JFYWNoKGZ1bmN0aW9uIChzaGlwKSB7CiAgICAgICAgdmFyIF9zaGlwJGJvZHkkdmVsb2NpdHkgPSBzaGlwLmJvZHkudmVsb2NpdHksCiAgICAgICAgICAgIHggPSBfc2hpcCRib2R5JHZlbG9jaXR5LngsCiAgICAgICAgICAgIHkgPSBfc2hpcCRib2R5JHZlbG9jaXR5Lnk7CiAgICAgICAgc2hpcC5yb3RhdGlvbiA9IF90aGlzNC5nZXRBbmdsZSh4LCB5KTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTG9iYnlTY2VuZTsKfShQaGFzZXIuU2NlbmUpOwoKZXhwb3J0IHsgTG9iYnlTY2VuZSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js"],"names":["Phaser","colors","sceneKeys","LobbyScene","socket","players","currentPlayer","key","lobby","shipVelocity","ships","x","y","angle","Math","atan","PI","width","sys","game","canvas","height","cameras","main","setBackgroundColor","forEach","value","index","load","image","require","player","Between","physics","add","setVelocity","cos","sin","rotation","setCollideWorldBounds","setBounce","ship","body","velocity","getAngle","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, sceneKeys} from \"../constants/constants\";\n\nexport default class LobbyScene extends Phaser.Scene {\n\n    constructor(socket, players, currentPlayer) {\n        super({key: sceneKeys.lobby});\n        this.shipVelocity = 200;\n        this.socket = socket;\n        this.players = players;\n        this.currentPlayer = currentPlayer;\n        this.ships = [];\n    }\n\n    getAngle(x, y){\n        let angle;\n        if(x!==0) {\n            angle = Math.atan(y / x);\n            angle = x < 0 ? angle + Math.PI : angle;\n        } else if(y>=0) angle = Math.PI / 2;\n        else if(y<0) angle = -Math.PI / 2;\n        return angle;\n    }\n\n    preload(){\n        this.width = this.sys.game.canvas.width;\n        this.height = this.sys.game.canvas.height;\n        this.cameras.main.setBackgroundColor(\"#ffffff\");\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ship\"+index+\".png\"))\n        });\n        this.load.image('particle', 'https://labs.phaser.io/assets/particles/red.png');\n    }\n\n    create(){\n        this.players.forEach(player => {\n            let x = Phaser.Math.Between(0, this.width);\n            let y = Phaser.Math.Between(0, this.height)\n            this.ships[player] = this.physics.add.image(x, y, \"ship\"+player);\n            let angle = Phaser.Math.Between(Math.PI/4, Math.PI*3/4);\n            this.ships[player].setVelocity(this.shipVelocity*Math.cos(angle), this.shipVelocity*Math.sin(angle));\n            this.ships[player].rotation = angle;\n            this.ships[player].setCollideWorldBounds(true);\n            this.ships[player].setBounce(1, 1);\n            /*let particle = this.add.particles(\"particle\");\n            let emitter = particle.createEmitter({\n                speed: 200,\n                scale: { start: 0.3, end: 0 },\n                blendMode: \"ADD\"\n            });\n            emitter.startFollow(this.ships[player]);*/\n        });\n    }\n\n    update(){\n        this.ships.forEach(ship =>{\n            let {x, y} = ship.body.velocity;\n            ship.rotation = this.getAngle(x, y);\n        })\n    }\n}"]}]}
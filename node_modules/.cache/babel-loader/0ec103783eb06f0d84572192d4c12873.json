{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/components/UserHamburgerMenu.vue?vue&type=script&lang=js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/components/UserHamburgerMenu.vue","mtime":1616416389476},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1610909371557},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1610909371551},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js","mtime":1610909371562},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1610909371557},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/vue-loader-v16/dist/index.js","mtime":1610909425518}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXJscyB9IGZyb20gIi4uL2NvbnN0YW50cy9jb25zdGFudHMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVzZXJIYW1idXJnZXJNZW51IiwKICBwcm9wczogewogICAgc3JjOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgc2hvdzogQm9vbGVhbiwKICAgIGF1dG9Mb2dpbjogQm9vbGVhbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvZ2dlZDogZmFsc2UsCiAgICAgIHVzZXJuYW1lOiBudWxsCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy4kZW1pdCgidG9nZ2xlLXNob3ciLCBmYWxzZSk7CiAgICB9KTsKCiAgICB2YXIgY3JlYXRlTG9jYWxBY2NvdW50ID0gZnVuY3Rpb24gY3JlYXRlTG9jYWxBY2NvdW50KCkgewogICAgICBheGlvcy5nZXQodXJscy5jcmVhdGVMb2NhbEFjY291bnRVcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMubG9nZ2VkID0gZmFsc2U7CiAgICAgICAgX3RoaXMudXNlcm5hbWUgPSByZXNwb25zZS5kYXRhLnVzZXJuYW1lOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLm9yaWdpbiArICIvZXJyb3I/ZnJvbT0iICsgbG9jYXRpb24ucGF0aG5hbWU7CiAgICAgIH0pOwogICAgfTsKCiAgICBheGlvcy5nZXQodXJscy5nZXRMb2dpbkluZm9VcmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmICghcmVzcG9uc2UuZGF0YSkgewogICAgICAgIC8vc2Ugbm9uIMOoIGxvZ2dhdG8KICAgICAgICBpZiAoX3RoaXMuYXV0b0xvZ2luKSBjcmVhdGVMb2NhbEFjY291bnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5sb2dnZWQgPSByZXNwb25zZS5kYXRhLmdvb2dsZV9zaWduZWRfaW47CiAgICAgICAgX3RoaXMudXNlcm5hbWUgPSByZXNwb25zZS5kYXRhLnVzZXJuYW1lOwogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZU1lbnU6IGZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7CiAgICAgIHRoaXMuJGVtaXQoInRvZ2dsZS1zaG93IiwgIXRoaXMuc2hvdyk7CiAgICB9LAogICAgcmVkaXJlY3RUb0hvbWU6IGZ1bmN0aW9uIHJlZGlyZWN0VG9Ib21lKCkgewogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIvIjsKICAgIH0sCiAgICByZWRpcmVjdFRvR29vZ2xlOiBmdW5jdGlvbiByZWRpcmVjdFRvR29vZ2xlKCkgewogICAgICB2YXIgZnJvbV9sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2F1dGgvZ29vZ2xlP2Zyb21fbG9jYXRpb249JyArIGZyb21fbG9jYXRpb247CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIGF4aW9zLmdldCh1cmxzLmxvZ291dFVybCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/components/UserHamburgerMenu.vue"],"names":[],"mappings":"AAuBA,SAAQ,IAAR,QAAmB,wBAAnB;AACA,OAAO,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,mBADO;AAEb,EAAA,KAAK,EAAE;AACL,IAAA,GAAG,EAAE;AACH,MAAA,QAAQ,EAAE;AADP,KADA;AAIL,IAAA,IAAI,EAAE,OAJD;AAKL,IAAA,SAAS,EAAE;AALN,GAFM;AASb,EAAA,IATa,kBASP;AACJ,WAAO;AACL,MAAA,MAAM,EAAE,KADH;AAEL,MAAA,QAAQ,EAAE;AAFL,KAAP;AAID,GAdY;AAeb,EAAA,OAfa,qBAeH;AAAA;;AACR,IAAA,MAAM,CAAC,gBAAP,CAAwB,OAAxB,EAAiC,YAAI;AAAC,MAAA,KAAI,CAAC,KAAL,CAAW,aAAX,EAA0B,KAA1B;AAAiC,KAAvE;;AACA,QAAM,kBAAiB,GAAI,SAArB,kBAAqB,GAAI;AAC7B,MAAA,KAAI,CACC,GADL,CACS,IAAI,CAAC,qBADd,EAEK,IAFL,CAEU,UAAC,QAAD,EAAc;AAClB,QAAA,KAAI,CAAC,MAAL,GAAc,KAAd;AACA,QAAA,KAAI,CAAC,QAAL,GAAgB,QAAQ,CAAC,IAAT,CAAc,QAA9B;AACD,OALL,EAMK,KANL,CAMW,YAAM;AACX,QAAA,QAAQ,CAAC,IAAT,GAAgB,QAAQ,CAAC,MAAT,GAAgB,cAAhB,GAA+B,QAAQ,CAAC,QAAxD;AACD,OARL;AASF,KAVA;;AAWA,IAAA,KAAK,CAAC,GAAN,CAAU,IAAI,CAAC,eAAf,EACK,IADL,CACU,UAAA,QAAO,EAAK;AAChB,UAAG,CAAC,QAAQ,CAAC,IAAb,EAAkB;AAAE;AAClB,YAAG,KAAI,CAAC,SAAR,EAAmB,kBAAkB;AACvC,OAFA,MAEO;AACL,QAAA,KAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAT,CAAc,gBAA5B;AACA,QAAA,KAAI,CAAC,QAAL,GAAgB,QAAQ,CAAC,IAAT,CAAc,QAA9B;AACF;AACD,KARL;AASD,GArCY;AAsCb,EAAA,OAAO,EAAE;AACP,IAAA,UADO,wBACK;AACV,WAAK,KAAL,CAAW,aAAX,EAA0B,CAAC,KAAK,IAAhC;AACD,KAHM;AAIP,IAAA,cAJO,4BAIS;AACd,MAAA,MAAM,CAAC,QAAP,CAAgB,IAAhB,GAAuB,GAAvB;AACD,KANM;AAOP,IAAA,gBAPO,8BAOW;AAChB,UAAI,aAAY,GAAI,MAAM,CAAC,QAA3B;AACA,MAAA,MAAM,CAAC,QAAP,CAAgB,IAAhB,GAAuB,gCAA8B,aAArD;AACD,KAVM;AAWP,IAAA,MAXO,oBAWC;AACN,MAAA,KAAK,CAAC,GAAN,CAAU,IAAI,CAAC,SAAf;AACF;AAbO;AAtCI,CAAf","sourcesContent":["<template>\n  <div class=\"user-hamburger-menu__main-panel\" @click.stop=\"\" :class=\"{'hidden': !show}\">\n    <div class=\"user-hamburger-menu__icon\" @click=\"toggleMenu\" :class=\"{'rotated': show}\">\n      <img :src=\"src\" alt=\"menu\">\n    </div>\n    <div class=\"user-hamburger-menu__menu\">\n      <img class=\"home-button\" src=\"@/assets/logo.png\" @click=\"redirectToHome\" alt=\"Home\">\n      <div class=\"user-menu\" v-if=\"username\">\n        <div>\n          <p>Username: <strong>{{decodeURIComponent(username)}}</strong></p>\n          <button @click=\"logout\">Logout</button>\n        </div>\n        <button class=\"proceed-with-google\" v-if=\"!logged\" @click=\"redirectToGoogle\">Activate sync with google</button>\n      </div>\n      <div class=\"user-menu\" v-else>\n        <p>You are currently not logged in</p>\n        <button class=\"proceed-with-google\" @click=\"redirectToGoogle\">Sign in now with google</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {urls} from \"../constants/constants\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"UserHamburgerMenu\",\n  props: {\n    src: {\n      required: true\n    },\n    show: Boolean,\n    autoLogin: Boolean\n  },\n  data(){\n    return {\n      logged: false,\n      username: null\n    }\n  },\n  mounted() {\n    window.addEventListener(\"click\", ()=>{this.$emit(\"toggle-show\", false)});\n    const createLocalAccount = ()=>{\n      axios\n          .get(urls.createLocalAccountUrl)\n          .then((response) => {\n            this.logged = false;\n            this.username = response.data.username;\n          })\n          .catch(() => {\n            location.href = location.origin+\"/error?from=\"+location.pathname;\n          });\n    }\n    axios.get(urls.getLoginInfoUrl)\n        .then(response => {\n          if(!response.data){ //se non Ã¨ loggato\n            if(this.autoLogin) createLocalAccount();\n          } else {\n            this.logged = response.data.google_signed_in;\n            this.username = response.data.username;\n          }\n        })\n  },\n  methods: {\n    toggleMenu(){\n      this.$emit(\"toggle-show\", !this.show);\n    },\n    redirectToHome(){\n      window.location.href = \"/\";\n    },\n    redirectToGoogle(){\n      let from_location = window.location;\n      window.location.href = '/auth/google?from_location='+from_location;\n    },\n    logout(){\n      axios.get(urls.logoutUrl);\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$papero-color-dark: #ffa500;\n\n.user-hamburger-menu__main-panel{\n  transition: all 0.5s;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  width: 25%;\n  @media (max-width: 500px) {\n    width: 70% !important;\n  }\n  @media (max-width: 700px) {\n    width: 40%;\n  }\n\n  &.hidden{\n    transform: translateX(-100%);\n  }\n  background: $papero-color-dark;\n\n  .user-hamburger-menu__menu{\n    width: 100%;\n    height: 100%;\n    display: grid;\n    grid-template-rows: 20% 20% 60%;\n    grid-template-columns: auto;\n    grid-template-areas: \"logo\" \"user\" \"chat\";\n    align-items: center;\n    justify-items: center;\n    overflow-y: scroll;\n\n    .home-button{\n      margin-top: 2%;\n      grid-area: logo;\n      height: 90%;\n    }\n\n    .user-menu{\n      align-self: start;\n      margin-top: 5%;\n      text-align: center;\n      color: white;\n      grid-area: user;\n\n      p{\n        font-size: 200%;\n      }\n\n      button{\n        font-size: 150%;\n      }\n      button:hover{\n        color: $papero-color-dark;\n      }\n    }\n  }\n\n  .user-hamburger-menu__icon{\n    position: absolute;\n    width: 10%;\n    height: min-content;\n    right: calc(-10% - 20px);\n    top: 20px;\n\n    transition: all 0.5s;\n    z-index: 5;\n\n    img{\n      float: left;\n      width: 100%;\n      height: auto;\n    }\n\n    &.rotated {\n      transform: rotate(90deg);\n    }\n  }\n}\n</style>"],"sourceRoot":""}]}
{"remainingRequest":"C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\src\\phaser\\GameScene.js","dependencies":[{"path":"C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\src\\phaser\\GameScene.js","mtime":1616862459139},{"path":"C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616506645671},{"path":"C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1616506657299},{"path":"C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\node_modules\\babel-loader\\lib\\index.js","mtime":1616506645397},{"path":"C:\\Users\\matte\\Desktop\\papero\\cosmos.papero.me\\node_modules\\eslint-loader\\index.js","mtime":1616506648427}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9tYXR0ZS9EZXNrdG9wL3BhcGVyby9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovVXNlcnMvbWF0dGUvRGVza3RvcC9wYXBlcm8vY29zbW9zLnBhcGVyby5tZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkM6L1VzZXJzL21hdHRlL0Rlc2t0b3AvcGFwZXJvL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJDOi9Vc2Vycy9tYXR0ZS9EZXNrdG9wL3BhcGVyby9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAqIGFzIFBoYXNlciBmcm9tICJwaGFzZXIiOwppbXBvcnQgeyBjb2xvcnMsIGdhbWVEaW1lbnNpb25zLCBzY2VuZUtleXMgfSBmcm9tICIuLi9jb25zdGFudHMvY29uc3RhbnRzIjsKaW1wb3J0IHdlYnNvY2tldEV2ZW50cyBmcm9tICIuLi9jb25zdGFudHMvd2Vic29ja2V0RXZlbnRzIjsKCnZhciBHYW1lU2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QaGFzZXIkU2NlbmUpIHsKICBfaW5oZXJpdHMoR2FtZVNjZW5lLCBfUGhhc2VyJFNjZW5lKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihHYW1lU2NlbmUpOwoKICBmdW5jdGlvbiBHYW1lU2NlbmUoc29ja2V0LCBnYW1lKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWVTY2VuZSk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7CiAgICAgIGtleTogc2NlbmVLZXlzLmdhbWUKICAgIH0pOwogICAgX3RoaXMuc29ja2V0ID0gc29ja2V0OwogICAgX3RoaXMuc2V0dGluZ3MgPSBnYW1lLnNldHRpbmdzOwogICAgX3RoaXMuY3VycmVudFBsYXllciA9IGdhbWUuY3VycmVudFBsYXllcjsKICAgIF90aGlzLm1heFZlbG9jaXR5TGl0dGxlID0gZ2FtZS5zZXR0aW5ncy52ZWxvY2l0eSArIDAuNTsKICAgIF90aGlzLnBsYXllcnMgPSB7fTsKICAgIGdhbWUucGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwbGF5ZXIpIHsKICAgICAgX3RoaXMucGxheWVyc1twbGF5ZXIubG9jYWxJZF0gPSBwbGF5ZXI7CiAgICAgIF90aGlzLnBsYXllcnNbcGxheWVyLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMgPSAzOwogICAgfSk7CiAgICBfdGhpcy5ub3JtYWxpemVycyA9IHsKICAgICAgdmVsb2NpdHk6IDEwMCwKICAgICAgYW5ndWxhclZlbG9jaXR5OiBNYXRoLlBJIC8gMTIwMCwKICAgICAgcmVsb2FkaW5nVmVsb2NpdHk6IDEgLyAyMDAwLAogICAgICBidWxsZXRWZWxvY2l0eTogMjAwCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEdhbWVTY2VuZSwgW3sKICAgIGtleTogInByZWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZWxvYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29sb3JzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIF90aGlzMi5sb2FkLmltYWdlKCJzaGlwIiArIGluZGV4LCByZXF1aXJlKCJAL2Fzc2V0cy9zaGlwcy9zaGlwIiArIGluZGV4ICsgIi5wbmciKSk7CiAgICAgIH0pOwogICAgICB0aGlzLnRleHR1cmVzLmFkZEJhc2U2NCgiYnVsbGV0IiwgcmVxdWlyZSgiQC9hc3NldHMvYnVsbGV0LnBuZyIpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnNldHVwTmV3U2hpcHMoKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLk1PVkVfQklHLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMub25CaWdNb3ZlZChkYXRhKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5NT1ZFX0xJVFRMRSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLm9uTGl0dGxlTW92ZWQoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5jcmVhdGVCdWxsZXQoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMudXBkYXRlU3RhdGUoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuUkVMT0FELCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMucmVsb2FkKGRhdGEpOwogICAgICB9KTsKICAgICAgdGhpcy5yb3RhdGlvbktleSA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5TUEFDRSk7CiAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQub24oImtleXVwLUVOVEVSIiwgdGhpcy5zaG9vdCwgdGhpcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUodGltZSwgZGVsdGEpIHsKICAgICAgaWYgKHRoaXMucm90YXRpb25LZXkuaXNEb3duKSB0aGlzLm1vdmVCaWcoZGVsdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFZlbG9jaXR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWZWxvY2l0eShhbmdsZSwgbWFnKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogTWF0aC5jb3MoYW5nbGUpICogbWFnLAogICAgICAgIHk6IE1hdGguc2luKGFuZ2xlKSAqIG1hZwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInNldHVwTmV3U2hpcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwTmV3U2hpcHMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgT2JqZWN0LmtleXModGhpcy5wbGF5ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGluZGV4KSB7CiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwID0gX3RoaXM0LnBoeXNpY3MuYWRkLmltYWdlKChpbmRleCA8IDIgPyAwLjA1IDogMC45NSkgKiBnYW1lRGltZW5zaW9ucy53aWR0aCwgKGluZGV4ICUgMiA9PT0gMCA/IDAuMDUgOiAwLjk1KSAqIGdhbWVEaW1lbnNpb25zLmhlaWdodCwgInNoaXAiICsgX3RoaXM0LnBsYXllcnNba2V5XS5jb2xvcik7CiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwLnJvdGF0aW9uID0gLU1hdGguUEkgLyA0ICogKGluZGV4IDwgMiA/IDEgOiAzKSAqIChpbmRleCAlIDIgKiAyIC0gMSk7CiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwLmxvY2FsSWQgPSBrZXk7CgogICAgICAgIHZhciBfdGhpczQkZ2V0VmVsb2NpdHkgPSBfdGhpczQuZ2V0VmVsb2NpdHkoX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwLnJvdGF0aW9uLCBfdGhpczQuc2V0dGluZ3MudmVsb2NpdHkgKiBfdGhpczQubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgICB4ID0gX3RoaXM0JGdldFZlbG9jaXR5LngsCiAgICAgICAgICAgIHkgPSBfdGhpczQkZ2V0VmVsb2NpdHkueTsKCiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwLnNldFZlbG9jaXR5KHgsIHkpOwoKICAgICAgICBfdGhpczQucGxheWVyc1trZXldLnNoaXAuc2V0Q29sbGlkZVdvcmxkQm91bmRzKHRydWUpOwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5wbGF5ZXJzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkJpZ01vdmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJpZ01vdmVkKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRQb3NpdGlvbihkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0Um90YXRpb24oZGF0YS5yb3RhdGlvbik7CgogICAgICB2YXIgX3RoaXMkZ2V0VmVsb2NpdHkgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMuc2V0dGluZ3MudmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eS54LAogICAgICAgICAgeSA9IF90aGlzJGdldFZlbG9jaXR5Lnk7CgogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFZlbG9jaXR5KHgsIHkpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVCaWciLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVCaWcoZGVsdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5yb3RhdGlvbiArPSBkZWx0YSAqIHRoaXMuc2V0dGluZ3MuYW5ndWxhclZlbG9jaXR5ICogdGhpcy5ub3JtYWxpemVycy5hbmd1bGFyVmVsb2NpdHk7CgogICAgICB2YXIgX3RoaXMkZ2V0VmVsb2NpdHkyID0gdGhpcy5nZXRWZWxvY2l0eSh0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uLCB0aGlzLnNldHRpbmdzLnZlbG9jaXR5ICogdGhpcy5ub3JtYWxpemVycy52ZWxvY2l0eSksCiAgICAgICAgICB4ID0gX3RoaXMkZ2V0VmVsb2NpdHkyLngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHkyLnk7CgogICAgICB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnNldFZlbG9jaXR5KHgsIHkpOwogICAgICB0aGlzLnNvY2tldC5lbWl0KHdlYnNvY2tldEV2ZW50cy5NT1ZFX0JJRywgewogICAgICAgIGxvY2FsSWQ6IHRoaXMuY3VycmVudFBsYXllciwKICAgICAgICByb3RhdGlvbjogdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5yb3RhdGlvbiwKICAgICAgICBwb3NpdGlvbjogewogICAgICAgICAgeDogdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC54LAogICAgICAgICAgeTogdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC55CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkxpdHRsZU1vdmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkxpdHRsZU1vdmVkKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRQb3NpdGlvbihkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0Um90YXRpb24oZGF0YS5yb3RhdGlvbik7CgogICAgICB2YXIgX3RoaXMkZ2V0VmVsb2NpdHkzID0gdGhpcy5nZXRWZWxvY2l0eShkYXRhLnJvdGF0aW9uLCB0aGlzLm1heFZlbG9jaXR5TGl0dGxlICogdGhpcy5ub3JtYWxpemVycy52ZWxvY2l0eSksCiAgICAgICAgICB4ID0gX3RoaXMkZ2V0VmVsb2NpdHkzLngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHkzLnk7CgogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldE1heFZlbG9jaXR5KHgsIHkpOwogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldEFjY2VsZXJhdGlvbihkYXRhLmFjY2VsZXJhdGlvbi54LCBkYXRhLmFjY2VsZXJhdGlvbi55KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3ZlTGl0dGxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlTGl0dGxlKCkge30KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVCdWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUJ1bGxldChkYXRhKSB7CiAgICAgIHZhciBidWxsZXQgPSB0aGlzLnBoeXNpY3MuYWRkLmltYWdlKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55LCAiYnVsbGV0Iik7CiAgICAgIGJ1bGxldC5yb3RhdGlvbiA9IGRhdGEucm90YXRpb247CgogICAgICB2YXIgX3RoaXMkZ2V0VmVsb2NpdHk0ID0gdGhpcy5nZXRWZWxvY2l0eShkYXRhLnJvdGF0aW9uLCB0aGlzLnNldHRpbmdzLmJ1bGxldFZlbG9jaXR5ICogdGhpcy5ub3JtYWxpemVycy5idWxsZXRWZWxvY2l0eSksCiAgICAgICAgICB4ID0gX3RoaXMkZ2V0VmVsb2NpdHk0LngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHk0Lnk7CgogICAgICBidWxsZXQuc2V0VmVsb2NpdHkoeCwgeSk7CiAgICAgIGJ1bGxldC5zaG90QnkgPSBkYXRhLmxvY2FsSWQ7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMtLTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG9vdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvb3QoKSB7CiAgICAgIGlmICh0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5hdmFpbGFibGVCdWxsZXRzID4gMCkgewogICAgICAgIHZhciBzaGlwID0gdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcDsKICAgICAgICB2YXIgYW5nbGUgPSBzaGlwLnJvdGF0aW9uOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgeDogc2hpcC54ICsgc2hpcC53aWR0aCAqIE1hdGguY29zKGFuZ2xlKSwKICAgICAgICAgICAgeTogc2hpcC55ICsgc2hpcC53aWR0aCAqIE1hdGguc2luKGFuZ2xlKQogICAgICAgICAgfSwKICAgICAgICAgIHJvdGF0aW9uOiBhbmdsZSwKICAgICAgICAgIGxvY2FsSWQ6IHRoaXMuY3VycmVudFBsYXllcgogICAgICAgIH07CiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIGRhdGEpOwogICAgICAgIHRoaXMuY3JlYXRlQnVsbGV0KGRhdGEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlU3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0YXRlKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc3RhdGUgPSBkYXRhLnN0YXRlOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uQ29sbGlzaW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbGxpc2lvbihzaGlwLCBidWxsZXQpIHsKICAgICAgYnVsbGV0LmRlc3Ryb3koKTsKICAgICAgc2hpcC5kZXN0cm95KCk7CiAgICAgIC8qdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCB7DQogICAgICAgICAgbG9jYWxJZDogc2hpcC5sb2NhbElkLA0KICAgICAgICAgIHN0YXRlOiAtLXRoaXMucGxheWVyc1tzaGlwLmxvY2FsSWRdLnN0YXRlDQogICAgICB9KSovCiAgICB9CiAgfSwgewogICAga2V5OiAicmVsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWxvYWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5hdmFpbGFibGVCdWxsZXRzID0gZGF0YS5hdmFpbGFibGVCdWxsZXRzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdhbWVTY2VuZTsKfShQaGFzZXIuU2NlbmUpOwoKZXhwb3J0IHsgR2FtZVNjZW5lIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["C:/Users/matte/Desktop/papero/cosmos.papero.me/src/phaser/GameScene.js"],"names":["Phaser","colors","gameDimensions","sceneKeys","websocketEvents","GameScene","socket","game","key","settings","currentPlayer","maxVelocityLittle","velocity","players","forEach","player","localId","availableBullets","normalizers","angularVelocity","Math","PI","reloadingVelocity","bulletVelocity","value","index","load","image","require","textures","addBase64","setupNewShips","on","MOVE_BIG","data","onBigMoved","MOVE_LITTLE","onLittleMoved","SHOOT","createBullet","CHANGE_STATE","updateState","RELOAD","reload","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","shoot","time","delta","isDown","moveBig","angle","mag","x","cos","y","sin","Object","keys","ship","physics","add","width","height","color","rotation","getVelocity","setVelocity","setCollideWorldBounds","console","log","setPosition","position","setRotation","emit","setMaxVelocity","setAcceleration","acceleration","bullet","shotBy","state","destroy","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\r\nimport {colors, gameDimensions, sceneKeys} from \"../constants/constants\";\r\nimport websocketEvents from \"../constants/websocketEvents\";\r\n\r\nexport default class GameScene extends Phaser.Scene {\r\n\r\n    constructor(socket, game) {\r\n        super({key: sceneKeys.game});\r\n\r\n        this.socket = socket;\r\n        this.settings = game.settings;\r\n        this.currentPlayer = game.currentPlayer;\r\n        this.maxVelocityLittle = game.settings.velocity+0.5;\r\n\r\n        this.players = {};\r\n        game.players.forEach(player => {\r\n            this.players[player.localId] = player;\r\n            this.players[player.localId].availableBullets = 3;\r\n        });\r\n\r\n        this.normalizers = {\r\n            velocity: 100,\r\n            angularVelocity: Math.PI/1200,\r\n            reloadingVelocity: 1/2000,\r\n            bulletVelocity: 200\r\n        }\r\n    }\r\n\r\n    preload(){\r\n\r\n        colors.forEach((value, index) => {\r\n            this.load.image(\"ship\"+index, require(\"@/assets/ships/ship\"+index+\".png\"));\r\n        });\r\n        this.textures.addBase64(\"bullet\", require(\"@/assets/bullet.png\"));\r\n\r\n    }\r\n\r\n    create(){\r\n        this.setupNewShips();\r\n\r\n        this.socket.on(websocketEvents.MOVE_BIG, data => this.onBigMoved(data));\r\n        this.socket.on(websocketEvents.MOVE_LITTLE, data => this.onLittleMoved(data));\r\n        this.socket.on(websocketEvents.SHOOT, data => this.createBullet(data));\r\n        this.socket.on(websocketEvents.CHANGE_STATE, data => this.updateState(data));\r\n        this.socket.on(websocketEvents.RELOAD, data => this.reload(data));\r\n\r\n        this.rotationKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\r\n        this.input.keyboard.on(\"keyup-ENTER\", this.shoot, this);\r\n\r\n    }\r\n\r\n    update(time, delta){\r\n        if(this.rotationKey.isDown) this.moveBig(delta);\r\n    }\r\n\r\n    getVelocity(angle, mag){\r\n        return {\r\n            x: Math.cos(angle)*mag,\r\n            y: Math.sin(angle)*mag\r\n        }\r\n    }\r\n\r\n    setupNewShips(){\r\n        Object.keys(this.players).forEach((key, index) => {\r\n            this.players[key].ship = this.physics.add.image(\r\n                (index<2 ? 0.05 : 0.95) * gameDimensions.width,\r\n                ( index%2 === 0 ? 0.05 : 0.95 ) * gameDimensions.height,\r\n                \"ship\"+this.players[key].color\r\n            );\r\n            this.players[key].ship.rotation = -Math.PI / 4  * ( index < 2 ? 1 : 3) * ( ( index % 2 ) * 2 - 1 );\r\n            this.players[key].ship.localId = key;\r\n            let {x, y} = this.getVelocity(this.players[key].ship.rotation, this.settings.velocity*this.normalizers.velocity);\r\n            this.players[key].ship.setVelocity(x, y);\r\n            this.players[key].ship.setCollideWorldBounds(true);\r\n        });\r\n        console.log(this.players);\r\n    }\r\n\r\n    onBigMoved(data){\r\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\r\n        this.players[data.localId].ship.setRotation(data.rotation);\r\n        let {x, y} = this.getVelocity(data.rotation, this.settings.velocity * this.normalizers.velocity);\r\n        this.players[data.localId].ship.setVelocity(x, y);\r\n    }\r\n\r\n    moveBig(delta){\r\n        this.players[this.currentPlayer].ship.rotation += delta * this.settings.angularVelocity * this.normalizers.angularVelocity;\r\n        let {x, y} = this.getVelocity(\r\n            this.players[this.currentPlayer].ship.rotation,\r\n            this.settings.velocity * this.normalizers.velocity\r\n        );\r\n        this.players[this.currentPlayer].ship.setVelocity(x, y);\r\n        this.socket.emit(websocketEvents.MOVE_BIG, {\r\n            localId: this.currentPlayer,\r\n            rotation: this.players[this.currentPlayer].ship.rotation,\r\n            position: {\r\n                x: this.players[this.currentPlayer].ship.x,\r\n                y: this.players[this.currentPlayer].ship.y\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    onLittleMoved(data){\r\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\r\n        this.players[data.localId].ship.setRotation(data.rotation);\r\n        let {x, y} = this.getVelocity(data.rotation, this.maxVelocityLittle*this.normalizers.velocity);\r\n        this.players[data.localId].ship.setMaxVelocity(x, y);\r\n        this.players[data.localId].ship.setAcceleration(data.acceleration.x, data.acceleration.y);\r\n    }\r\n\r\n    moveLittle(){\r\n\r\n    }\r\n\r\n\r\n    createBullet(data){\r\n        let bullet = this.physics.add.image(data.position.x, data.position.y, \"bullet\");\r\n        bullet.rotation = data.rotation;\r\n        let {x, y} = this.getVelocity(data.rotation, this.settings.bulletVelocity*this.normalizers.bulletVelocity);\r\n        bullet.setVelocity(x, y);\r\n        bullet.shotBy = data.localId;\r\n        this.players[data.localId].availableBullets--;\r\n    }\r\n\r\n    shoot(){\r\n        if(this.players[this.currentPlayer].availableBullets>0){\r\n            let ship = this.players[this.currentPlayer].ship;\r\n            let angle = ship.rotation;\r\n            let data = {\r\n                position: {\r\n                    x: ship.x + ship.width*Math.cos(angle),\r\n                    y: ship.y + ship.width*Math.sin(angle)\r\n                },\r\n                rotation: angle,\r\n                localId: this.currentPlayer\r\n            };\r\n            this.socket.emit(websocketEvents.SHOOT, data);\r\n            this.createBullet(data);\r\n        }\r\n    }\r\n\r\n\r\n    updateState(data){\r\n        this.players[data.localId].state = data.state;\r\n    }\r\n\r\n    onCollision(ship, bullet){\r\n        bullet.destroy();\r\n        ship.destroy();\r\n        /*this.socket.emit(websocketEvents.CHANGE_STATE, {\r\n            localId: ship.localId,\r\n            state: --this.players[ship.localId].state\r\n        })*/\r\n    }\r\n\r\n\r\n    reload(data){\r\n        this.players[data.localId].availableBullets = data.availableBullets;\r\n    }\r\n\r\n\r\n}"]}]}
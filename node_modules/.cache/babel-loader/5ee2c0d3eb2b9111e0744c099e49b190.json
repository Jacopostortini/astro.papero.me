{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js","mtime":1617095978549},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1616495189815},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1616495190967},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1616495189787},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1616495190059}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL21lZGlhL2phY29wby9Wb2x1bWVEYXRpL0RvY3VtZW50aS9wYXBlcm8udGsvY29zbW9zLnBhcGVyby5tZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSAicGhhc2VyIjsKaW1wb3J0IHdlYnNvY2tldEV2ZW50cyBmcm9tICIuLi9jb25zdGFudHMvd2Vic29ja2V0RXZlbnRzIjsKaW1wb3J0IHsgZ2FtZURpbWVuc2lvbnMsIGdldFZlbG9jaXR5LCBub3JtYWxpemVycywgc2NlbmVLZXlzIH0gZnJvbSAiLi4vY29uc3RhbnRzL2dhbWVTZXR0aW5ncyI7Cgp2YXIgR2FtZVNjZW5lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUGhhc2VyJFNjZW5lKSB7CiAgX2luaGVyaXRzKEdhbWVTY2VuZSwgX1BoYXNlciRTY2VuZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoR2FtZVNjZW5lKTsKCiAgZnVuY3Rpb24gR2FtZVNjZW5lKHNvY2tldCwgZ2FtZSkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHYW1lU2NlbmUpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgewogICAgICBrZXk6IHNjZW5lS2V5cy5nYW1lCiAgICB9KTsKICAgIF90aGlzLnNvY2tldCA9IHNvY2tldDsKICAgIF90aGlzLnNldHRpbmdzID0gZ2FtZS5zZXR0aW5nczsKICAgIF90aGlzLmN1cnJlbnRQbGF5ZXIgPSBnYW1lLmN1cnJlbnRQbGF5ZXI7CiAgICBfdGhpcy5zZXR0aW5ncy5tYXhWZWxvY2l0eUxpdHRsZSA9IGdhbWUuc2V0dGluZ3MudmVsb2NpdHkgKyAwLjU7CiAgICBfdGhpcy5zZXR0aW5ncy5hY2NlbGVyYXRpb25MaXR0bGUgPSAwLjU7CiAgICBfdGhpcy5zZXR0aW5ncy5yZXNwYXduVGltZSA9IDUwMDA7CiAgICBfdGhpcy5zZXR0aW5ncy5mcmljdGlvbkFpciA9IDAuMTsKICAgIF90aGlzLnBsYXllcnMgPSB7fTsKICAgIGdhbWUucGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwbGF5ZXIpIHsKICAgICAgX3RoaXMucGxheWVyc1twbGF5ZXIubG9jYWxJZF0gPSBwbGF5ZXI7CiAgICAgIF90aGlzLnBsYXllcnNbcGxheWVyLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMgPSAzOwogICAgICBfdGhpcy5wbGF5ZXJzW3BsYXllci5sb2NhbElkXS5zdGF0ZSA9IDI7CiAgICB9KTsKICAgIC8qICAgICAgICB0aGlzLnNldHRpbmdzID0gZGVmYXVsdFNldHRpbmdzOwogICAgICAgICAgICB0aGlzLnNldHRpbmdzLm1heFZlbG9jaXR5TGl0dGxlID0gMi41OwogICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFjY2VsZXJhdGlvbkxpdHRsZSA9IDAuNTsKICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5mcmljdGlvbkFpciA9IDAuMTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGxheWVyID0gMDsKICAgICAgICAgICAgdGhpcy5wbGF5ZXJzID0geyAvL1NUQVRFOiAwPWRlYWQgMT1saXR0bGUgMj1zaGlwIDM9c2hpZWxkKD8pCiAgICAgICAgICAgICAgICAnMCc6IHsKICAgICAgICAgICAgICAgICAgICBsb2NhbElkOiAwLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAwLAogICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZUJ1bGxldHM6IDMsCiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IDIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnMSc6IHsKICAgICAgICAgICAgICAgICAgICBsb2NhbElkOiAxLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAxLAogICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZUJ1bGxldHM6IDMsCiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IDIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAnMic6IHsKICAgICAgICAgICAgICAgICAgICBsb2NhbElkOiAyLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAyLAogICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZUJ1bGxldHM6IDMsCiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IDIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsqLwoKICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGF2YWlsYWJsZUJ1bGxldHMgPSBNYXRoLm1pbigzLCBfdGhpcy5wbGF5ZXJzW190aGlzLmN1cnJlbnRQbGF5ZXJdLmF2YWlsYWJsZUJ1bGxldHMgKyAxKTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgbG9jYWxJZDogX3RoaXMuY3VycmVudFBsYXllciwKICAgICAgICBhdmFpbGFibGVCdWxsZXRzOiBhdmFpbGFibGVCdWxsZXRzCiAgICAgIH07CgogICAgICBfdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuUkVMT0FELCBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShkYXRhKSkpOwoKICAgICAgX3RoaXMucmVsb2FkKGRhdGEpOwogICAgfSwgMSAvIChfdGhpcy5zZXR0aW5ncy5yZWxvYWRpbmdWZWxvY2l0eSAqIG5vcm1hbGl6ZXJzLnJlbG9hZGluZ1ZlbG9jaXR5KSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoR2FtZVNjZW5lLCBbewogICAga2V5OiAicHJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHsKICAgICAgdGhpcy5sb2FkLmltYWdlKCJzaGlwMCIsICIuL3NoaXBzL3NoaXAwLnBuZyIpOwogICAgICB0aGlzLmxvYWQuaW1hZ2UoInNoaXAxIiwgIi4vc2hpcHMvc2hpcDEucG5nIik7CiAgICAgIHRoaXMubG9hZC5pbWFnZSgic2hpcDIiLCAiLi9zaGlwcy9zaGlwMi5wbmciKTsKICAgICAgdGhpcy5sb2FkLmltYWdlKCJzaGlwMyIsICIuL3NoaXBzL3NoaXAzLnBuZyIpOwogICAgICB0aGlzLmxvYWQuaW1hZ2UoImxpdHRsZTAiLCAiLi9saXR0bGUucG5nIik7CiAgICAgIHRoaXMubG9hZC5pbWFnZSgibGl0dGxlMSIsICIuL2xpdHRsZS5wbmciKTsKICAgICAgdGhpcy5sb2FkLmltYWdlKCJsaXR0bGUyIiwgIi4vbGl0dGxlLnBuZyIpOwogICAgICB0aGlzLmxvYWQuaW1hZ2UoImxpdHRsZTMiLCAiLi9saXR0bGUucG5nIik7CiAgICAgIHRoaXMubG9hZC5pbWFnZSgiYnVsbGV0IiwgIi4vYnVsbGV0LnBuZyIpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuY3JlYXRlR3JvdXBzKCk7CiAgICAgIHRoaXMuY3JlYXRlU2hpcHMoKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLlJPVEFURV9TSElQLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIub25TaGlwUm90YXRlZChKU09OLnBhcnNlKGRhdGEudG9TdHJpbmcoKSkpOwogICAgICB9KTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLk1PVkVfTElUVExFLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIub25MaXR0bGVNb3ZlZChKU09OLnBhcnNlKGRhdGEudG9TdHJpbmcoKSkpOwogICAgICB9KTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLlNIT09ULCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIuY3JlYXRlQnVsbGV0KEpTT04ucGFyc2UoZGF0YS50b1N0cmluZygpKSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczIudXBkYXRlU3RhdGUoSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkpKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5SRUxPQUQsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5yZWxvYWQoSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkpKTsKICAgICAgfSk7CiAgICAgIHRoaXMucm90YXRpb25LZXkgPSB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuU1BBQ0UpOwogICAgICB0aGlzLmFjY2VsZXJhdGVMaXR0bGVLZXkgPSB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuRU5URVIpOwogICAgICB0aGlzLmlucHV0LmtleWJvYXJkLm9uKCJrZXl1cC1FTlRFUiIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoX3RoaXMyLnBsYXllcnNbX3RoaXMyLmN1cnJlbnRQbGF5ZXJdLnN0YXRlID49IDIpIF90aGlzMi5zaG9vdCgpOwogICAgICB9KTsKICAgICAgdGhpcy5waHlzaWNzLndvcmxkLm9uKCJ3b3JsZGJvdW5kcyIsIGZ1bmN0aW9uIChidWxsZXQpIHsKICAgICAgICBidWxsZXQuZ2FtZU9iamVjdC5kZXN0cm95KCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKHRpbWUsIGRlbHRhKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMucm90YXRpb25LZXkuaXNEb3duKSB0aGlzLnJvdGF0ZShkZWx0YSk7CiAgICAgIGlmICh0aGlzLmFjY2VsZXJhdGVMaXR0bGVLZXkuaXNEb3duKSB0aGlzLm1vdmVMaXR0bGUoZGVsdGEpOwogICAgICBPYmplY3QudmFsdWVzKHRoaXMucGxheWVycykuZm9yRWFjaChmdW5jdGlvbiAocGxheWVyKSB7CiAgICAgICAgdmFyIF9nZXRWZWxvY2l0eSA9IGdldFZlbG9jaXR5KHBsYXllci5zaGlwLnJvdGF0aW9uLCBwbGF5ZXIuc2hpcC52ZWxvY2l0eU1hZ25pdHVkZSksCiAgICAgICAgICAgIHggPSBfZ2V0VmVsb2NpdHkueCwKICAgICAgICAgICAgeSA9IF9nZXRWZWxvY2l0eS55OwoKICAgICAgICBwbGF5ZXIuc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKCiAgICAgICAgaWYgKHBsYXllci5zdGF0ZSA9PT0gMSkgewogICAgICAgICAgcGxheWVyLnNoaXAudmVsb2NpdHlNYWduaXR1ZGUgPSBNYXRoLm1heCgwLCBwbGF5ZXIuc2hpcC52ZWxvY2l0eU1hZ25pdHVkZSAtIF90aGlzMy5zZXR0aW5ncy5mcmljdGlvbkFpciAqIGRlbHRhKTsKICAgICAgICB9CiAgICAgIH0pOyAvL2lmKHRoaXMuc2hpcHMuY291bnRBY3RpdmUoKSA8PSAxKSBjb25zb2xlLmxvZygiZ2FtZSBvdmVyIikgLy9UT0RPOiBTRVRVUCBFTkQgT0YgVEhFIFRVUk4KICAgIH0gLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy9DcmVhdGluZyB0aGluZ3MKCiAgfSwgewogICAga2V5OiAiY3JlYXRlR3JvdXBzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVHcm91cHMoKSB7CiAgICAgIHRoaXMuc2hpcHMgPSB0aGlzLnBoeXNpY3MuYWRkLmdyb3VwKCk7CiAgICAgIHRoaXMuYnVsbGV0cyA9IHRoaXMucGh5c2ljcy5hZGQuZ3JvdXAoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVTaGlwcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlU2hpcHMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLnBsYXllcnMpLmZvckVhY2goZnVuY3Rpb24gKHBsYXllcikgewogICAgICAgIHBsYXllci5zaGlwID0gX3RoaXM0LnNoaXBzLmNyZWF0ZSgoaW5kZXggPCAyID8gMC4wNSA6IDAuOTUpICogZ2FtZURpbWVuc2lvbnMud2lkdGgsIChpbmRleCAlIDIgPT09IDAgPyAwLjA1IDogMC45NSkgKiBnYW1lRGltZW5zaW9ucy5oZWlnaHQsICJzaGlwIiArIHBsYXllci5jb2xvcik7CiAgICAgICAgcGxheWVyLnNoaXAubG9jYWxJZCA9IHBsYXllci5sb2NhbElkOwogICAgICAgIHBsYXllci5zaGlwLnNldFJvdGF0aW9uKC1NYXRoLlBJIC8gNCAqIChpbmRleCA8IDIgPyAxIDogMykgKiAoaW5kZXggJSAyICogMiAtIDEpKTsKICAgICAgICBwbGF5ZXIuc2hpcC5zZXRDb2xsaWRlV29ybGRCb3VuZHModHJ1ZSk7CiAgICAgICAgcGxheWVyLnNoaXAudmVsb2NpdHlNYWduaXR1ZGUgPSBfdGhpczQuc2V0dGluZ3MudmVsb2NpdHkgKiBub3JtYWxpemVycy52ZWxvY2l0eTsKCiAgICAgICAgaWYgKHBsYXllci5sb2NhbElkID09PSBfdGhpczQuY3VycmVudFBsYXllcikgewogICAgICAgICAgX3RoaXM0LnBoeXNpY3MuYWRkLm92ZXJsYXAocGxheWVyLnNoaXAsIF90aGlzNC5idWxsZXRzLCBmdW5jdGlvbiAoc2hpcCwgYnVsbGV0KSB7CiAgICAgICAgICAgIF90aGlzNC5vbkJ1bGxldENvbGxpc2lvbihzaGlwLCBidWxsZXQpOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpbmRleCsrOwogICAgICB9KTsKICAgICAgdGhpcy5waHlzaWNzLmFkZC5jb2xsaWRlcih0aGlzLnNoaXBzLCB0aGlzLnNoaXBzKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVCdWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUJ1bGxldChkYXRhKSB7CiAgICAgIHZhciBidWxsZXQgPSB0aGlzLmJ1bGxldHMuY3JlYXRlKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55LCAiYnVsbGV0Iik7CiAgICAgIGJ1bGxldC5yb3RhdGlvbiA9IGRhdGEucm90YXRpb247CgogICAgICB2YXIgX2dldFZlbG9jaXR5MiA9IGdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMuc2V0dGluZ3MuYnVsbGV0VmVsb2NpdHkgKiBub3JtYWxpemVycy5idWxsZXRWZWxvY2l0eSksCiAgICAgICAgICB4ID0gX2dldFZlbG9jaXR5Mi54LAogICAgICAgICAgeSA9IF9nZXRWZWxvY2l0eTIueTsKCiAgICAgIGJ1bGxldC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgICAgYnVsbGV0LnNob3RCeSA9IGRhdGEubG9jYWxJZDsKICAgICAgYnVsbGV0LnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTsKICAgICAgYnVsbGV0LmJvZHkub25Xb3JsZEJvdW5kcyA9IHRydWU7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMtLTsKICAgIH0gLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy9PdGhlcnMgZG8gdGhpbmdzIHZpYSB0aGUgd2Vic29ja2V0CgogIH0sIHsKICAgIGtleTogIm9uU2hpcFJvdGF0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU2hpcFJvdGF0ZWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFBvc2l0aW9uKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRSb3RhdGlvbihkYXRhLnJvdGF0aW9uKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkxpdHRsZU1vdmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkxpdHRsZU1vdmVkKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRQb3NpdGlvbihkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAudmVsb2NpdHlNYWduaXR1ZGUgPSBkYXRhLnZlbG9jaXR5TWFnbml0dWRlOwogICAgfSAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvL0N1cnJlbnQgcGxheWVycyBkb2VzIHRoaW5ncwoKICB9LCB7CiAgICBrZXk6ICJyb3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJvdGF0ZShkZWx0YSkgewogICAgICB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uICs9IGRlbHRhICogdGhpcy5zZXR0aW5ncy5hbmd1bGFyVmVsb2NpdHkgKiBub3JtYWxpemVycy5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGxvY2FsSWQ6IHRoaXMuY3VycmVudFBsYXllciwKICAgICAgICByb3RhdGlvbjogdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5yb3RhdGlvbi50b0ZpeGVkKDQpLAogICAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgICB4OiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLngudG9GaXhlZCgyKSwKICAgICAgICAgIHk6IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAueS50b0ZpeGVkKDIpCiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLnNvY2tldC5lbWl0KHdlYnNvY2tldEV2ZW50cy5ST1RBVEVfU0hJUCwgQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkoZGF0YSkpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3ZlTGl0dGxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlTGl0dGxlKGRlbHRhKSB7CiAgICAgIGlmICh0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zdGF0ZSA9PT0gMSkgewogICAgICAgIHZhciBzaGlwID0gdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcDsKICAgICAgICB2YXIgcHJldmlvdXNNYWcgPSBzaGlwLnZlbG9jaXR5TWFnbml0dWRlOwoKICAgICAgICBpZiAocHJldmlvdXNNYWcgPCB0aGlzLnNldHRpbmdzLm1heFZlbG9jaXR5TGl0dGxlICogbm9ybWFsaXplcnMudmVsb2NpdHkpIHsKICAgICAgICAgIHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAudmVsb2NpdHlNYWduaXR1ZGUgKz0gZGVsdGEgKiB0aGlzLnNldHRpbmdzLmFjY2VsZXJhdGlvbkxpdHRsZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC52ZWxvY2l0eU1hZ25pdHVkZSA9IHRoaXMuc2V0dGluZ3MubWF4VmVsb2NpdHlMaXR0bGUgKiBub3JtYWxpemVycy52ZWxvY2l0eTsKICAgICAgICB9CgogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgbG9jYWxJZDogdGhpcy5jdXJyZW50UGxheWVyLAogICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgeDogc2hpcC54LnRvRml4ZWQoMiksCiAgICAgICAgICAgIHk6IHNoaXAueS50b0ZpeGVkKDIpCiAgICAgICAgICB9LAogICAgICAgICAgdmVsb2NpdHlNYWduaXR1ZGU6IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAudmVsb2NpdHlNYWduaXR1ZGUudG9GaXhlZCgyKQogICAgICAgIH07CiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuTU9WRV9MSVRUTEUsIEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KGRhdGEpKSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG9vdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvb3QoKSB7CiAgICAgIGlmICh0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5hdmFpbGFibGVCdWxsZXRzID4gMCkgewogICAgICAgIHZhciBzaGlwID0gdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcDsKICAgICAgICB2YXIgYW5nbGUgPSBzaGlwLnJvdGF0aW9uOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgeDogc2hpcC54ICsgc2hpcC53aWR0aCAqIE1hdGguY29zKGFuZ2xlKSwKICAgICAgICAgICAgeTogc2hpcC55ICsgc2hpcC53aWR0aCAqIE1hdGguc2luKGFuZ2xlKQogICAgICAgICAgfSwKICAgICAgICAgIHJvdGF0aW9uOiBhbmdsZSwKICAgICAgICAgIGxvY2FsSWQ6IHRoaXMuY3VycmVudFBsYXllcgogICAgICAgIH07CiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIEJ1ZmZlci5mcm9tKEpTT04uc3RyaW5naWZ5KGRhdGEpKSk7CiAgICAgICAgdGhpcy5jcmVhdGVCdWxsZXQoZGF0YSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU3RhdGUoZGF0YSkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnN0YXRlID0gZGF0YS5zdGF0ZTsKICAgICAgdmFyIHNoaXAgPSB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwOwoKICAgICAgc3dpdGNoIChkYXRhLnN0YXRlKSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgdGhpcy5zaGlwcy5raWxsQW5kSGlkZShzaGlwKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBzaGlwLnNldFRleHR1cmUoImxpdHRsZSIgKyB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5jb2xvcik7CgogICAgICAgICAgaWYgKGRhdGEubG9jYWxJZCA9PT0gdGhpcy5jdXJyZW50UGxheWVyKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChfdGhpczUucGxheWVyc1tkYXRhLmxvY2FsSWRdLnN0YXRlID09PSAxKSB7CiAgICAgICAgICAgICAgICBfdGhpczUudXBkYXRlU3RhdGUoewogICAgICAgICAgICAgICAgICBsb2NhbElkOiBfdGhpczUuY3VycmVudFBsYXllciwKICAgICAgICAgICAgICAgICAgc3RhdGU6IDIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHZhciBfZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgbG9jYWxJZDogX3RoaXM1LmN1cnJlbnRQbGF5ZXIsCiAgICAgICAgICAgICAgICAgIHN0YXRlOiAyCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF90aGlzNS5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShfZGF0YSkpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHRoaXMuc2V0dGluZ3MucmVzcGF3blRpbWUpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBzaGlwLnZlbG9jaXR5TWFnbml0dWRlID0gdGhpcy5zZXR0aW5ncy52ZWxvY2l0eSAqIG5vcm1hbGl6ZXJzLnZlbG9jaXR5OwogICAgICAgICAgc2hpcC5zZXRUZXh0dXJlKCJzaGlwIiArIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLmNvbG9yKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib25CdWxsZXRDb2xsaXNpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQnVsbGV0Q29sbGlzaW9uKHNoaXAsIGJ1bGxldCkgewogICAgICBidWxsZXQuZGVzdHJveSgpOwogICAgICB2YXIgc3RhdGUgPSB0aGlzLnBsYXllcnNbc2hpcC5sb2NhbElkXS5zdGF0ZSAtIDE7CiAgICAgIGlmIChzdGF0ZSA9PT0gMCkgdGhpcy5raWxsZWRCeSA9IGJ1bGxldC5zaG90Qnk7CiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGxvY2FsSWQ6IHNoaXAubG9jYWxJZCwKICAgICAgICBzdGF0ZTogc3RhdGUKICAgICAgfTsKICAgICAgdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeShkYXRhKSkpOwogICAgICB0aGlzLnVwZGF0ZVN0YXRlKGRhdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVsb2FkKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uYXZhaWxhYmxlQnVsbGV0cyA9IGRhdGEuYXZhaWxhYmxlQnVsbGV0czsKICAgIH0KICB9XSk7CgogIHJldHVybiBHYW1lU2NlbmU7Cn0oUGhhc2VyLlNjZW5lKTsKCmV4cG9ydCB7IEdhbWVTY2VuZSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js"],"names":["Phaser","websocketEvents","gameDimensions","getVelocity","normalizers","sceneKeys","GameScene","socket","game","key","settings","currentPlayer","maxVelocityLittle","velocity","accelerationLittle","respawnTime","frictionAir","players","forEach","player","localId","availableBullets","state","setInterval","Math","min","data","emit","RELOAD","Buffer","from","JSON","stringify","reload","reloadingVelocity","load","image","createGroups","createShips","on","ROTATE_SHIP","onShipRotated","parse","toString","MOVE_LITTLE","onLittleMoved","SHOOT","createBullet","CHANGE_STATE","updateState","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","accelerateLittleKey","ENTER","shoot","physics","world","bullet","gameObject","destroy","time","delta","isDown","rotate","moveLittle","Object","values","ship","rotation","velocityMagnitude","x","y","setVelocity","max","ships","add","group","bullets","index","create","width","height","color","setRotation","PI","setCollideWorldBounds","overlap","onBulletCollision","collider","position","bulletVelocity","shotBy","body","onWorldBounds","setPosition","angularVelocity","toFixed","previousMag","angle","cos","sin","killAndHide","setTexture","setTimeout","killedBy","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport websocketEvents from \"../constants/websocketEvents\";\nimport {gameDimensions, getVelocity, normalizers, sceneKeys} from \"../constants/gameSettings\";\n\n\nexport default class GameScene extends Phaser.Scene {\n\n    constructor(socket, game) {\n        super({key: sceneKeys.game});\n\n        this.socket = socket;\n        this.settings = game.settings;\n        this.currentPlayer = game.currentPlayer;\n        this.settings.maxVelocityLittle = game.settings.velocity+0.5;\n        this.settings.accelerationLittle = 0.5;\n        this.settings.respawnTime = 5000;\n        this.settings.frictionAir = 0.1;\n        this.players = {};\n        game.players.forEach(player => {\n            this.players[player.localId] = player;\n            this.players[player.localId].availableBullets = 3;\n            this.players[player.localId].state = 2;\n        });\n\n/*        this.settings = defaultSettings;\n        this.settings.maxVelocityLittle = 2.5;\n        this.settings.accelerationLittle = 0.5;\n        this.settings.frictionAir = 0.1;\n        this.currentPlayer = 0;\n        this.players = { //STATE: 0=dead 1=little 2=ship 3=shield(?)\n            '0': {\n                localId: 0,\n                color: 0,\n                availableBullets: 3,\n                state: 2\n            },\n            '1': {\n                localId: 1,\n                color: 1,\n                availableBullets: 3,\n                state: 2\n            },\n            '2': {\n                localId: 2,\n                color: 2,\n                availableBullets: 3,\n                state: 2\n            }\n        };*/\n\n        setInterval(() => {\n            const availableBullets = Math.min(3, this.players[this.currentPlayer].availableBullets + 1);\n            const data = {\n                localId: this.currentPlayer,\n                availableBullets\n            };\n            this.socket.emit(websocketEvents.RELOAD, Buffer.from(JSON.stringify(data)));\n            this.reload(data);\n        }, 1/(this.settings.reloadingVelocity * normalizers.reloadingVelocity));\n    }\n\n    preload(){\n\n        this.load.image(\"ship0\", \"./ships/ship0.png\");\n        this.load.image(\"ship1\", \"./ships/ship1.png\");\n        this.load.image(\"ship2\", \"./ships/ship2.png\");\n        this.load.image(\"ship3\", \"./ships/ship3.png\");\n        this.load.image(\"little0\", \"./little.png\");\n        this.load.image(\"little1\", \"./little.png\");\n        this.load.image(\"little2\", \"./little.png\");\n        this.load.image(\"little3\", \"./little.png\");\n        this.load.image(\"bullet\", \"./bullet.png\");\n\n    }\n\n    create(){\n        this.createGroups();\n        this.createShips();\n\n        this.socket.on(websocketEvents.ROTATE_SHIP, data => this.onShipRotated(JSON.parse(data.toString())));\n        this.socket.on(websocketEvents.MOVE_LITTLE, data => this.onLittleMoved(JSON.parse(data.toString())));\n        this.socket.on(websocketEvents.SHOOT, data => this.createBullet(JSON.parse(data.toString())));\n        this.socket.on(websocketEvents.CHANGE_STATE, data => this.updateState(JSON.parse(data.toString())));\n        this.socket.on(websocketEvents.RELOAD, data => this.reload(JSON.parse(data.toString())));\n\n        this.rotationKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n        this.accelerateLittleKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER);\n        this.input.keyboard.on(\"keyup-ENTER\", ()=>{\n            if(this.players[this.currentPlayer].state>=2) this.shoot();\n        });\n        this.physics.world.on(\"worldbounds\", (bullet)=>{bullet.gameObject.destroy()});\n    }\n\n    update(time, delta){\n        if(this.rotationKey.isDown) this.rotate(delta);\n        if(this.accelerateLittleKey.isDown) this.moveLittle(delta);\n        Object.values(this.players).forEach(player => {\n            const {x, y} = getVelocity(player.ship.rotation, player.ship.velocityMagnitude);\n            player.ship.setVelocity(x, y);\n            if(player.state === 1){\n                player.ship.velocityMagnitude = Math.max(\n                    0, player.ship.velocityMagnitude-this.settings.frictionAir*delta\n                );\n            }\n        });\n        //if(this.ships.countActive() <= 1) console.log(\"game over\") //TODO: SETUP END OF THE TURN\n    }\n\n\n\n\n    //=============================================================================\n    //Creating things\n    createGroups(){\n        this.ships = this.physics.add.group();\n        this.bullets = this.physics.add.group();\n    }\n\n    createShips(){\n        let index = 0;\n        Object.values(this.players).forEach(player => {\n            player.ship = this.ships.create(\n                (index<2 ? 0.05 : 0.95) * gameDimensions.width,\n                ( index%2 === 0 ? 0.05 : 0.95 ) * gameDimensions.height,\n                \"ship\"+player.color\n            )\n\n            player.ship.localId = player.localId;\n            player.ship.setRotation(-Math.PI / 4  * ( index < 2 ? 1 : 3) * ( ( index % 2 ) * 2 - 1 ));\n            player.ship.setCollideWorldBounds(true);\n            player.ship.velocityMagnitude = this.settings.velocity*normalizers.velocity;\n\n            if(player.localId===this.currentPlayer){\n                this.physics.add.overlap(player.ship, this.bullets, (ship, bullet) => {\n                    this.onBulletCollision(ship, bullet);\n                });\n            }\n\n            index++;\n        });\n\n        this.physics.add.collider(this.ships, this.ships);\n    }\n\n    createBullet(data){\n        const bullet = this.bullets.create(data.position.x, data.position.y, \"bullet\");\n        bullet.rotation = data.rotation;\n        const {x, y} = getVelocity(data.rotation, this.settings.bulletVelocity*normalizers.bulletVelocity);\n        bullet.setVelocity(x, y);\n        bullet.shotBy = data.localId;\n        bullet.setCollideWorldBounds(true);\n        bullet.body.onWorldBounds = true;\n        this.players[data.localId].availableBullets--;\n    }\n\n\n\n\n\n\n    //=============================================================================\n    //Others do things via the websocket\n    onShipRotated(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n    }\n\n    onLittleMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.velocityMagnitude = data.velocityMagnitude;\n    }\n\n\n\n    //=============================================================================\n    //Current players does things\n    rotate(delta){\n        this.players[this.currentPlayer].ship.rotation += delta * this.settings.angularVelocity * normalizers.angularVelocity;\n        const data = {\n            localId: this.currentPlayer,\n            rotation: this.players[this.currentPlayer].ship.rotation.toFixed(4),\n            position: {\n                x: this.players[this.currentPlayer].ship.x.toFixed(2),\n                y: this.players[this.currentPlayer].ship.y.toFixed(2)\n            }\n        }\n        this.socket.emit(websocketEvents.ROTATE_SHIP, Buffer.from(JSON.stringify(data)));\n    }\n\n    moveLittle(delta){\n        if(this.players[this.currentPlayer].state === 1){\n            const ship = this.players[this.currentPlayer].ship;\n            const previousMag = ship.velocityMagnitude;\n            if(previousMag < this.settings.maxVelocityLittle * normalizers.velocity){\n                this.players[this.currentPlayer].ship.velocityMagnitude += delta*this.settings.accelerationLittle;\n            } else {\n                this.players[this.currentPlayer].ship.velocityMagnitude = this.settings.maxVelocityLittle * normalizers.velocity;\n            }\n\n            const data = {\n                localId: this.currentPlayer,\n                position: {\n                    x: ship.x.toFixed(2),\n                    y: ship.y.toFixed(2)\n                },\n                velocityMagnitude: this.players[this.currentPlayer].ship.velocityMagnitude.toFixed(2)\n            }\n            this.socket.emit(websocketEvents.MOVE_LITTLE, Buffer.from(JSON.stringify(data)));\n        }\n    }\n\n    shoot(){\n        if(this.players[this.currentPlayer].availableBullets>0){\n            const ship = this.players[this.currentPlayer].ship;\n            const angle = ship.rotation;\n            const data = {\n                position: {\n                    x: ship.x + ship.width*Math.cos(angle),\n                    y: ship.y + ship.width*Math.sin(angle)\n                },\n                rotation: angle,\n                localId: this.currentPlayer\n            };\n            this.socket.emit(websocketEvents.SHOOT, Buffer.from(JSON.stringify(data)));\n            this.createBullet(data);\n        }\n    }\n\n\n    updateState(data){\n        this.players[data.localId].state = data.state;\n        const ship = this.players[data.localId].ship;\n        switch (data.state) {\n            case 0:\n                this.ships.killAndHide(ship);\n                break;\n            case 1:\n                ship.setTexture(\"little\" + this.players[data.localId].color);\n                if(data.localId === this.currentPlayer) {\n                    setTimeout(() => {\n                        if (this.players[data.localId].state === 1) {\n                            this.updateState({\n                                localId: this.currentPlayer,\n                                state: 2\n                            });\n                            const data = {\n                                localId: this.currentPlayer,\n                                state: 2\n                            };\n                            this.socket.emit(websocketEvents.CHANGE_STATE, Buffer.from(JSON.stringify(data)));\n                        }\n                    }, this.settings.respawnTime);\n                }\n                break;\n            case 2:\n                ship.velocityMagnitude = this.settings.velocity * normalizers.velocity;\n                ship.setTexture(\"ship\" + this.players[data.localId].color);\n                break;\n        }\n    }\n\n    onBulletCollision(ship, bullet){\n        bullet.destroy();\n        const state = this.players[ship.localId].state-1;\n        if(state === 0) this.killedBy = bullet.shotBy;\n        const data = {\n            localId: ship.localId,\n            state\n        }\n        this.socket.emit(websocketEvents.CHANGE_STATE, Buffer.from(JSON.stringify(data)));\n        this.updateState(data);\n    }\n\n\n    reload(data){\n        this.players[data.localId].availableBullets = data.availableBullets;\n    }\n\n\n}"]}]}
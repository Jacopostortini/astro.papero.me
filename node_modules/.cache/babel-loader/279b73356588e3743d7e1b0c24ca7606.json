{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js","mtime":1618302829849},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1618298483685},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1618298485037},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1618298483657},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1618298483941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2FtZURpbWVuc2lvbnMsIHBvd2VyVXBzLCBzY2VuZUtleXMgfSBmcm9tICIuLi9jb25zdGFudHMvZ2FtZVNldHRpbmdzIjsKaW1wb3J0IFBoYXNlciBmcm9tICJwaGFzZXIiOwoKdmFyIGxvYWRJbWFnZXMgPSBmdW5jdGlvbiBsb2FkSW1hZ2VzKGN0eCwga2V5KSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHsKICAgIGN0eC5sb2FkLmltYWdlKCJzaGlwIiArIGksICIuL3NoaXBzL3NoaXAiICsgaSArICIucG5nIik7CgogICAgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmdhbWUpIHsKICAgICAgY3R4LmxvYWQuaW1hZ2UoImxpdHRsZSIgKyBpLCAiLi9saXR0bGVzL2xpdHRsZSIgKyBpICsgIi5wbmciKTsKICAgICAgY3R4LmxvYWQuaW1hZ2UoInNoaWVsZGVkIiArIGksICIuL3NoaWVsZGVkL3NoaWVsZGVkIiArIGkgKyAiLnBuZyIpOwogICAgfQogIH0KCiAgaWYgKGtleSAhPT0gc2NlbmVLZXlzLnJhbmtpbmcpIHsKICAgIGN0eC5sb2FkLmltYWdlKCJidWxsZXQiLCAiLi9idWxsZXQucG5nIik7CiAgICBjdHgubG9hZC5pbWFnZSgiYnVsbGV0LWxvYWRlZCIsICIuL2J1bGxldC1sb2FkZWQucG5nIik7CiAgfQoKICBpZiAoa2V5ID09PSBzY2VuZUtleXMubG9iYnkgJiYgY3R4LnRvdWNoU2NyZWVuKSB7CiAgICBjdHgubG9hZC5pbWFnZSgicm90YXRlLWJ1dHRvbiIsICIuL3JvdGF0ZS1idXR0b24ucG5nIik7CiAgICBjdHgubG9hZC5pbWFnZSgic2hvb3QtYnV0dG9uIiwgIi4vc2hvb3QtYnV0dG9uLnBuZyIpOwogIH0KCiAgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmdhbWUpIHsKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBwb3dlclVwcy5sZW5ndGg7IF9pKyspIHsKICAgICAgY3R4LmxvYWQuaW1hZ2UocG93ZXJVcHNbX2ldLCAiLi9wb3dlclVwcy8iICsgcG93ZXJVcHNbX2ldICsgIi5wbmciKTsKICAgIH0KCiAgICBmb3IgKHZhciBfaTIgPSAxOyBfaTIgPD0gMzsgX2kyKyspIHsKICAgICAgY3R4LmxvYWQuaW1hZ2UoImJsb2NrIiArIF9pMiwgIi4vYmxvY2tzL2Jsb2NrIiArIF9pMiArICIucG5nIik7CiAgICB9CiAgfQp9OwoKdmFyIHZlbG9jaXR5RnJvbUFuZ2xlID0gZnVuY3Rpb24gdmVsb2NpdHlGcm9tQW5nbGUoYW5nbGUsIHZlbG9jaXR5KSB7CiAgcmV0dXJuIHsKICAgIHg6IHZlbG9jaXR5ICogTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKSwKICAgIHk6IHZlbG9jaXR5ICogTWF0aC5zaW4oYW5nbGUgKiBNYXRoLlBJIC8gMTgwKQogIH07Cn07Cgp2YXIgc2V0SW5wdXRIYW5kbGVycyA9IGZ1bmN0aW9uIHNldElucHV0SGFuZGxlcnMoY3R4LCBrZXkpIHsKICB2YXIgX3JlZiA9IGtleSA9PT0gc2NlbmVLZXlzLmdhbWUgPyBnYW1lRGltZW5zaW9ucyA6IGN0eCwKICAgICAgd2lkdGggPSBfcmVmLndpZHRoOwoKICBpZiAoY3R4LmN1cnJlbnRQbGF5ZXIgPT09IG51bGwgJiYga2V5ID09PSBzY2VuZUtleXMuZ2FtZSkgcmV0dXJuOwogIGN0eC5yb3RhdGlvbktleSA9IGN0eC5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlNQQUNFKTsKICBjdHguYWNjZWxlcmF0ZUxpdHRsZUtleSA9IGN0eC5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLkVOVEVSKTsKICBjdHguaW5wdXQua2V5Ym9hcmQub24oImtleXVwLUVOVEVSIiwgZnVuY3Rpb24gKCkgewogICAgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmdhbWUpIHsKICAgICAgaWYgKGN0eC5wbGF5ZXJzW2N0eC5jdXJyZW50UGxheWVyXS5zdGF0ZSA+PSAyKSBjdHguc2hvb3QoKTsKICAgIH0gZWxzZSBpZiAoa2V5ID09PSBzY2VuZUtleXMubG9iYnkpIGN0eC5zaG9vdCgpOwogIH0pOwoKICBpZiAoY3R4LnRvdWNoU2NyZWVuKSB7CiAgICBjdHguaW5wdXQuYWRkUG9pbnRlcigxKTsKICAgIGN0eC5pbnB1dC5vbigicG9pbnRlcmRvd24iLCBmdW5jdGlvbiAocG9pbnRlcikgewogICAgICBpZiAocG9pbnRlci54IDwgd2lkdGggLyAyKSB7CiAgICAgICAgY3R4LnJvdGF0aW5nID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoa2V5ID09PSBzY2VuZUtleXMuZ2FtZSkgewogICAgICAgICAgaWYgKGN0eC5wbGF5ZXJzW2N0eC5jdXJyZW50UGxheWVyXS5zdGF0ZSA+PSAyKSBjdHguc2hvb3QoKTtlbHNlIGN0eC5hY2NlbGVyYXRpbmcgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBzY2VuZUtleXMubG9iYnkpIGN0eC5zaG9vdCgpOwogICAgICB9CiAgICB9KTsKICAgIGN0eC5pbnB1dC5vbigicG9pbnRlcnVwIiwgZnVuY3Rpb24gKHBvaW50ZXIpIHsKICAgICAgaWYgKHBvaW50ZXIueCA8IHdpZHRoIC8gMikgewogICAgICAgIGN0eC5yb3RhdGluZyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIGN0eC5hY2NlbGVyYXRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSk7CiAgfQp9OwoKZXhwb3J0IHsgbG9hZEltYWdlcywgdmVsb2NpdHlGcm9tQW5nbGUsIHNldElucHV0SGFuZGxlcnMgfTs="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js"],"names":["gameDimensions","powerUps","sceneKeys","Phaser","loadImages","ctx","key","i","load","image","game","ranking","lobby","touchScreen","length","velocityFromAngle","angle","velocity","x","Math","cos","PI","y","sin","setInputHandlers","width","currentPlayer","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","accelerateLittleKey","ENTER","on","players","state","shoot","addPointer","pointer","rotating","accelerating"],"mappings":"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","sourcesContent":["import {gameDimensions, powerUps, sceneKeys} from \"../constants/gameSettings\";\nimport Phaser from \"phaser\";\n\nconst loadImages = (ctx, key) => {\n    for(let i = 0; i < 4; i++){\n        ctx.load.image(\"ship\"+i, \"./ships/ship\"+i+\".png\");\n\n        if(key===sceneKeys.game){\n            ctx.load.image(\"little\"+i, \"./littles/little\"+i+\".png\");\n            ctx.load.image(\"shielded\"+i, \"./shielded/shielded\"+i+\".png\");\n        }\n    }\n    \n    if(key !== sceneKeys.ranking){\n        ctx.load.image(\"bullet\", \"./bullet.png\");\n        ctx.load.image(\"bullet-loaded\", \"./bullet-loaded.png\");\n    }\n\n    if(key===sceneKeys.lobby && ctx.touchScreen) {\n        ctx.load.image(\"rotate-button\", \"./rotate-button.png\");\n        ctx.load.image(\"shoot-button\", \"./shoot-button.png\");\n    }\n\n    if(key === sceneKeys.game){\n        for(let i = 0; i < powerUps.length; i++){\n            ctx.load.image(powerUps[i], \"./powerUps/\"+ powerUps[i] +\".png\");\n        }\n        for(let i = 1; i <= 3; i++){\n            ctx.load.image(\"block\"+i, \"./blocks/block\"+ i +\".png\");\n        }\n    }\n}\n\nconst velocityFromAngle = (angle, velocity) => {\n    return {\n        x: velocity * Math.cos(angle*Math.PI/180),\n        y: velocity * Math.sin(angle*Math.PI/180)\n    }\n}\n\nconst setInputHandlers = (ctx, key) => {\n    const {width} = key === sceneKeys.game ? gameDimensions : ctx;\n    if(ctx.currentPlayer === null && key === sceneKeys.game) return;\n\n    ctx.rotationKey = ctx.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n    ctx.accelerateLittleKey = ctx.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER);\n    ctx.input.keyboard.on(\"keyup-ENTER\", ()=>{\n        if(key === sceneKeys.game){\n            if(ctx.players[ctx.currentPlayer].state>=2) ctx.shoot();\n        } else if(key === sceneKeys.lobby) ctx.shoot();\n    });\n\n    if(ctx.touchScreen){\n        ctx.input.addPointer(1);\n\n        ctx.input.on(\"pointerdown\", (pointer) => {\n            if (pointer.x < width / 2) {\n                ctx.rotating = true;\n            } else {\n                if(key === sceneKeys.game){\n                    if(ctx.players[ctx.currentPlayer].state>=2) ctx.shoot();\n                    else ctx.accelerating = true;\n                } else if(key === sceneKeys.lobby) ctx.shoot();\n            }\n        });\n\n        ctx.input.on(\"pointerup\", (pointer) => {\n            if (pointer.x < width / 2) {\n                ctx.rotating = false;\n            } else {\n                ctx.accelerating = false;\n            }\n        });\n    }\n}\n\n\n\n\nexport { loadImages, velocityFromAngle, setInputHandlers }"]}]}
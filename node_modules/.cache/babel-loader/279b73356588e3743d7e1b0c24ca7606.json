{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js","mtime":1618482610524},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1618298483685},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1618298485037},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1618298483657},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1618298483941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCB7IGdhbWVEaW1lbnNpb25zLCBwb3dlclVwcywgc2NlbmVLZXlzIH0gZnJvbSAiLi4vY29uc3RhbnRzL2dhbWVTZXR0aW5ncyI7CmltcG9ydCBQaGFzZXIgZnJvbSAicGhhc2VyIjsKCnZhciBsb2FkSW1hZ2VzID0gZnVuY3Rpb24gbG9hZEltYWdlcyhjdHgsIGtleSkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICBjdHgubG9hZC5pbWFnZSgic2hpcCIgKyBpLCAiLi9zaGlwcy9zaGlwIiArIGkgKyAiLnBuZyIpOwoKICAgIGlmIChrZXkgPT09IHNjZW5lS2V5cy5nYW1lKSB7CiAgICAgIGN0eC5sb2FkLmltYWdlKCJsaXR0bGUiICsgaSwgIi4vbGl0dGxlcy9saXR0bGUiICsgaSArICIucG5nIik7CiAgICAgIGN0eC5sb2FkLmltYWdlKCJzaGllbGRlZCIgKyBpLCAiLi9zaGllbGRlZC9zaGllbGRlZCIgKyBpICsgIi5wbmciKTsKICAgIH0KICB9CgogIGlmIChrZXkgIT09IHNjZW5lS2V5cy5yYW5raW5nKSB7CiAgICBjdHgubG9hZC5pbWFnZSgiYnVsbGV0IiwgIi4vYnVsbGV0LnBuZyIpOwogICAgY3R4LmxvYWQuaW1hZ2UoImJ1bGxldC1sb2FkZWQiLCAiLi9idWxsZXQtbG9hZGVkLnBuZyIpOwogIH0KCiAgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmxvYmJ5ICYmIGN0eC50b3VjaFNjcmVlbikgewogICAgY3R4LmxvYWQuaW1hZ2UoInJvdGF0ZS1idXR0b24iLCAiLi9yb3RhdGUtYnV0dG9uLnBuZyIpOwogICAgY3R4LmxvYWQuaW1hZ2UoInNob290LWJ1dHRvbiIsICIuL3Nob290LWJ1dHRvbi5wbmciKTsKICB9CgogIGlmIChrZXkgPT09IHNjZW5lS2V5cy5nYW1lKSB7CiAgICBjdHgubG9hZC5qc29uKCJzaGFwZXMiLCAiLi9zaGFwZXMuanNvbiIpOwoKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBwb3dlclVwcy5sZW5ndGg7IF9pKyspIHsKICAgICAgY3R4LmxvYWQuaW1hZ2UocG93ZXJVcHNbX2ldLCAiLi9wb3dlclVwcy8iICsgcG93ZXJVcHNbX2ldICsgIi5wbmciKTsKICAgIH0KCiAgICBmb3IgKHZhciBfaTIgPSAxOyBfaTIgPD0gMzsgX2kyKyspIHsKICAgICAgY3R4LmxvYWQuaW1hZ2UoImJsb2NrIiArIF9pMiwgIi4vYmxvY2tzL2Jsb2NrIiArIF9pMiArICIucG5nIik7CiAgICB9CiAgfQp9OwoKdmFyIHZlbG9jaXR5RnJvbUFuZ2xlID0gZnVuY3Rpb24gdmVsb2NpdHlGcm9tQW5nbGUoYW5nbGUsIHZlbG9jaXR5KSB7CiAgcmV0dXJuIHsKICAgIHg6IHZlbG9jaXR5ICogTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKSwKICAgIHk6IHZlbG9jaXR5ICogTWF0aC5zaW4oYW5nbGUgKiBNYXRoLlBJIC8gMTgwKQogIH07Cn07Cgp2YXIgc2V0SW5wdXRIYW5kbGVycyA9IGZ1bmN0aW9uIHNldElucHV0SGFuZGxlcnMoY3R4LCBrZXkpIHsKICB2YXIgX3JlZiA9IGtleSA9PT0gc2NlbmVLZXlzLmdhbWUgPyBnYW1lRGltZW5zaW9ucyA6IGN0eCwKICAgICAgd2lkdGggPSBfcmVmLndpZHRoOwoKICBpZiAoY3R4LmN1cnJlbnRQbGF5ZXIgPT09IG51bGwgJiYga2V5ID09PSBzY2VuZUtleXMuZ2FtZSkgcmV0dXJuOwogIGN0eC5yb3RhdGlvbktleSA9IGN0eC5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlNQQUNFKTsKICBjdHguYWNjZWxlcmF0ZUxpdHRsZUtleSA9IGN0eC5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLkVOVEVSKTsKICBjdHguaW5wdXQua2V5Ym9hcmQub24oImtleXVwLUVOVEVSIiwgZnVuY3Rpb24gKCkgewogICAgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmdhbWUpIHsKICAgICAgaWYgKGN0eC5wbGF5ZXJzW2N0eC5jdXJyZW50UGxheWVyXS5zdGF0ZSA+PSAyKSBjdHguc2hvb3QoKTsKICAgIH0gZWxzZSBpZiAoa2V5ID09PSBzY2VuZUtleXMubG9iYnkpIGN0eC5zaG9vdCgpOwogIH0pOwoKICBpZiAoY3R4LnRvdWNoU2NyZWVuKSB7CiAgICBjdHguaW5wdXQuYWRkUG9pbnRlcigxKTsKICAgIGN0eC5pbnB1dC5vbigicG9pbnRlcmRvd24iLCBmdW5jdGlvbiAocG9pbnRlcikgewogICAgICBpZiAocG9pbnRlci54IDwgd2lkdGggLyAyKSB7CiAgICAgICAgY3R4LnJvdGF0aW5nID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoa2V5ID09PSBzY2VuZUtleXMuZ2FtZSkgewogICAgICAgICAgaWYgKGN0eC5wbGF5ZXJzW2N0eC5jdXJyZW50UGxheWVyXS5zdGF0ZSA+PSAyKSBjdHguc2hvb3QoKTtlbHNlIGN0eC5hY2NlbGVyYXRpbmcgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBzY2VuZUtleXMubG9iYnkpIGN0eC5zaG9vdCgpOwogICAgICB9CiAgICB9KTsKICAgIGN0eC5pbnB1dC5vbigicG9pbnRlcnVwIiwgZnVuY3Rpb24gKHBvaW50ZXIpIHsKICAgICAgaWYgKHBvaW50ZXIueCA8IHdpZHRoIC8gMikgewogICAgICAgIGN0eC5yb3RhdGluZyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIGN0eC5hY2NlbGVyYXRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSk7CiAgfQp9OwoKdmFyIGNyZWF0ZUJ1bGxldHNMb2FkZWRPYmplY3QgPSBmdW5jdGlvbiBjcmVhdGVCdWxsZXRzTG9hZGVkT2JqZWN0KGN0eCkgewogIHZhciBvYmogPSB7CiAgICBnYW1lT2JqZWN0czogW10sCiAgICBraWxsQWxsOiBmdW5jdGlvbiBraWxsQWxsKCkgewogICAgICB0aGlzLmdhbWVPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKGJ1bGxldCkgewogICAgICAgIGJ1bGxldC5zZXRWaXNpYmxlKGZhbHNlKTsKICAgICAgICBidWxsZXQuc2V0QWN0aXZlKGZhbHNlKTsKICAgICAgfSk7CiAgICB9LAogICAgZW5hYmxlQWxsOiBmdW5jdGlvbiBlbmFibGVBbGwoKSB7CiAgICAgIHRoaXMuZ2FtZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiAoYnVsbGV0KSB7CiAgICAgICAgYnVsbGV0LnNldFZpc2libGUodHJ1ZSk7CiAgICAgICAgYnVsbGV0LnNldEFjdGl2ZSh0cnVlKTsKICAgICAgfSk7CiAgICB9LAogICAgZW5hYmxlRmlyc3REZWFkOiBmdW5jdGlvbiBlbmFibGVGaXJzdERlYWQoKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nYW1lT2JqZWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBvID0gdGhpcy5nYW1lT2JqZWN0c1tpXTsKCiAgICAgICAgaWYgKCFvLnZpc2libGUgJiYgIW8uYWN0aXZlKSB7CiAgICAgICAgICBvLnNldFZpc2libGUodHJ1ZSk7CiAgICAgICAgICBvLnNldEFjdGl2ZSh0cnVlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBraWxsRmlyc3RBbGl2ZTogZnVuY3Rpb24ga2lsbEZpcnN0QWxpdmUoKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nYW1lT2JqZWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBvID0gdGhpcy5nYW1lT2JqZWN0c1tpXTsKCiAgICAgICAgaWYgKG8udmlzaWJsZSAmJiBvLmFjdGl2ZSkgewogICAgICAgICAgby5zZXRWaXNpYmxlKGZhbHNlKTsKICAgICAgICAgIG8uc2V0QWN0aXZlKGZhbHNlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBlbmFibGVUbzogZnVuY3Rpb24gZW5hYmxlVG8obnVtYmVyKSB7CiAgICAgIHRoaXMua2lsbEFsbCgpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXI7IGkrKykgewogICAgICAgIHRoaXMuZW5hYmxlRmlyc3REZWFkKCk7CiAgICAgIH0KICAgIH0KICB9OwoKICBmb3IgKHZhciBpID0gMDsgaSA8IGN0eC5tYXhCdWxsZXRzOyBpKyspIHsKICAgIHZhciBidWxsZXRMb2FkZWQgPSBjdHgubWF0dGVyLmFkZC5pbWFnZSgwLCAwLCAiYnVsbGV0LWxvYWRlZCIsIG51bGwsIGN0eC5kZWZhdWx0SW1hZ2VPcHRpb25zKTsKICAgIGJ1bGxldExvYWRlZC5zZXRDb2xsaWRlc1dpdGgoW10pOwogICAgb2JqLmdhbWVPYmplY3RzLnB1c2goYnVsbGV0TG9hZGVkKTsKICB9CgogIHJldHVybiBvYmo7Cn07Cgp2YXIgZ2V0Qm9keUZyb21Db2xsaXNpb24gPSBmdW5jdGlvbiBnZXRCb2R5RnJvbUNvbGxpc2lvbihib2R5SWQsIGNvbGxpc2lvbikgewogIGlmIChjb2xsaXNpb24uYm9keUEuaWQgPT09IGJvZHlJZCB8fCBjb2xsaXNpb24uYm9keUEucGFyZW50LmlkID09PSBib2R5SWQpIHJldHVybiBjb2xsaXNpb24uYm9keUI7ZWxzZSByZXR1cm4gY29sbGlzaW9uLmJvZHlBOwp9OwoKZXhwb3J0IHsgbG9hZEltYWdlcywgdmVsb2NpdHlGcm9tQW5nbGUsIHNldElucHV0SGFuZGxlcnMsIGNyZWF0ZUJ1bGxldHNMb2FkZWRPYmplY3QsIGdldEJvZHlGcm9tQ29sbGlzaW9uIH07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js"],"names":["gameDimensions","powerUps","sceneKeys","Phaser","loadImages","ctx","key","i","load","image","game","ranking","lobby","touchScreen","json","length","velocityFromAngle","angle","velocity","x","Math","cos","PI","y","sin","setInputHandlers","width","currentPlayer","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","accelerateLittleKey","ENTER","on","players","state","shoot","addPointer","pointer","rotating","accelerating","createBulletsLoadedObject","obj","gameObjects","killAll","forEach","bullet","setVisible","setActive","enableAll","enableFirstDead","o","visible","active","killFirstAlive","enableTo","number","maxBullets","bulletLoaded","matter","add","defaultImageOptions","setCollidesWith","push","getBodyFromCollision","bodyId","collision","bodyA","id","parent","bodyB"],"mappings":"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","sourcesContent":["import {gameDimensions, powerUps, sceneKeys} from \"../constants/gameSettings\";\nimport Phaser from \"phaser\";\n\nconst loadImages = (ctx, key) => {\n    for(let i = 0; i < 4; i++){\n        ctx.load.image(\"ship\"+i, \"./ships/ship\"+i+\".png\");\n\n        if(key===sceneKeys.game){\n            ctx.load.image(\"little\"+i, \"./littles/little\"+i+\".png\");\n            ctx.load.image(\"shielded\"+i, \"./shielded/shielded\"+i+\".png\");\n        }\n    }\n    \n    if(key !== sceneKeys.ranking){\n        ctx.load.image(\"bullet\", \"./bullet.png\");\n        ctx.load.image(\"bullet-loaded\", \"./bullet-loaded.png\");\n    }\n\n    if(key===sceneKeys.lobby && ctx.touchScreen) {\n        ctx.load.image(\"rotate-button\", \"./rotate-button.png\");\n        ctx.load.image(\"shoot-button\", \"./shoot-button.png\");\n    }\n\n    if(key === sceneKeys.game){\n        ctx.load.json(\"shapes\", \"./shapes.json\");\n\n        for(let i = 0; i < powerUps.length; i++){\n            ctx.load.image(powerUps[i], \"./powerUps/\"+ powerUps[i] +\".png\");\n        }\n        for(let i = 1; i <= 3; i++){\n            ctx.load.image(\"block\"+i, \"./blocks/block\"+ i +\".png\");\n        }\n    }\n}\n\nconst velocityFromAngle = (angle, velocity) => {\n    return {\n        x: velocity * Math.cos(angle*Math.PI/180),\n        y: velocity * Math.sin(angle*Math.PI/180)\n    }\n}\n\nconst setInputHandlers = (ctx, key) => {\n    const {width} = key === sceneKeys.game ? gameDimensions : ctx;\n    if(ctx.currentPlayer === null && key === sceneKeys.game) return;\n\n    ctx.rotationKey = ctx.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n    ctx.accelerateLittleKey = ctx.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER);\n    ctx.input.keyboard.on(\"keyup-ENTER\", ()=>{\n        if(key === sceneKeys.game){\n            if(ctx.players[ctx.currentPlayer].state>=2) ctx.shoot();\n        } else if(key === sceneKeys.lobby) ctx.shoot();\n    });\n\n    if(ctx.touchScreen){\n        ctx.input.addPointer(1);\n\n        ctx.input.on(\"pointerdown\", (pointer) => {\n            if (pointer.x < width / 2) {\n                ctx.rotating = true;\n            } else {\n                if(key === sceneKeys.game){\n                    if(ctx.players[ctx.currentPlayer].state>=2) ctx.shoot();\n                    else ctx.accelerating = true;\n                } else if(key === sceneKeys.lobby) ctx.shoot();\n            }\n        });\n\n        ctx.input.on(\"pointerup\", (pointer) => {\n            if (pointer.x < width / 2) {\n                ctx.rotating = false;\n            } else {\n                ctx.accelerating = false;\n            }\n        });\n    }\n}\n\nconst createBulletsLoadedObject = (ctx) => {\n    const obj = {\n        gameObjects: [],\n        killAll() {\n            this.gameObjects.forEach(bullet => {\n                bullet.setVisible(false);\n                bullet.setActive(false);\n            });\n        },\n        enableAll() {\n            this.gameObjects.forEach(bullet => {\n                bullet.setVisible(true);\n                bullet.setActive(true);\n            });\n        },\n        enableFirstDead() {\n            for (let i = 0; i < this.gameObjects.length; i++) {\n                const o = this.gameObjects[i];\n                if (!o.visible && !o.active) {\n                    o.setVisible(true);\n                    o.setActive(true);\n                    return;\n                }\n            }\n        },\n        killFirstAlive() {\n            for (let i = 0; i < this.gameObjects.length; i++) {\n                const o = this.gameObjects[i];\n                if (o.visible && o.active) {\n                    o.setVisible(false);\n                    o.setActive(false);\n                    return;\n                }\n            }\n        },\n        enableTo(number){\n            this.killAll();\n            for(let i = 0; i < number; i++) this.enableFirstDead();\n        }\n    }\n\n    for(let i = 0; i < ctx.maxBullets; i++){\n        const bulletLoaded = ctx.matter.add.image(0, 0, \"bullet-loaded\", null, ctx.defaultImageOptions);\n        bulletLoaded.setCollidesWith([]);\n        obj.gameObjects.push(bulletLoaded);\n    }\n\n    return obj;\n}\n\nconst getBodyFromCollision = (bodyId, collision) => {\n    if(collision.bodyA.id === bodyId || collision.bodyA.parent.id === bodyId) return collision.bodyB;\n    else return collision.bodyA;\n}\n\n\n\n\nexport { loadImages, velocityFromAngle, setInputHandlers, createBulletsLoadedObject, getBodyFromCollision }"]}]}
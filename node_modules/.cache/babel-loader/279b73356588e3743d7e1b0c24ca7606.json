{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js","mtime":1618310508411},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1618298483685},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1618298485037},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1618298483657},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1618298483941}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5pcy5qcyI7CmltcG9ydCB7IGdhbWVEaW1lbnNpb25zLCBwb3dlclVwcywgc2NlbmVLZXlzIH0gZnJvbSAiLi4vY29uc3RhbnRzL2dhbWVTZXR0aW5ncyI7CmltcG9ydCBQaGFzZXIgZnJvbSAicGhhc2VyIjsKCnZhciBsb2FkSW1hZ2VzID0gZnVuY3Rpb24gbG9hZEltYWdlcyhjdHgsIGtleSkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CiAgICBjdHgubG9hZC5pbWFnZSgic2hpcCIgKyBpLCAiLi9zaGlwcy9zaGlwIiArIGkgKyAiLnBuZyIpOwoKICAgIGlmIChrZXkgPT09IHNjZW5lS2V5cy5nYW1lKSB7CiAgICAgIGN0eC5sb2FkLmltYWdlKCJsaXR0bGUiICsgaSwgIi4vbGl0dGxlcy9saXR0bGUiICsgaSArICIucG5nIik7CiAgICAgIGN0eC5sb2FkLmltYWdlKCJzaGllbGRlZCIgKyBpLCAiLi9zaGllbGRlZC9zaGllbGRlZCIgKyBpICsgIi5wbmciKTsKICAgIH0KICB9CgogIGlmIChrZXkgIT09IHNjZW5lS2V5cy5yYW5raW5nKSB7CiAgICBjdHgubG9hZC5pbWFnZSgiYnVsbGV0IiwgIi4vYnVsbGV0LnBuZyIpOwogICAgY3R4LmxvYWQuaW1hZ2UoImJ1bGxldC1sb2FkZWQiLCAiLi9idWxsZXQtbG9hZGVkLnBuZyIpOwogIH0KCiAgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmxvYmJ5ICYmIGN0eC50b3VjaFNjcmVlbikgewogICAgY3R4LmxvYWQuaW1hZ2UoInJvdGF0ZS1idXR0b24iLCAiLi9yb3RhdGUtYnV0dG9uLnBuZyIpOwogICAgY3R4LmxvYWQuaW1hZ2UoInNob290LWJ1dHRvbiIsICIuL3Nob290LWJ1dHRvbi5wbmciKTsKICB9CgogIGlmIChrZXkgPT09IHNjZW5lS2V5cy5nYW1lKSB7CiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgcG93ZXJVcHMubGVuZ3RoOyBfaSsrKSB7CiAgICAgIGN0eC5sb2FkLmltYWdlKHBvd2VyVXBzW19pXSwgIi4vcG93ZXJVcHMvIiArIHBvd2VyVXBzW19pXSArICIucG5nIik7CiAgICB9CgogICAgZm9yICh2YXIgX2kyID0gMTsgX2kyIDw9IDM7IF9pMisrKSB7CiAgICAgIGN0eC5sb2FkLmltYWdlKCJibG9jayIgKyBfaTIsICIuL2Jsb2Nrcy9ibG9jayIgKyBfaTIgKyAiLnBuZyIpOwogICAgfQogIH0KfTsKCnZhciB2ZWxvY2l0eUZyb21BbmdsZSA9IGZ1bmN0aW9uIHZlbG9jaXR5RnJvbUFuZ2xlKGFuZ2xlLCB2ZWxvY2l0eSkgewogIHJldHVybiB7CiAgICB4OiB2ZWxvY2l0eSAqIE1hdGguY29zKGFuZ2xlICogTWF0aC5QSSAvIDE4MCksCiAgICB5OiB2ZWxvY2l0eSAqIE1hdGguc2luKGFuZ2xlICogTWF0aC5QSSAvIDE4MCkKICB9Owp9OwoKdmFyIHNldElucHV0SGFuZGxlcnMgPSBmdW5jdGlvbiBzZXRJbnB1dEhhbmRsZXJzKGN0eCwga2V5KSB7CiAgdmFyIF9yZWYgPSBrZXkgPT09IHNjZW5lS2V5cy5nYW1lID8gZ2FtZURpbWVuc2lvbnMgOiBjdHgsCiAgICAgIHdpZHRoID0gX3JlZi53aWR0aDsKCiAgaWYgKGN0eC5jdXJyZW50UGxheWVyID09PSBudWxsICYmIGtleSA9PT0gc2NlbmVLZXlzLmdhbWUpIHJldHVybjsKICBjdHgucm90YXRpb25LZXkgPSBjdHguaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5TUEFDRSk7CiAgY3R4LmFjY2VsZXJhdGVMaXR0bGVLZXkgPSBjdHguaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5FTlRFUik7CiAgY3R4LmlucHV0LmtleWJvYXJkLm9uKCJrZXl1cC1FTlRFUiIsIGZ1bmN0aW9uICgpIHsKICAgIGlmIChrZXkgPT09IHNjZW5lS2V5cy5nYW1lKSB7CiAgICAgIGlmIChjdHgucGxheWVyc1tjdHguY3VycmVudFBsYXllcl0uc3RhdGUgPj0gMikgY3R4LnNob290KCk7CiAgICB9IGVsc2UgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmxvYmJ5KSBjdHguc2hvb3QoKTsKICB9KTsKCiAgaWYgKGN0eC50b3VjaFNjcmVlbikgewogICAgY3R4LmlucHV0LmFkZFBvaW50ZXIoMSk7CiAgICBjdHguaW5wdXQub24oInBvaW50ZXJkb3duIiwgZnVuY3Rpb24gKHBvaW50ZXIpIHsKICAgICAgaWYgKHBvaW50ZXIueCA8IHdpZHRoIC8gMikgewogICAgICAgIGN0eC5yb3RhdGluZyA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmdhbWUpIHsKICAgICAgICAgIGlmIChjdHgucGxheWVyc1tjdHguY3VycmVudFBsYXllcl0uc3RhdGUgPj0gMikgY3R4LnNob290KCk7ZWxzZSBjdHguYWNjZWxlcmF0aW5nID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gc2NlbmVLZXlzLmxvYmJ5KSBjdHguc2hvb3QoKTsKICAgICAgfQogICAgfSk7CiAgICBjdHguaW5wdXQub24oInBvaW50ZXJ1cCIsIGZ1bmN0aW9uIChwb2ludGVyKSB7CiAgICAgIGlmIChwb2ludGVyLnggPCB3aWR0aCAvIDIpIHsKICAgICAgICBjdHgucm90YXRpbmcgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjdHguYWNjZWxlcmF0aW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0pOwogIH0KfTsKCnZhciBjcmVhdGVCdWxsZXRzTG9hZGVkT2JqZWN0ID0gZnVuY3Rpb24gY3JlYXRlQnVsbGV0c0xvYWRlZE9iamVjdChjdHgpIHsKICB2YXIgb2JqID0gewogICAgZ2FtZU9iamVjdHM6IFtdLAogICAga2lsbEFsbDogZnVuY3Rpb24ga2lsbEFsbCgpIHsKICAgICAgdGhpcy5nYW1lT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChidWxsZXQpIHsKICAgICAgICBidWxsZXQuc2V0VmlzaWJsZShmYWxzZSk7CiAgICAgICAgYnVsbGV0LnNldEFjdGl2ZShmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGVuYWJsZUFsbDogZnVuY3Rpb24gZW5hYmxlQWxsKCkgewogICAgICB0aGlzLmdhbWVPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKGJ1bGxldCkgewogICAgICAgIGJ1bGxldC5zZXRWaXNpYmxlKHRydWUpOwogICAgICAgIGJ1bGxldC5zZXRBY3RpdmUodHJ1ZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGVuYWJsZUZpcnN0RGVhZDogZnVuY3Rpb24gZW5hYmxlRmlyc3REZWFkKCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ2FtZU9iamVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbyA9IHRoaXMuZ2FtZU9iamVjdHNbaV07CgogICAgICAgIGlmICghby52aXNpYmxlICYmICFvLmFjdGl2ZSkgewogICAgICAgICAgby5zZXRWaXNpYmxlKHRydWUpOwogICAgICAgICAgby5zZXRBY3RpdmUodHJ1ZSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAga2lsbEZpcnN0QWxpdmU6IGZ1bmN0aW9uIGtpbGxGaXJzdEFsaXZlKCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ2FtZU9iamVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbyA9IHRoaXMuZ2FtZU9iamVjdHNbaV07CgogICAgICAgIGlmIChvLnZpc2libGUgJiYgby5hY3RpdmUpIHsKICAgICAgICAgIG8uc2V0VmlzaWJsZShmYWxzZSk7CiAgICAgICAgICBvLnNldEFjdGl2ZShmYWxzZSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZW5hYmxlVG86IGZ1bmN0aW9uIGVuYWJsZVRvKG51bWJlcikgewogICAgICB0aGlzLmtpbGxBbGwoKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyOyBpKyspIHsKICAgICAgICB0aGlzLmVuYWJsZUZpcnN0RGVhZCgpOwogICAgICB9CiAgICB9CiAgfTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdHgubWF4QnVsbGV0czsgaSsrKSB7CiAgICB2YXIgYnVsbGV0TG9hZGVkID0gY3R4Lm1hdHRlci5hZGQuaW1hZ2UoMCwgMCwgImJ1bGxldC1sb2FkZWQiLCBudWxsLCBjdHguZGVmYXVsdEltYWdlT3B0aW9ucyk7CiAgICBidWxsZXRMb2FkZWQuc2V0Q29sbGlkZXNXaXRoKFtdKTsKICAgIG9iai5nYW1lT2JqZWN0cy5wdXNoKGJ1bGxldExvYWRlZCk7CiAgfQoKICByZXR1cm4gb2JqOwp9OwoKdmFyIGdldEJvZHlGcm9tQ29sbGlzaW9uID0gZnVuY3Rpb24gZ2V0Qm9keUZyb21Db2xsaXNpb24oc2hpcCwgY29sbGlzaW9uKSB7CiAgaWYgKE9iamVjdC5pcyhjb2xsaXNpb24uYm9keUEsIHNoaXApKSByZXR1cm4gY29sbGlzaW9uLmJvZHlCO2Vsc2UgcmV0dXJuIGNvbGxpc2lvbi5ib2R5QTsKfTsKCmV4cG9ydCB7IGxvYWRJbWFnZXMsIHZlbG9jaXR5RnJvbUFuZ2xlLCBzZXRJbnB1dEhhbmRsZXJzLCBjcmVhdGVCdWxsZXRzTG9hZGVkT2JqZWN0LCBnZXRCb2R5RnJvbUNvbGxpc2lvbiB9Ow=="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/scene.js"],"names":["gameDimensions","powerUps","sceneKeys","Phaser","loadImages","ctx","key","i","load","image","game","ranking","lobby","touchScreen","length","velocityFromAngle","angle","velocity","x","Math","cos","PI","y","sin","setInputHandlers","width","currentPlayer","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","accelerateLittleKey","ENTER","on","players","state","shoot","addPointer","pointer","rotating","accelerating","createBulletsLoadedObject","obj","gameObjects","killAll","forEach","bullet","setVisible","setActive","enableAll","enableFirstDead","o","visible","active","killFirstAlive","enableTo","number","maxBullets","bulletLoaded","matter","add","defaultImageOptions","setCollidesWith","push","getBodyFromCollision","ship","collision","Object","is","bodyA","bodyB"],"mappings":"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","sourcesContent":["import {gameDimensions, powerUps, sceneKeys} from \"../constants/gameSettings\";\nimport Phaser from \"phaser\";\n\nconst loadImages = (ctx, key) => {\n    for(let i = 0; i < 4; i++){\n        ctx.load.image(\"ship\"+i, \"./ships/ship\"+i+\".png\");\n\n        if(key===sceneKeys.game){\n            ctx.load.image(\"little\"+i, \"./littles/little\"+i+\".png\");\n            ctx.load.image(\"shielded\"+i, \"./shielded/shielded\"+i+\".png\");\n        }\n    }\n    \n    if(key !== sceneKeys.ranking){\n        ctx.load.image(\"bullet\", \"./bullet.png\");\n        ctx.load.image(\"bullet-loaded\", \"./bullet-loaded.png\");\n    }\n\n    if(key===sceneKeys.lobby && ctx.touchScreen) {\n        ctx.load.image(\"rotate-button\", \"./rotate-button.png\");\n        ctx.load.image(\"shoot-button\", \"./shoot-button.png\");\n    }\n\n    if(key === sceneKeys.game){\n        for(let i = 0; i < powerUps.length; i++){\n            ctx.load.image(powerUps[i], \"./powerUps/\"+ powerUps[i] +\".png\");\n        }\n        for(let i = 1; i <= 3; i++){\n            ctx.load.image(\"block\"+i, \"./blocks/block\"+ i +\".png\");\n        }\n    }\n}\n\nconst velocityFromAngle = (angle, velocity) => {\n    return {\n        x: velocity * Math.cos(angle*Math.PI/180),\n        y: velocity * Math.sin(angle*Math.PI/180)\n    }\n}\n\nconst setInputHandlers = (ctx, key) => {\n    const {width} = key === sceneKeys.game ? gameDimensions : ctx;\n    if(ctx.currentPlayer === null && key === sceneKeys.game) return;\n\n    ctx.rotationKey = ctx.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n    ctx.accelerateLittleKey = ctx.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ENTER);\n    ctx.input.keyboard.on(\"keyup-ENTER\", ()=>{\n        if(key === sceneKeys.game){\n            if(ctx.players[ctx.currentPlayer].state>=2) ctx.shoot();\n        } else if(key === sceneKeys.lobby) ctx.shoot();\n    });\n\n    if(ctx.touchScreen){\n        ctx.input.addPointer(1);\n\n        ctx.input.on(\"pointerdown\", (pointer) => {\n            if (pointer.x < width / 2) {\n                ctx.rotating = true;\n            } else {\n                if(key === sceneKeys.game){\n                    if(ctx.players[ctx.currentPlayer].state>=2) ctx.shoot();\n                    else ctx.accelerating = true;\n                } else if(key === sceneKeys.lobby) ctx.shoot();\n            }\n        });\n\n        ctx.input.on(\"pointerup\", (pointer) => {\n            if (pointer.x < width / 2) {\n                ctx.rotating = false;\n            } else {\n                ctx.accelerating = false;\n            }\n        });\n    }\n}\n\nconst createBulletsLoadedObject = (ctx) => {\n    const obj = {\n        gameObjects: [],\n        killAll() {\n            this.gameObjects.forEach(bullet => {\n                bullet.setVisible(false);\n                bullet.setActive(false);\n            });\n        },\n        enableAll() {\n            this.gameObjects.forEach(bullet => {\n                bullet.setVisible(true);\n                bullet.setActive(true);\n            });\n        },\n        enableFirstDead() {\n            for (let i = 0; i < this.gameObjects.length; i++) {\n                const o = this.gameObjects[i];\n                if (!o.visible && !o.active) {\n                    o.setVisible(true);\n                    o.setActive(true);\n                    return;\n                }\n            }\n        },\n        killFirstAlive() {\n            for (let i = 0; i < this.gameObjects.length; i++) {\n                const o = this.gameObjects[i];\n                if (o.visible && o.active) {\n                    o.setVisible(false);\n                    o.setActive(false);\n                    return;\n                }\n            }\n        },\n        enableTo(number){\n            this.killAll();\n            for(let i = 0; i < number; i++) this.enableFirstDead();\n        }\n    }\n\n    for(let i = 0; i < ctx.maxBullets; i++){\n        const bulletLoaded = ctx.matter.add.image(0, 0, \"bullet-loaded\", null, ctx.defaultImageOptions);\n        bulletLoaded.setCollidesWith([]);\n        obj.gameObjects.push(bulletLoaded);\n    }\n\n    return obj;\n}\n\nconst getBodyFromCollision = (ship, collision) => {\n    if(Object.is(collision.bodyA, ship)) return collision.bodyB;\n    else return collision.bodyA;\n}\n\n\n\n\nexport { loadImages, velocityFromAngle, setInputHandlers, createBulletsLoadedObject, getBodyFromCollision }"]}]}
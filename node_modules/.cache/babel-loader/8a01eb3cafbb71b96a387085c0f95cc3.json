{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js","mtime":1616942263416},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1616495189815},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1616495189787},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1616495190059}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL21lZGlhL2phY29wby9Wb2x1bWVEYXRpL0RvY3VtZW50aS9wYXBlcm8udGsvY29zbW9zLnBhcGVyby5tZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSAicGhhc2VyIjsKaW1wb3J0IHdlYnNvY2tldEV2ZW50cyBmcm9tICIuLi9jb25zdGFudHMvd2Vic29ja2V0RXZlbnRzIjsKaW1wb3J0IHsgZGVmYXVsdFNldHRpbmdzLCBnYW1lRGltZW5zaW9ucywgZ2V0VmVsb2NpdHksIG5vcm1hbGl6ZXJzLCBzY2VuZUtleXMgfSBmcm9tICIuLi9jb25zdGFudHMvZ2FtZVNldHRpbmdzIjsKCnZhciBHYW1lU2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QaGFzZXIkU2NlbmUpIHsKICBfaW5oZXJpdHMoR2FtZVNjZW5lLCBfUGhhc2VyJFNjZW5lKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihHYW1lU2NlbmUpOwoKICBmdW5jdGlvbiBHYW1lU2NlbmUoc29ja2V0KSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWVTY2VuZSk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7CiAgICAgIGtleTogc2NlbmVLZXlzLmdhbWUKICAgIH0pOwogICAgX3RoaXMuc29ja2V0ID0gc29ja2V0OwogICAgLyogICAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5HQU1FX01PRElGSUVELCBnYW1lID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBnYW1lLnNldHRpbmdzOwogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGxheWVyID0gZ2FtZS5jdXJyZW50UGxheWVyOwogICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5tYXhWZWxvY2l0eUxpdHRsZSA9IGdhbWUuc2V0dGluZ3MudmVsb2NpdHkrMC41OwogICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJzID0ge307CiAgICAgICAgICAgICAgICBnYW1lLnBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyc1twbGF5ZXIubG9jYWxJZF0gPSBwbGF5ZXI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXJzW3BsYXllci5sb2NhbElkXS5hdmFpbGFibGVCdWxsZXRzID0gMzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsqLwoKICAgIF90aGlzLnNldHRpbmdzID0gZGVmYXVsdFNldHRpbmdzOwogICAgX3RoaXMuc2V0dGluZ3MubWF4VmVsb2NpdHlMaXR0bGUgPSAyLjU7CiAgICBfdGhpcy5jdXJyZW50UGxheWVyID0gMDsKICAgIF90aGlzLnBsYXllcnMgPSB7CiAgICAgICcwJzogewogICAgICAgIGxvY2FsSWQ6IDAsCiAgICAgICAgY29sb3I6IDAKICAgICAgfSwKICAgICAgJzEnOiB7CiAgICAgICAgbG9jYWxJZDogMSwKICAgICAgICBjb2xvcjogMQogICAgICB9LAogICAgICAnMic6IHsKICAgICAgICBsb2NhbElkOiAyLAogICAgICAgIGNvbG9yOiAyCiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoR2FtZVNjZW5lLCBbewogICAga2V5OiAicHJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHsKICAgICAgY29uc29sZS5sb2cocmVxdWlyZSgiQC9hc3NldHMvc2hpcHMvc2hpcDAucG5nIikpOwogICAgICB0aGlzLmxvYWQuaW1hZ2UoInNoaXAwIiwgcmVxdWlyZSgiQC9hc3NldHMvc2hpcHMvc2hpcDAucG5nIikpOwogICAgICB0aGlzLnRleHR1cmVzLmFkZEJhc2U2NCgic2hpcDEiLCByZXF1aXJlKCJAL2Fzc2V0cy9zaGlwcy9zaGlwMS5wbmciKSk7CiAgICAgIHRoaXMudGV4dHVyZXMuYWRkQmFzZTY0KCJzaGlwMiIsIHJlcXVpcmUoIkAvYXNzZXRzL3NoaXBzL3NoaXAyLnBuZyIpKTsKICAgICAgdGhpcy50ZXh0dXJlcy5hZGRCYXNlNjQoInNoaXAzIiwgcmVxdWlyZSgiQC9hc3NldHMvc2hpcHMvc2hpcDMucG5nIikpOwogICAgICB0aGlzLnRleHR1cmVzLmFkZEJhc2U2NCgiYnVsbGV0IiwgcmVxdWlyZSgiQC9hc3NldHMvYnVsbGV0LnBuZyIpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHsKICAgICAgdGhpcy5jcmVhdGVHcm91cHMoKTsKICAgICAgdGhpcy5jcmVhdGVTaGlwcygpOwogICAgICAvKnRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5NT1ZFX0JJRywgZGF0YSA9PiB0aGlzLm9uQmlnTW92ZWQoZGF0YSkpOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuTU9WRV9MSVRUTEUsIGRhdGEgPT4gdGhpcy5vbkxpdHRsZU1vdmVkKGRhdGEpKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLlNIT09ULCBkYXRhID0+IHRoaXMuY3JlYXRlQnVsbGV0KGRhdGEpKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLkNIQU5HRV9TVEFURSwgZGF0YSA9PiB0aGlzLnVwZGF0ZVN0YXRlKGRhdGEpKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLlJFTE9BRCwgZGF0YSA9PiB0aGlzLnJlbG9hZChkYXRhKSk7CiAgICAgICB0aGlzLnJvdGF0aW9uS2V5ID0gdGhpcy5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLklucHV0LktleWJvYXJkLktleUNvZGVzLlNQQUNFKTsKICAgICAgdGhpcy5pbnB1dC5rZXlib2FyZC5vbigia2V5dXAtRU5URVIiLCB0aGlzLnNob290LCB0aGlzKTsqLwogICAgfQogICAgLyp1cGRhdGUodGltZSwgZGVsdGEpewogICAgICAgIGlmKHRoaXMucm90YXRpb25LZXkuaXNEb3duKSB0aGlzLm1vdmVCaWcoZGVsdGEpOwogICAgfSovCgogIH0sIHsKICAgIGtleTogImdldFZlbG9jaXR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWZWxvY2l0eShhbmdsZSwgbWFnKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogTWF0aC5jb3MoYW5nbGUpICogbWFnLAogICAgICAgIHk6IE1hdGguc2luKGFuZ2xlKSAqIG1hZwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZUdyb3VwcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlR3JvdXBzKCkgewogICAgICB0aGlzLnNoaXBzID0gdGhpcy5waHlzaWNzLmFkZC5ncm91cCgpOwogICAgICB0aGlzLmJ1bGxldHMgPSB0aGlzLnBoeXNpY3MuYWRkLmdyb3VwKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlU2hpcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVNoaXBzKCkgewogICAgICB2YXIgaW5kZXggPSAwOwoKICAgICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGVudHJpZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLnBsYXllcnMpOyBfaSA8IF9PYmplY3QkZW50cmllcy5sZW5ndGg7IF9pKyspIHsKICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzJF9pID0gX3NsaWNlZFRvQXJyYXkoX09iamVjdCRlbnRyaWVzW19pXSwgMiksCiAgICAgICAgICAgIGxvY2FsSWQgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sCiAgICAgICAgICAgIHBsYXllciA9IF9PYmplY3QkZW50cmllcyRfaVsxXTsKCiAgICAgICAgcGxheWVyLnNoaXAgPSB0aGlzLnNoaXBzLmNyZWF0ZSgoaW5kZXggPCAyID8gMC4wNSA6IDAuOTUpICogZ2FtZURpbWVuc2lvbnMud2lkdGgsIChpbmRleCAlIDIgPT09IDAgPyAwLjA1IDogMC45NSkgKiBnYW1lRGltZW5zaW9ucy5oZWlnaHQsICJzaGlwIiArIHBsYXllci5jb2xvcik7CiAgICAgICAgcGxheWVyLnNoaXAubG9jYWxJZCA9IGxvY2FsSWQ7CiAgICAgICAgcGxheWVyLnNoaXAuc2V0Um90YXRpb24oLU1hdGguUEkgLyA0ICogKGluZGV4IDwgMiA/IDEgOiAzKSAqIChpbmRleCAlIDIgKiAyIC0gMSkpOwoKICAgICAgICB2YXIgX2dldFZlbG9jaXR5ID0gZ2V0VmVsb2NpdHkocGxheWVyLnNoaXAucm90YXRpb24sIHRoaXMuc2V0dGluZ3MudmVsb2NpdHkgKiBub3JtYWxpemVycy52ZWxvY2l0eSksCiAgICAgICAgICAgIHggPSBfZ2V0VmVsb2NpdHkueCwKICAgICAgICAgICAgeSA9IF9nZXRWZWxvY2l0eS55OwoKICAgICAgICBwbGF5ZXIuc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgICAgICBwbGF5ZXIuc2hpcC5zZXRDb2xsaWRlV29ybGRCb3VuZHModHJ1ZSk7CiAgICAgICAgaW5kZXgrKzsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIm9uQmlnTW92ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmlnTW92ZWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFBvc2l0aW9uKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRSb3RhdGlvbihkYXRhLnJvdGF0aW9uKTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eSA9IHRoaXMuZ2V0VmVsb2NpdHkoZGF0YS5yb3RhdGlvbiwgdGhpcy5zZXR0aW5ncy52ZWxvY2l0eSAqIHRoaXMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgeCA9IF90aGlzJGdldFZlbG9jaXR5LngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHkueTsKCiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0VmVsb2NpdHkoeCwgeSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibW92ZUJpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZUJpZyhkZWx0YSkgewogICAgICB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uICs9IGRlbHRhICogdGhpcy5zZXR0aW5ncy5hbmd1bGFyVmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLmFuZ3VsYXJWZWxvY2l0eTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTIgPSB0aGlzLmdldFZlbG9jaXR5KHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAucm90YXRpb24sIHRoaXMuc2V0dGluZ3MudmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTIueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTIueTsKCiAgICAgIHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAuc2V0VmVsb2NpdHkoeCwgeSk7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQod2Vic29ja2V0RXZlbnRzLk1PVkVfQklHLCB7CiAgICAgICAgbG9jYWxJZDogdGhpcy5jdXJyZW50UGxheWVyLAogICAgICAgIHJvdGF0aW9uOiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uLAogICAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgICB4OiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLngsCiAgICAgICAgICB5OiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uTGl0dGxlTW92ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTGl0dGxlTW92ZWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFBvc2l0aW9uKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRSb3RhdGlvbihkYXRhLnJvdGF0aW9uKTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTMgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMubWF4VmVsb2NpdHlMaXR0bGUgKiB0aGlzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTMueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTMueTsKCiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0TWF4VmVsb2NpdHkoeCwgeSk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0QWNjZWxlcmF0aW9uKGRhdGEuYWNjZWxlcmF0aW9uLngsIGRhdGEuYWNjZWxlcmF0aW9uLnkpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVMaXR0bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVMaXR0bGUoKSB7fQogIH0sIHsKICAgIGtleTogImNyZWF0ZUJ1bGxldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQnVsbGV0KGRhdGEpIHsKICAgICAgdmFyIGJ1bGxldCA9IHRoaXMucGh5c2ljcy5hZGQuaW1hZ2UoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksICJidWxsZXQiKTsKICAgICAgYnVsbGV0LnJvdGF0aW9uID0gZGF0YS5yb3RhdGlvbjsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTQgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMuc2V0dGluZ3MuYnVsbGV0VmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLmJ1bGxldFZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTQueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTQueTsKCiAgICAgIGJ1bGxldC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgICAgYnVsbGV0LnNob3RCeSA9IGRhdGEubG9jYWxJZDsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uYXZhaWxhYmxlQnVsbGV0cy0tOwogICAgfQogIH0sIHsKICAgIGtleTogInNob290IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG9vdCgpIHsKICAgICAgaWYgKHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLmF2YWlsYWJsZUJ1bGxldHMgPiAwKSB7CiAgICAgICAgdmFyIHNoaXAgPSB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwOwogICAgICAgIHZhciBhbmdsZSA9IHNoaXAucm90YXRpb247CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICBwb3NpdGlvbjogewogICAgICAgICAgICB4OiBzaGlwLnggKyBzaGlwLndpZHRoICogTWF0aC5jb3MoYW5nbGUpLAogICAgICAgICAgICB5OiBzaGlwLnkgKyBzaGlwLndpZHRoICogTWF0aC5zaW4oYW5nbGUpCiAgICAgICAgICB9LAogICAgICAgICAgcm90YXRpb246IGFuZ2xlLAogICAgICAgICAgbG9jYWxJZDogdGhpcy5jdXJyZW50UGxheWVyCiAgICAgICAgfTsKICAgICAgICB0aGlzLnNvY2tldC5lbWl0KHdlYnNvY2tldEV2ZW50cy5TSE9PVCwgZGF0YSk7CiAgICAgICAgdGhpcy5jcmVhdGVCdWxsZXQoZGF0YSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU3RhdGUoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zdGF0ZSA9IGRhdGEuc3RhdGU7CiAgICB9CiAgfSwgewogICAga2V5OiAib25Db2xsaXNpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29sbGlzaW9uKHNoaXAsIGJ1bGxldCkgewogICAgICBidWxsZXQuZGVzdHJveSgpOwogICAgICBzaGlwLmRlc3Ryb3koKTsKICAgICAgLyp0aGlzLnNvY2tldC5lbWl0KHdlYnNvY2tldEV2ZW50cy5DSEFOR0VfU1RBVEUsIHsKICAgICAgICAgIGxvY2FsSWQ6IHNoaXAubG9jYWxJZCwKICAgICAgICAgIHN0YXRlOiAtLXRoaXMucGxheWVyc1tzaGlwLmxvY2FsSWRdLnN0YXRlCiAgICAgIH0pKi8KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbG9hZChkYXRhKSB7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMgPSBkYXRhLmF2YWlsYWJsZUJ1bGxldHM7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gR2FtZVNjZW5lOwp9KFBoYXNlci5TY2VuZSk7CgpleHBvcnQgeyBHYW1lU2NlbmUgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/phaser/GameScene.js"],"names":["Phaser","websocketEvents","defaultSettings","gameDimensions","getVelocity","normalizers","sceneKeys","GameScene","socket","key","game","settings","maxVelocityLittle","currentPlayer","players","localId","color","console","log","require","load","image","textures","addBase64","createGroups","createShips","angle","mag","x","Math","cos","y","sin","ships","physics","add","group","bullets","index","Object","entries","player","ship","create","width","height","setRotation","PI","rotation","velocity","setVelocity","setCollideWorldBounds","data","setPosition","position","delta","angularVelocity","emit","MOVE_BIG","setMaxVelocity","setAcceleration","acceleration","bullet","bulletVelocity","shotBy","availableBullets","SHOOT","createBullet","state","destroy","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport websocketEvents from \"../constants/websocketEvents\";\nimport {defaultSettings, gameDimensions, getVelocity, normalizers, sceneKeys} from \"../constants/gameSettings\";\n\n\nexport default class GameScene extends Phaser.Scene {\n\n    constructor(socket) {\n        super({key: sceneKeys.game});\n\n        this.socket = socket;\n\n/*        this.socket.on(websocketEvents.GAME_MODIFIED, game => {\n            this.settings = game.settings;\n            this.currentPlayer = game.currentPlayer;\n            this.settings.maxVelocityLittle = game.settings.velocity+0.5;\n            this.players = {};\n            game.players.forEach(player => {\n                this.players[player.localId] = player;\n                this.players[player.localId].availableBullets = 3;\n            });\n        });*/\n        this.settings = defaultSettings;\n        this.settings.maxVelocityLittle = 2.5;\n        this.currentPlayer = 0;\n        this.players = {\n            '0': {\n                localId: 0,\n                color: 0\n            },\n            '1': {\n                localId: 1,\n                color: 1\n            },\n            '2': {\n                localId: 2,\n                color: 2\n            }\n        };\n    }\n\n    preload(){\n\n        console.log(require(\"@/assets/ships/ship0.png\"))\n        this.load.image(\"ship0\", require(\"@/assets/ships/ship0.png\"));\n        this.textures.addBase64(\"ship1\", require(\"@/assets/ships/ship1.png\"));\n        this.textures.addBase64(\"ship2\", require(\"@/assets/ships/ship2.png\"));\n        this.textures.addBase64(\"ship3\", require(\"@/assets/ships/ship3.png\"));\n        this.textures.addBase64(\"bullet\", require(\"@/assets/bullet.png\"));\n\n    }\n\n    create(){\n        this.createGroups();\n        this.createShips();\n\n        /*this.socket.on(websocketEvents.MOVE_BIG, data => this.onBigMoved(data));\n        this.socket.on(websocketEvents.MOVE_LITTLE, data => this.onLittleMoved(data));\n        this.socket.on(websocketEvents.SHOOT, data => this.createBullet(data));\n        this.socket.on(websocketEvents.CHANGE_STATE, data => this.updateState(data));\n        this.socket.on(websocketEvents.RELOAD, data => this.reload(data));\n\n        this.rotationKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n        this.input.keyboard.on(\"keyup-ENTER\", this.shoot, this);*/\n\n    }\n\n    /*update(time, delta){\n        if(this.rotationKey.isDown) this.moveBig(delta);\n    }*/\n\n    getVelocity(angle, mag){\n        return {\n            x: Math.cos(angle)*mag,\n            y: Math.sin(angle)*mag\n        }\n    }\n\n    createGroups(){\n        this.ships = this.physics.add.group();\n        this.bullets = this.physics.add.group();\n    }\n\n    createShips(){\n        let index = 0;\n        for(const [localId, player] of Object.entries(this.players)){\n            player.ship = this.ships.create(\n                (index<2 ? 0.05 : 0.95) * gameDimensions.width,\n                ( index%2 === 0 ? 0.05 : 0.95 ) * gameDimensions.height,\n                \"ship\"+player.color\n            )\n            player.ship.localId = localId;\n            player.ship.setRotation(-Math.PI / 4  * ( index < 2 ? 1 : 3) * ( ( index % 2 ) * 2 - 1 ));\n            let {x, y} = getVelocity(player.ship.rotation, this.settings.velocity*normalizers.velocity);\n            player.ship.setVelocity(x, y);\n            player.ship.setCollideWorldBounds(true);\n            index++;\n        }\n    }\n\n    onBigMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.settings.velocity * this.normalizers.velocity);\n        this.players[data.localId].ship.setVelocity(x, y);\n    }\n\n    moveBig(delta){\n        this.players[this.currentPlayer].ship.rotation += delta * this.settings.angularVelocity * this.normalizers.angularVelocity;\n        let {x, y} = this.getVelocity(\n            this.players[this.currentPlayer].ship.rotation,\n            this.settings.velocity * this.normalizers.velocity\n        );\n        this.players[this.currentPlayer].ship.setVelocity(x, y);\n        this.socket.emit(websocketEvents.MOVE_BIG, {\n            localId: this.currentPlayer,\n            rotation: this.players[this.currentPlayer].ship.rotation,\n            position: {\n                x: this.players[this.currentPlayer].ship.x,\n                y: this.players[this.currentPlayer].ship.y\n            }\n        });\n    }\n\n\n    onLittleMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.maxVelocityLittle*this.normalizers.velocity);\n        this.players[data.localId].ship.setMaxVelocity(x, y);\n        this.players[data.localId].ship.setAcceleration(data.acceleration.x, data.acceleration.y);\n    }\n\n    moveLittle(){\n\n    }\n\n\n    createBullet(data){\n        let bullet = this.physics.add.image(data.position.x, data.position.y, \"bullet\");\n        bullet.rotation = data.rotation;\n        let {x, y} = this.getVelocity(data.rotation, this.settings.bulletVelocity*this.normalizers.bulletVelocity);\n        bullet.setVelocity(x, y);\n        bullet.shotBy = data.localId;\n        this.players[data.localId].availableBullets--;\n    }\n\n    shoot(){\n        if(this.players[this.currentPlayer].availableBullets>0){\n            let ship = this.players[this.currentPlayer].ship;\n            let angle = ship.rotation;\n            let data = {\n                position: {\n                    x: ship.x + ship.width*Math.cos(angle),\n                    y: ship.y + ship.width*Math.sin(angle)\n                },\n                rotation: angle,\n                localId: this.currentPlayer\n            };\n            this.socket.emit(websocketEvents.SHOOT, data);\n            this.createBullet(data);\n        }\n    }\n\n\n    updateState(data){\n        this.players[data.localId].state = data.state;\n    }\n\n    onCollision(ship, bullet){\n        bullet.destroy();\n        ship.destroy();\n        /*this.socket.emit(websocketEvents.CHANGE_STATE, {\n            localId: ship.localId,\n            state: --this.players[ship.localId].state\n        })*/\n    }\n\n\n    reload(data){\n        this.players[data.localId].availableBullets = data.availableBullets;\n    }\n\n\n}"]}]}
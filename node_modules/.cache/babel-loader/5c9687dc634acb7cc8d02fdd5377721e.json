{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js","mtime":1616348671786},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1610909371557},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/babel-loader/lib/index.js","mtime":1610909371562},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/node_modules/eslint-loader/index.js","mtime":1610909415268}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9hc3Ryby5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICogYXMgUGhhc2VyIGZyb20gInBoYXNlciI7CmltcG9ydCB7IGNvbG9ycywgc2NlbmVLZXlzIH0gZnJvbSAiLi4vY29uc3RhbnRzL2NvbnN0YW50cyI7CmltcG9ydCBtaXR0IGZyb20gIm1pdHQiOwppbXBvcnQgd2Vic29ja2V0RXZlbnRzIGZyb20gIi4uL2NvbnN0YW50cy93ZWJzb2NrZXRFdmVudHMiOwp3aW5kb3cubWl0dCA9IHdpbmRvdy5taXR0IHx8IG1pdHQoKTsKCnZhciBMb2JieVNjZW5lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUGhhc2VyJFNjZW5lKSB7CiAgX2luaGVyaXRzKExvYmJ5U2NlbmUsIF9QaGFzZXIkU2NlbmUpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKExvYmJ5U2NlbmUpOwoKICBmdW5jdGlvbiBMb2JieVNjZW5lKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2JieVNjZW5lKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHsKICAgICAga2V5OiBzY2VuZUtleXMubG9iYnkKICAgIH0pOwogICAgX3RoaXMubG9iYnkgPSB7CiAgICAgIHBsYXllcnM6IFtdLAogICAgICBjdXJyZW50UGxheWVyOiBudWxsLAogICAgICBzZXR0aW5nczogewogICAgICAgIHRvdGFsVHVybnM6IDUsCiAgICAgICAgdmVsb2NpdHk6IDIsCiAgICAgICAgYW5ndWxhclZlbG9jaXR5OiAyLAogICAgICAgIHJlbG9hZGluZ1ZlbG9jaXR5OiAyCiAgICAgIH0KICAgIH07CiAgICBfdGhpcy5zaGlwcyA9IHt9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKExvYmJ5U2NlbmUsIFt7CiAgICBrZXk6ICJnZXRBbmdsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QW5nbGUoeCwgeSkgewogICAgICB2YXIgYW5nbGU7CgogICAgICBpZiAoeCAhPT0gMCkgewogICAgICAgIGFuZ2xlID0gTWF0aC5hdGFuKHkgLyB4KTsKICAgICAgICBhbmdsZSA9IHggPCAwID8gYW5nbGUgKyBNYXRoLlBJIDogYW5nbGU7CiAgICAgIH0gZWxzZSBpZiAoeSA+PSAwKSBhbmdsZSA9IE1hdGguUEkgLyAyO2Vsc2UgaWYgKHkgPCAwKSBhbmdsZSA9IC1NYXRoLlBJIC8gMjsKCiAgICAgIHJldHVybiBhbmdsZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVOZXdTaGlwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVOZXdTaGlwKGNvbG9yKSB7CiAgICAgIHZhciB4ID0gUGhhc2VyLk1hdGguQmV0d2VlbigwLCB0aGlzLndpZHRoKTsKICAgICAgdmFyIHkgPSBQaGFzZXIuTWF0aC5CZXR3ZWVuKDAsIHRoaXMuaGVpZ2h0KTsKICAgICAgdmFyIHNoaXAgPSB0aGlzLnBoeXNpY3MuYWRkLmltYWdlKHgsIHksICJzaGlwIiArIGNvbG9yKTsKICAgICAgdmFyIGFuZ2xlID0gUGhhc2VyLk1hdGguQmV0d2VlbihNYXRoLlBJIC8gNCwgTWF0aC5QSSAqIDMgLyA0KTsKICAgICAgc2hpcC5zZXRWZWxvY2l0eSh0aGlzLmxvYmJ5LnNldHRpbmdzLnZlbG9jaXR5ICogTWF0aC5jb3MoYW5nbGUpLCB0aGlzLmxvYmJ5LnNldHRpbmdzLnZlbG9jaXR5ICogTWF0aC5zaW4oYW5nbGUpKTsKICAgICAgc2hpcC5yb3RhdGlvbiA9IGFuZ2xlOwogICAgICBzaGlwLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTsKICAgICAgc2hpcC5zZXRCb3VuY2UoMSwgMSk7CiAgICAgIGNvbnNvbGUubG9nKCJuZXdseSBjcmVhdGVkIHNoaXAiLCBzaGlwKTsKICAgICAgcmV0dXJuIHNoaXA7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmluZFBsYXllckJ5SWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRQbGF5ZXJCeUlkKGlkKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sb2JieS5wbGF5ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMubG9iYnkucGxheWVyc1tpXS5sb2NhbElkID09PSBpZCkgcmV0dXJuIHRoaXMubG9iYnkucGxheWVyc1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvL2xvYWQgaW1hZ2VzCiAgICAgIHRoaXMud2lkdGggPSB0aGlzLnN5cy5nYW1lLmNhbnZhcy53aWR0aDsKICAgICAgdGhpcy5oZWlnaHQgPSB0aGlzLnN5cy5nYW1lLmNhbnZhcy5oZWlnaHQ7CiAgICAgIGNvbG9ycy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsKICAgICAgICBfdGhpczIubG9hZC5pbWFnZSgic2hpcCIgKyBpbmRleCwgcmVxdWlyZSgiQC9hc3NldHMvc2hpcCIgKyBpbmRleCArICIucG5nIikpOwogICAgICB9KTsKICAgICAgdGhpcy5sb2FkLmltYWdlKCdwYXJ0aWNsZScsICdodHRwczovL2xhYnMucGhhc2VyLmlvL2Fzc2V0cy9wYXJ0aWNsZXMvcmVkLnBuZycpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHdpbmRvdy5taXR0Lm9uKHdlYnNvY2tldEV2ZW50cy5MT0JCWV9NT0RJRklFRCwgZnVuY3Rpb24gKGdhbWUpIHsKICAgICAgICB2YXIgY3VycmVudGx5UGxheWluZ0lkcyA9IFtdOwogICAgICAgIGdhbWUucGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwbGF5ZXIpIHsKICAgICAgICAgIGN1cnJlbnRseVBsYXlpbmdJZHMucHVzaChwbGF5ZXIubG9jYWxJZCk7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHByZXZpb3VzUGxheWluZ0lkcyA9IFtdOwoKICAgICAgICBfdGhpczMubG9iYnkucGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwbGF5ZXIpIHsKICAgICAgICAgIHByZXZpb3VzUGxheWluZ0lkcy5wdXNoKHBsYXllci5sb2NhbElkKTsKICAgICAgICB9KTsKCiAgICAgICAgX3RoaXMzLmxvYmJ5ID0gZ2FtZTsKICAgICAgICB2YXIgbmV3U2hpcHMgPSB7fTsKICAgICAgICBjdXJyZW50bHlQbGF5aW5nSWRzLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgICBpZiAocHJldmlvdXNQbGF5aW5nSWRzLmluY2x1ZGVzKGlkKSkgewogICAgICAgICAgICBuZXdTaGlwc1tpZF0gPSBfdGhpczMuc2hpcHNbaWRdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3U2hpcHNbaWRdID0gX3RoaXMzLmNyZWF0ZU5ld1NoaXAoX3RoaXMzLmZpbmRQbGF5ZXJCeUlkKGlkKS5jb2xvcik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMzLnNoaXBzID0gbmV3U2hpcHM7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICAvKmlmKEFycmF5LmlzQXJyYXkodGhpcy5sb2JieS5wbGF5ZXJzKSAmJiB0aGlzLmxvYmJ5LnBsYXllcnMubGVuZ3RoPjApIHsKICAgICAgICAgIHRoaXMubG9iYnkucGxheWVycy5mb3JFYWNoKHBsYXllciA9PiB7CiAgICAgICAgICAgICAgbGV0IHt4LCB5fSA9IHRoaXMuc2hpcHNbcGxheWVyLmxvY2FsSWRdLmJvZHkudmVsb2NpdHk7CiAgICAgICAgICAgICAgdGhpcy5zaGlwc1twbGF5ZXIubG9jYWxJZF0ucm90YXRpb24gPSB0aGlzLmdldEFuZ2xlKHgsIHkpOwogICAgICAgICAgICAgIHRoaXMuc2hpcHNbcGxheWVyLmxvY2FsSWRdLnNldFZlbG9jaXR5KAogICAgICAgICAgICAgICAgICB0aGlzLmxvYmJ5LnZlbG9jaXR5ICogTWF0aC5jb3ModGhpcy5zaGlwc1twbGF5ZXIubG9jYWxJZF0ucm90YXRpb24pLAogICAgICAgICAgICAgICAgICB0aGlzLmxvYmJ5LnZlbG9jaXR5ICogTWF0aC5zaW4odGhpcy5zaGlwc1twbGF5ZXIubG9jYWxJZF0ucm90YXRpb24pCiAgICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICB9Ki8KICAgIH0KICB9XSk7CgogIHJldHVybiBMb2JieVNjZW5lOwp9KFBoYXNlci5TY2VuZSk7CgpleHBvcnQgeyBMb2JieVNjZW5lIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/astro.papero.me/src/scenes/LobbyScene.js"],"names":["Phaser","colors","sceneKeys","mitt","websocketEvents","window","LobbyScene","key","lobby","players","currentPlayer","settings","totalTurns","velocity","angularVelocity","reloadingVelocity","ships","x","y","angle","Math","atan","PI","color","Between","width","height","ship","physics","add","image","setVelocity","cos","sin","rotation","setCollideWorldBounds","setBounce","console","log","id","i","length","localId","sys","game","canvas","forEach","value","index","load","require","on","LOBBY_MODIFIED","currentlyPlayingIds","player","push","previousPlayingIds","newShips","includes","createNewShip","findPlayerById","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, sceneKeys} from \"../constants/constants\";\nimport mitt from \"mitt\";\nimport websocketEvents from \"../constants/websocketEvents\";\n\nwindow.mitt = window.mitt || mitt();\nexport default class LobbyScene extends Phaser.Scene {\n\n    constructor() {\n        super({key: sceneKeys.lobby});\n        this.lobby = {\n            players: [],\n            currentPlayer: null,\n            settings: {\n                totalTurns: 5,\n                velocity: 2,\n                angularVelocity: 2,\n                reloadingVelocity: 2\n            }\n        }\n        this.ships = {};\n    }\n\n    getAngle(x, y){\n        let angle;\n        if(x!==0) {\n            angle = Math.atan(y / x);\n            angle = x < 0 ? angle + Math.PI : angle;\n        } else if(y>=0) angle = Math.PI / 2;\n        else if(y<0) angle = -Math.PI / 2;\n        return angle;\n    }\n\n    createNewShip(color){\n        let x = Phaser.Math.Between(0, this.width);\n        let y = Phaser.Math.Between(0, this.height);\n        let ship = this.physics.add.image(x, y, \"ship\"+color);\n        let angle = Phaser.Math.Between(Math.PI/4, Math.PI*3/4);\n        ship.setVelocity(this.lobby.settings.velocity*Math.cos(angle), this.lobby.settings.velocity*Math.sin(angle));\n        ship.rotation = angle;\n        ship.setCollideWorldBounds(true);\n        ship.setBounce(1, 1);\n        console.log(\"newly created ship\", ship);\n        return ship;\n    }\n\n    findPlayerById(id){\n        for(let i = 0; i < this.lobby.players.length; i++){\n            if(this.lobby.players[i].localId === id) return this.lobby.players[i];\n        }\n        return null;\n    }\n\n    preload(){\n\n        //load images\n        this.width = this.sys.game.canvas.width;\n        this.height = this.sys.game.canvas.height;\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ship\"+index+\".png\"))\n        });\n        this.load.image('particle', 'https://labs.phaser.io/assets/particles/red.png');\n\n    }\n\n    create(){\n        window.mitt.on(websocketEvents.LOBBY_MODIFIED, game => {\n            let currentlyPlayingIds = [];\n            game.players.forEach(player => {currentlyPlayingIds.push(player.localId)});\n\n            let previousPlayingIds = [];\n            this.lobby.players.forEach(player => {previousPlayingIds.push(player.localId)});\n\n            this.lobby = game;\n\n            let newShips = {};\n            currentlyPlayingIds.forEach(id => {\n                if(previousPlayingIds.includes(id)){\n                    newShips[id] = this.ships[id];\n                } else {\n                    newShips[id] = this.createNewShip(this.findPlayerById(id).color);\n                }\n            });\n\n            this.ships = newShips;\n        });\n    }\n\n    update(){\n        /*if(Array.isArray(this.lobby.players) && this.lobby.players.length>0) {\n            this.lobby.players.forEach(player => {\n                let {x, y} = this.ships[player.localId].body.velocity;\n                this.ships[player.localId].rotation = this.getAngle(x, y);\n                this.ships[player.localId].setVelocity(\n                    this.lobby.velocity * Math.cos(this.ships[player.localId].rotation),\n                    this.lobby.velocity * Math.sin(this.ships[player.localId].rotation)\n                );\n            });\n        }*/\n    }\n}"]}]}
{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js","mtime":1616677447958},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1616495189815},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1616495190967},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1616495189787},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1616495190059}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL21lZGlhL2phY29wby9Wb2x1bWVEYXRpL0RvY3VtZW50aS9wYXBlcm8udGsvY29zbW9zLnBhcGVyby5tZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLnNpZ24uanMiOwppbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSAicGhhc2VyIjsKaW1wb3J0IHsgY29sb3JzLCBnYW1lRGltZW5zaW9ucywgc2NlbmVLZXlzIH0gZnJvbSAiLi4vY29uc3RhbnRzL2NvbnN0YW50cyI7CmltcG9ydCB3ZWJzb2NrZXRFdmVudHMgZnJvbSAiLi4vY29uc3RhbnRzL3dlYnNvY2tldEV2ZW50cyI7Cgp2YXIgR2FtZVNjZW5lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUGhhc2VyJFNjZW5lKSB7CiAgX2luaGVyaXRzKEdhbWVTY2VuZSwgX1BoYXNlciRTY2VuZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoR2FtZVNjZW5lKTsKCiAgZnVuY3Rpb24gR2FtZVNjZW5lKHNvY2tldCwgZ2FtZSkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHYW1lU2NlbmUpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgewogICAgICBrZXk6IHNjZW5lS2V5cy5nYW1lCiAgICB9KTsKICAgIF90aGlzLnNvY2tldCA9IHNvY2tldDsKICAgIF90aGlzLnNldHRpbmdzID0gZ2FtZS5zZXR0aW5nczsKICAgIF90aGlzLmN1cnJlbnRQbGF5ZXIgPSBnYW1lLmN1cnJlbnRQbGF5ZXI7CiAgICBfdGhpcy5tYXhWZWxvY2l0eUxpdHRsZSA9IGdhbWUuc2V0dGluZ3MudmVsb2NpdHkgKyAwLjU7CiAgICBfdGhpcy5wbGF5ZXJzID0ge307CiAgICBnYW1lLnBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAocGxheWVyKSB7CiAgICAgIF90aGlzLnBsYXllcnNbcGxheWVyLmxvY2FsSWRdID0gcGxheWVyOwogICAgICBfdGhpcy5wbGF5ZXJzW3BsYXllci5sb2NhbElkXS5hdmFpbGFibGVCdWxsZXRzID0gMzsKICAgIH0pOwogICAgX3RoaXMubm9ybWFsaXplcnMgPSB7CiAgICAgIHZlbG9jaXR5OiAxMDAsCiAgICAgIGFuZ3VsYXJWZWxvY2l0eTogTWF0aC5QSSAvIDEyMDAsCiAgICAgIHJlbG9hZGluZ1ZlbG9jaXR5OiAxIC8gMjAwMCwKICAgICAgYnVsbGV0VmVsb2NpdHk6IDIwMAogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhHYW1lU2NlbmUsIFt7CiAgICBrZXk6ICJwcmVsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVsb2FkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbG9ycy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsKICAgICAgICBfdGhpczIubG9hZC5pbWFnZSgic2hpcCIgKyBpbmRleCwgcmVxdWlyZSgiQC9hc3NldHMvc2hpcHMvc2hpcCIgKyBpbmRleCArICIucG5nIikpOwogICAgICB9KTsKICAgICAgdGhpcy50ZXh0dXJlcy5hZGRCYXNlNjQoImJ1bGxldCIsIHJlcXVpcmUoIkAvYXNzZXRzL2J1bGxldC5wbmciKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoKSB7CiAgICAgIHRoaXMuc2hpcHNHcm91cCA9IHRoaXMucGh5c2ljcy5hZGQuZ3JvdXAoKTsKICAgICAgdGhpcy5idWxsZXRzR3JvdXAgPSB0aGlzLnBoeXNpY3MuYWRkLmdyb3VwKCk7CiAgICAgIHRoaXMuc2V0dXBOZXdTaGlwcygpOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuTU9WRV9CSUcsIHRoaXMub25CaWdNb3ZlZCk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5NT1ZFX0xJVFRMRSwgdGhpcy5vbkxpdHRsZU1vdmVkKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLlNIT09ULCB0aGlzLmNyZWF0ZUJ1bGxldCk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5DSEFOR0VfU1RBVEUsIHRoaXMudXBkYXRlU3RhdGUpOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuUkVMT0FELCB0aGlzLnJlbG9hZCk7CiAgICAgIHRoaXMucm90YXRpb25LZXkgPSB0aGlzLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5Q29kZXMuU1BBQ0UpOwogICAgICB0aGlzLmlucHV0LmtleWJvYXJkLm9uKCJrZXl1cC1FTlRFUiIsIHRoaXMuc2hvb3QpOwogICAgICB0aGlzLnBoeXNpY3MuYWRkLmNvbGxpZGVyKHRoaXMuc2hpcHNHcm91cCwgdGhpcy5idWxsZXRzR3JvdXAsIHRoaXMub25Db2xsaXNpb24pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKHRpbWUsIGRlbHRhKSB7CiAgICAgIGlmICh0aGlzLnJvdGF0aW9uS2V5LmlzRG93bikgdGhpcy5tb3ZlQmlnKGRlbHRhKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRWZWxvY2l0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmVsb2NpdHkoYW5nbGUsIG1hZykgewogICAgICByZXR1cm4gewogICAgICAgIHg6IE1hdGguY29zKGFuZ2xlKSAqIG1hZywKICAgICAgICB5OiBNYXRoLnNpbihhbmdsZSkgKiBtYWcKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXR1cE5ld1NoaXBzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXR1cE5ld1NoaXBzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMucGxheWVycy5nZXRLZXlzKCkuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpbmRleCkgewogICAgICAgIF90aGlzMy5wbGF5ZXJzW2tleV0uc2hpcCA9IF90aGlzMy5waHlzaWNzLmFkZC5pbWFnZSgoTWF0aC5zaWduKGluZGV4IC0gMS41KSAvIDIgKyAxKSAqIGdhbWVEaW1lbnNpb25zLndpZHRoLCBpbmRleCAlIDIgKiBnYW1lRGltZW5zaW9ucy5oZWlnaHQsICJzaGlwIiArIF90aGlzMy5wbGF5ZXJzW2tleV0uY29sb3IpOwogICAgICAgIF90aGlzMy5wbGF5ZXJzW2tleV0uc2hpcC5yb3RhdGlvbiA9IC1NYXRoLlBJIC8gNCAqIChpbmRleCA8IDIgPyAxIDogMykgKiAoaW5kZXggJSAyICogMiAtIDEpOwoKICAgICAgICB2YXIgX3RoaXMzJGdldFZlbG9jaXR5ID0gX3RoaXMzLmdldFZlbG9jaXR5KF90aGlzMy5wbGF5ZXJzW2tleV0uc2hpcC5yb3RhdGlvbiwgX3RoaXMzLnNldHRpbmdzLnZlbG9jaXR5ICogX3RoaXMzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgICAgeCA9IF90aGlzMyRnZXRWZWxvY2l0eS54LAogICAgICAgICAgICB5ID0gX3RoaXMzJGdldFZlbG9jaXR5Lnk7CgogICAgICAgIF90aGlzMy5wbGF5ZXJzW2tleV0uc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKCiAgICAgICAgX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTsKCiAgICAgICAgX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwLmxvY2FsSWQgPSBrZXk7CgogICAgICAgIF90aGlzMy5zaGlwc0dyb3VwLmFkZChfdGhpczMucGxheWVyc1trZXldLnNoaXApOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkJpZ01vdmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJpZ01vdmVkKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRQb3NpdGlvbihkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0Um90YXRpb24oZGF0YS5yb3RhdGlvbik7CgogICAgICB2YXIgX3RoaXMkZ2V0VmVsb2NpdHkgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMuc2V0dGluZ3MudmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eS54LAogICAgICAgICAgeSA9IF90aGlzJGdldFZlbG9jaXR5Lnk7CgogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFZlbG9jaXR5KHgsIHkpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVCaWciLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVCaWcoZGVsdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5yb3RhdGlvbiArPSBkZWx0YSAqIHRoaXMuc2V0dGluZ3MuYW5ndWxhclZlbG9jaXR5ICogdGhpcy5ub3JtYWxpemVycy5hbmd1bGFyVmVsb2NpdHk7CgogICAgICB2YXIgX3RoaXMkZ2V0VmVsb2NpdHkyID0gdGhpcy5nZXRWZWxvY2l0eSh0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uLCB0aGlzLnNldHRpbmdzLnZlbG9jaXR5ICogdGhpcy5ub3JtYWxpemVycy52ZWxvY2l0eSksCiAgICAgICAgICB4ID0gX3RoaXMkZ2V0VmVsb2NpdHkyLngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHkyLnk7CgogICAgICB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnNldFZlbG9jaXR5KHgsIHkpOwogICAgICB0aGlzLnNvY2tldC5lbWl0KHdlYnNvY2tldEV2ZW50cy5NT1ZFX0JJRywgewogICAgICAgIGxvY2FsSWQ6IHRoaXMuY3VycmVudFBsYXllciwKICAgICAgICByb3RhdGlvbjogdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5yb3RhdGlvbiwKICAgICAgICBwb3NpdGlvbjogewogICAgICAgICAgeDogdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC54LAogICAgICAgICAgeTogdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC55CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkxpdHRsZU1vdmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkxpdHRsZU1vdmVkKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRQb3NpdGlvbihkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0Um90YXRpb24oZGF0YS5yb3RhdGlvbik7CgogICAgICB2YXIgX3RoaXMkZ2V0VmVsb2NpdHkzID0gdGhpcy5nZXRWZWxvY2l0eShkYXRhLnJvdGF0aW9uLCB0aGlzLm1heFZlbG9jaXR5TGl0dGxlICogdGhpcy5ub3JtYWxpemVycy52ZWxvY2l0eSksCiAgICAgICAgICB4ID0gX3RoaXMkZ2V0VmVsb2NpdHkzLngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHkzLnk7CgogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldE1heFZlbG9jaXR5KHgsIHkpOwogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldEFjY2VsZXJhdGlvbihkYXRhLmFjY2VsZXJhdGlvbi54LCBkYXRhLmFjY2VsZXJhdGlvbi55KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3ZlTGl0dGxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlTGl0dGxlKCkge30KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVCdWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUJ1bGxldChkYXRhKSB7CiAgICAgIHZhciBidWxsZXQgPSB0aGlzLnBoeXNpY3MuYWRkLmltYWdlKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55LCAiYnVsbGV0Iik7CiAgICAgIGJ1bGxldC5yb3RhdGlvbiA9IGRhdGEucm90YXRpb247CgogICAgICB2YXIgX3RoaXMkZ2V0VmVsb2NpdHk0ID0gdGhpcy5nZXRWZWxvY2l0eShkYXRhLnJvdGF0aW9uLCB0aGlzLnNldHRpbmdzLmJ1bGxldFZlbG9jaXR5ICogdGhpcy5ub3JtYWxpemVycy5idWxsZXRWZWxvY2l0eSksCiAgICAgICAgICB4ID0gX3RoaXMkZ2V0VmVsb2NpdHk0LngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHk0Lnk7CgogICAgICBidWxsZXQuc2V0VmVsb2NpdHkoeCwgeSk7CiAgICAgIGJ1bGxldC5zaG90QnkgPSBkYXRhLmxvY2FsSWQ7CiAgICAgIHRoaXMuYnVsbGV0c0dyb3VwLmFkZChidWxsZXQpOwogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5hdmFpbGFibGVCdWxsZXRzLS07CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvb3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob290KCkgewogICAgICBpZiAodGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uYXZhaWxhYmxlQnVsbGV0cyA+IDApIHsKICAgICAgICB2YXIgc2hpcCA9IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXA7CiAgICAgICAgdmFyIGFuZ2xlID0gc2hpcC5yb3RhdGlvbjsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgICAgIHg6IHNoaXAueCArIHNoaXAud2lkdGggKiBNYXRoLmNvcyhhbmdsZSksCiAgICAgICAgICAgIHk6IHNoaXAueSArIHNoaXAud2lkdGggKiBNYXRoLnNpbihhbmdsZSkKICAgICAgICAgIH0sCiAgICAgICAgICByb3RhdGlvbjogYW5nbGUsCiAgICAgICAgICBsb2NhbElkOiB0aGlzLmN1cnJlbnRQbGF5ZXIKICAgICAgICB9OwogICAgICAgIHRoaXMuc29ja2V0LmVtaXQod2Vic29ja2V0RXZlbnRzLlNIT09ULCBkYXRhKTsKICAgICAgICB0aGlzLmNyZWF0ZUJ1bGxldChkYXRhKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVN0YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTdGF0ZShkYXRhKSB7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnN0YXRlID0gZGF0YS5zdGF0ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbkNvbGxpc2lvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db2xsaXNpb24oc2hpcCwgYnVsbGV0KSB7CiAgICAgIGJ1bGxldC5kZXN0cm95KCk7CiAgICAgIHNoaXAuZGVzdHJveSgpOwogICAgICAvKnRoaXMuc29ja2V0LmVtaXQod2Vic29ja2V0RXZlbnRzLkNIQU5HRV9TVEFURSwgewogICAgICAgICAgbG9jYWxJZDogc2hpcC5sb2NhbElkLAogICAgICAgICAgc3RhdGU6IC0tdGhpcy5wbGF5ZXJzW3NoaXAubG9jYWxJZF0uc3RhdGUKICAgICAgfSkqLwogICAgfQogIH0sIHsKICAgIGtleTogInJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVsb2FkKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uYXZhaWxhYmxlQnVsbGV0cyA9IGRhdGEuYXZhaWxhYmxlQnVsbGV0czsKICAgIH0KICB9XSk7CgogIHJldHVybiBHYW1lU2NlbmU7Cn0oUGhhc2VyLlNjZW5lKTsKCmV4cG9ydCB7IEdhbWVTY2VuZSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js"],"names":["Phaser","colors","gameDimensions","sceneKeys","websocketEvents","GameScene","socket","game","key","settings","currentPlayer","maxVelocityLittle","velocity","players","forEach","player","localId","availableBullets","normalizers","angularVelocity","Math","PI","reloadingVelocity","bulletVelocity","value","index","load","image","require","textures","addBase64","shipsGroup","physics","add","group","bulletsGroup","setupNewShips","on","MOVE_BIG","onBigMoved","MOVE_LITTLE","onLittleMoved","SHOOT","createBullet","CHANGE_STATE","updateState","RELOAD","reload","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","shoot","collider","onCollision","time","delta","isDown","moveBig","angle","mag","x","cos","y","sin","getKeys","ship","sign","width","height","color","rotation","getVelocity","setVelocity","setCollideWorldBounds","data","setPosition","position","setRotation","emit","setMaxVelocity","setAcceleration","acceleration","bullet","shotBy","state","destroy","Scene"],"mappings":";;;;;;AAAA,OAAO,KAAKA,MAAZ,MAAwB,QAAxB;AACA,SAAQC,MAAR,EAAgBC,cAAhB,EAAgCC,SAAhC,QAAgD,wBAAhD;AACA,OAAOC,eAAP,MAA4B,8BAA5B;;IAEqBC,S;;;;;AAEjB,qBAAYC,MAAZ,EAAoBC,IAApB,EAA0B;AAAA;;AAAA;;AACtB,8BAAM;AAACC,MAAAA,GAAG,EAAEL,SAAS,CAACI;AAAhB,KAAN;AAEA,UAAKD,MAAL,GAAcA,MAAd;AACA,UAAKG,QAAL,GAAgBF,IAAI,CAACE,QAArB;AACA,UAAKC,aAAL,GAAqBH,IAAI,CAACG,aAA1B;AACA,UAAKC,iBAAL,GAAyBJ,IAAI,CAACE,QAAL,CAAcG,QAAd,GAAuB,GAAhD;AAEA,UAAKC,OAAL,GAAe,EAAf;AACAN,IAAAA,IAAI,CAACM,OAAL,CAAaC,OAAb,CAAqB,UAAAC,MAAM,EAAI;AAC3B,YAAKF,OAAL,CAAaE,MAAM,CAACC,OAApB,IAA+BD,MAA/B;AACA,YAAKF,OAAL,CAAaE,MAAM,CAACC,OAApB,EAA6BC,gBAA7B,GAAgD,CAAhD;AACH,KAHD;AAKA,UAAKC,WAAL,GAAmB;AACfN,MAAAA,QAAQ,EAAE,GADK;AAEfO,MAAAA,eAAe,EAAEC,IAAI,CAACC,EAAL,GAAQ,IAFV;AAGfC,MAAAA,iBAAiB,EAAE,IAAE,IAHN;AAIfC,MAAAA,cAAc,EAAE;AAJD,KAAnB;AAdsB;AAoBzB;;;;WAED,mBAAS;AAAA;;AAELtB,MAAAA,MAAM,CAACa,OAAP,CAAe,UAACU,KAAD,EAAQC,KAAR,EAAkB;AAC7B,QAAA,MAAI,CAACC,IAAL,CAAUC,KAAV,CAAgB,SAAOF,KAAvB,EAA8BG,OAAO,CAAC,wBAAsBH,KAAtB,GAA4B,MAA7B,CAArC;AACH,OAFD;AAGA,WAAKI,QAAL,CAAcC,SAAd,CAAwB,QAAxB,EAAkCF,OAAO,CAAC,qBAAD,CAAzC;AAEH;;;WAED,kBAAQ;AAEJ,WAAKG,UAAL,GAAkB,KAAKC,OAAL,CAAaC,GAAb,CAAiBC,KAAjB,EAAlB;AACA,WAAKC,YAAL,GAAoB,KAAKH,OAAL,CAAaC,GAAb,CAAiBC,KAAjB,EAApB;AAEA,WAAKE,aAAL;AAEA,WAAK9B,MAAL,CAAY+B,EAAZ,CAAejC,eAAe,CAACkC,QAA/B,EAAyC,KAAKC,UAA9C;AACA,WAAKjC,MAAL,CAAY+B,EAAZ,CAAejC,eAAe,CAACoC,WAA/B,EAA4C,KAAKC,aAAjD;AACA,WAAKnC,MAAL,CAAY+B,EAAZ,CAAejC,eAAe,CAACsC,KAA/B,EAAsC,KAAKC,YAA3C;AACA,WAAKrC,MAAL,CAAY+B,EAAZ,CAAejC,eAAe,CAACwC,YAA/B,EAA6C,KAAKC,WAAlD;AACA,WAAKvC,MAAL,CAAY+B,EAAZ,CAAejC,eAAe,CAAC0C,MAA/B,EAAuC,KAAKC,MAA5C;AAEA,WAAKC,WAAL,GAAmB,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,MAApB,CAA2BnD,MAAM,CAACoD,KAAP,CAAaC,QAAb,CAAsBC,QAAtB,CAA+BC,KAA1D,CAAnB;AACA,WAAKN,KAAL,CAAWC,QAAX,CAAoBb,EAApB,CAAuB,aAAvB,EAAsC,KAAKmB,KAA3C;AAEA,WAAKxB,OAAL,CAAaC,GAAb,CAAiBwB,QAAjB,CAA0B,KAAK1B,UAA/B,EAA2C,KAAKI,YAAhD,EAA8D,KAAKuB,WAAnE;AACH;;;WAED,gBAAOC,IAAP,EAAaC,KAAb,EAAmB;AACf,UAAG,KAAKZ,WAAL,CAAiBa,MAApB,EAA4B,KAAKC,OAAL,CAAaF,KAAb;AAC/B;;;WAED,qBAAYG,KAAZ,EAAmBC,GAAnB,EAAuB;AACnB,aAAO;AACHC,QAAAA,CAAC,EAAE7C,IAAI,CAAC8C,GAAL,CAASH,KAAT,IAAgBC,GADhB;AAEHG,QAAAA,CAAC,EAAE/C,IAAI,CAACgD,GAAL,CAASL,KAAT,IAAgBC;AAFhB,OAAP;AAIH;;;WAED,yBAAe;AAAA;;AACX,WAAKnD,OAAL,CAAawD,OAAb,GAAuBvD,OAAvB,CAA+B,UAACN,GAAD,EAAMiB,KAAN,EAAgB;AAC3C,QAAA,MAAI,CAACZ,OAAL,CAAaL,GAAb,EAAkB8D,IAAlB,GAAyB,MAAI,CAACtC,OAAL,CAAaC,GAAb,CAAiBN,KAAjB,CACrB,CAAEP,IAAI,CAACmD,IAAL,CAAU9C,KAAK,GAAC,GAAhB,IAAuB,CAAvB,GAA2B,CAA7B,IAAmCvB,cAAc,CAACsE,KAD7B,EAEnB/C,KAAK,GAAG,CAAV,GAAgBvB,cAAc,CAACuE,MAFV,EAGrB,SAAO,MAAI,CAAC5D,OAAL,CAAaL,GAAb,EAAkBkE,KAHJ,CAAzB;AAKA,QAAA,MAAI,CAAC7D,OAAL,CAAaL,GAAb,EAAkB8D,IAAlB,CAAuBK,QAAvB,GAAkC,CAACvD,IAAI,CAACC,EAAN,GAAW,CAAX,IAAkBI,KAAK,GAAG,CAAR,GAAY,CAAZ,GAAgB,CAAlC,KAA2CA,KAAK,GAAG,CAAV,GAAgB,CAAhB,GAAoB,CAA7D,CAAlC;;AAN2C,iCAO9B,MAAI,CAACmD,WAAL,CAAiB,MAAI,CAAC/D,OAAL,CAAaL,GAAb,EAAkB8D,IAAlB,CAAuBK,QAAxC,EAAkD,MAAI,CAAClE,QAAL,CAAcG,QAAd,GAAuB,MAAI,CAACM,WAAL,CAAiBN,QAA1F,CAP8B;AAAA,YAOtCqD,CAPsC,sBAOtCA,CAPsC;AAAA,YAOnCE,CAPmC,sBAOnCA,CAPmC;;AAQ3C,QAAA,MAAI,CAACtD,OAAL,CAAaL,GAAb,EAAkB8D,IAAlB,CAAuBO,WAAvB,CAAmCZ,CAAnC,EAAsCE,CAAtC;;AACA,QAAA,MAAI,CAACtD,OAAL,CAAaL,GAAb,EAAkB8D,IAAlB,CAAuBQ,qBAAvB,CAA6C,IAA7C;;AACA,QAAA,MAAI,CAACjE,OAAL,CAAaL,GAAb,EAAkB8D,IAAlB,CAAuBtD,OAAvB,GAAiCR,GAAjC;;AACA,QAAA,MAAI,CAACuB,UAAL,CAAgBE,GAAhB,CAAoB,MAAI,CAACpB,OAAL,CAAaL,GAAb,EAAkB8D,IAAtC;AACH,OAZD;AAaH;;;WAED,oBAAWS,IAAX,EAAgB;AACZ,WAAKlE,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BsD,IAA3B,CAAgCU,WAAhC,CAA4CD,IAAI,CAACE,QAAL,CAAchB,CAA1D,EAA6Dc,IAAI,CAACE,QAAL,CAAcd,CAA3E;AACA,WAAKtD,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BsD,IAA3B,CAAgCY,WAAhC,CAA4CH,IAAI,CAACJ,QAAjD;;AAFY,8BAGC,KAAKC,WAAL,CAAiBG,IAAI,CAACJ,QAAtB,EAAgC,KAAKlE,QAAL,CAAcG,QAAd,GAAyB,KAAKM,WAAL,CAAiBN,QAA1E,CAHD;AAAA,UAGPqD,CAHO,qBAGPA,CAHO;AAAA,UAGJE,CAHI,qBAGJA,CAHI;;AAIZ,WAAKtD,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BsD,IAA3B,CAAgCO,WAAhC,CAA4CZ,CAA5C,EAA+CE,CAA/C;AACH;;;WAED,iBAAQP,KAAR,EAAc;AACV,WAAK/C,OAAL,CAAa,KAAKH,aAAlB,EAAiC4D,IAAjC,CAAsCK,QAAtC,IAAkDf,KAAK,GAAG,KAAKnD,QAAL,CAAcU,eAAtB,GAAwC,KAAKD,WAAL,CAAiBC,eAA3G;;AADU,+BAEG,KAAKyD,WAAL,CACT,KAAK/D,OAAL,CAAa,KAAKH,aAAlB,EAAiC4D,IAAjC,CAAsCK,QAD7B,EAET,KAAKlE,QAAL,CAAcG,QAAd,GAAyB,KAAKM,WAAL,CAAiBN,QAFjC,CAFH;AAAA,UAELqD,CAFK,sBAELA,CAFK;AAAA,UAEFE,CAFE,sBAEFA,CAFE;;AAMV,WAAKtD,OAAL,CAAa,KAAKH,aAAlB,EAAiC4D,IAAjC,CAAsCO,WAAtC,CAAkDZ,CAAlD,EAAqDE,CAArD;AACA,WAAK7D,MAAL,CAAY6E,IAAZ,CAAiB/E,eAAe,CAACkC,QAAjC,EAA2C;AACvCtB,QAAAA,OAAO,EAAE,KAAKN,aADyB;AAEvCiE,QAAAA,QAAQ,EAAE,KAAK9D,OAAL,CAAa,KAAKH,aAAlB,EAAiC4D,IAAjC,CAAsCK,QAFT;AAGvCM,QAAAA,QAAQ,EAAE;AACNhB,UAAAA,CAAC,EAAE,KAAKpD,OAAL,CAAa,KAAKH,aAAlB,EAAiC4D,IAAjC,CAAsCL,CADnC;AAENE,UAAAA,CAAC,EAAE,KAAKtD,OAAL,CAAa,KAAKH,aAAlB,EAAiC4D,IAAjC,CAAsCH;AAFnC;AAH6B,OAA3C;AAQH;;;WAGD,uBAAcY,IAAd,EAAmB;AACf,WAAKlE,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BsD,IAA3B,CAAgCU,WAAhC,CAA4CD,IAAI,CAACE,QAAL,CAAchB,CAA1D,EAA6Dc,IAAI,CAACE,QAAL,CAAcd,CAA3E;AACA,WAAKtD,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BsD,IAA3B,CAAgCY,WAAhC,CAA4CH,IAAI,CAACJ,QAAjD;;AAFe,+BAGF,KAAKC,WAAL,CAAiBG,IAAI,CAACJ,QAAtB,EAAgC,KAAKhE,iBAAL,GAAuB,KAAKO,WAAL,CAAiBN,QAAxE,CAHE;AAAA,UAGVqD,CAHU,sBAGVA,CAHU;AAAA,UAGPE,CAHO,sBAGPA,CAHO;;AAIf,WAAKtD,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BsD,IAA3B,CAAgCc,cAAhC,CAA+CnB,CAA/C,EAAkDE,CAAlD;AACA,WAAKtD,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BsD,IAA3B,CAAgCe,eAAhC,CAAgDN,IAAI,CAACO,YAAL,CAAkBrB,CAAlE,EAAqEc,IAAI,CAACO,YAAL,CAAkBnB,CAAvF;AACH;;;WAED,sBAAY,CAEX;;;WAGD,sBAAaY,IAAb,EAAkB;AACd,UAAIQ,MAAM,GAAG,KAAKvD,OAAL,CAAaC,GAAb,CAAiBN,KAAjB,CAAuBoD,IAAI,CAACE,QAAL,CAAchB,CAArC,EAAwCc,IAAI,CAACE,QAAL,CAAcd,CAAtD,EAAyD,QAAzD,CAAb;AACAoB,MAAAA,MAAM,CAACZ,QAAP,GAAkBI,IAAI,CAACJ,QAAvB;;AAFc,+BAGD,KAAKC,WAAL,CAAiBG,IAAI,CAACJ,QAAtB,EAAgC,KAAKlE,QAAL,CAAcc,cAAd,GAA6B,KAAKL,WAAL,CAAiBK,cAA9E,CAHC;AAAA,UAGT0C,CAHS,sBAGTA,CAHS;AAAA,UAGNE,CAHM,sBAGNA,CAHM;;AAIdoB,MAAAA,MAAM,CAACV,WAAP,CAAmBZ,CAAnB,EAAsBE,CAAtB;AACAoB,MAAAA,MAAM,CAACC,MAAP,GAAgBT,IAAI,CAAC/D,OAArB;AACA,WAAKmB,YAAL,CAAkBF,GAAlB,CAAsBsD,MAAtB;AACA,WAAK1E,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BC,gBAA3B;AACH;;;WAED,iBAAO;AACH,UAAG,KAAKJ,OAAL,CAAa,KAAKH,aAAlB,EAAiCO,gBAAjC,GAAkD,CAArD,EAAuD;AACnD,YAAIqD,IAAI,GAAG,KAAKzD,OAAL,CAAa,KAAKH,aAAlB,EAAiC4D,IAA5C;AACA,YAAIP,KAAK,GAAGO,IAAI,CAACK,QAAjB;AACA,YAAII,IAAI,GAAG;AACPE,UAAAA,QAAQ,EAAE;AACNhB,YAAAA,CAAC,EAAEK,IAAI,CAACL,CAAL,GAASK,IAAI,CAACE,KAAL,GAAWpD,IAAI,CAAC8C,GAAL,CAASH,KAAT,CADjB;AAENI,YAAAA,CAAC,EAAEG,IAAI,CAACH,CAAL,GAASG,IAAI,CAACE,KAAL,GAAWpD,IAAI,CAACgD,GAAL,CAASL,KAAT;AAFjB,WADH;AAKPY,UAAAA,QAAQ,EAAEZ,KALH;AAMP/C,UAAAA,OAAO,EAAE,KAAKN;AANP,SAAX;AAQA,aAAKJ,MAAL,CAAY6E,IAAZ,CAAiB/E,eAAe,CAACsC,KAAjC,EAAwCqC,IAAxC;AACA,aAAKpC,YAAL,CAAkBoC,IAAlB;AACH;AACJ;;;WAGD,qBAAYA,IAAZ,EAAiB;AACb,WAAKlE,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2ByE,KAA3B,GAAmCV,IAAI,CAACU,KAAxC;AACH;;;WAED,qBAAYnB,IAAZ,EAAkBiB,MAAlB,EAAyB;AACrBA,MAAAA,MAAM,CAACG,OAAP;AACApB,MAAAA,IAAI,CAACoB,OAAL;AACA;AACR;AACA;AACA;AACK;;;WAGD,gBAAOX,IAAP,EAAY;AACR,WAAKlE,OAAL,CAAakE,IAAI,CAAC/D,OAAlB,EAA2BC,gBAA3B,GAA8C8D,IAAI,CAAC9D,gBAAnD;AACH;;;;EAjKkCjB,MAAM,CAAC2F,K;;SAAzBtF,S","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, gameDimensions, sceneKeys} from \"../constants/constants\";\nimport websocketEvents from \"../constants/websocketEvents\";\n\nexport default class GameScene extends Phaser.Scene {\n\n    constructor(socket, game) {\n        super({key: sceneKeys.game});\n\n        this.socket = socket;\n        this.settings = game.settings;\n        this.currentPlayer = game.currentPlayer;\n        this.maxVelocityLittle = game.settings.velocity+0.5;\n\n        this.players = {};\n        game.players.forEach(player => {\n            this.players[player.localId] = player;\n            this.players[player.localId].availableBullets = 3;\n        });\n\n        this.normalizers = {\n            velocity: 100,\n            angularVelocity: Math.PI/1200,\n            reloadingVelocity: 1/2000,\n            bulletVelocity: 200\n        }\n    }\n\n    preload(){\n\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ships/ship\"+index+\".png\"));\n        });\n        this.textures.addBase64(\"bullet\", require(\"@/assets/bullet.png\"));\n\n    }\n\n    create(){\n\n        this.shipsGroup = this.physics.add.group();\n        this.bulletsGroup = this.physics.add.group();\n\n        this.setupNewShips();\n\n        this.socket.on(websocketEvents.MOVE_BIG, this.onBigMoved);\n        this.socket.on(websocketEvents.MOVE_LITTLE, this.onLittleMoved);\n        this.socket.on(websocketEvents.SHOOT, this.createBullet);\n        this.socket.on(websocketEvents.CHANGE_STATE, this.updateState);\n        this.socket.on(websocketEvents.RELOAD, this.reload);\n\n        this.rotationKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n        this.input.keyboard.on(\"keyup-ENTER\", this.shoot);\n\n        this.physics.add.collider(this.shipsGroup, this.bulletsGroup, this.onCollision);\n    }\n\n    update(time, delta){\n        if(this.rotationKey.isDown) this.moveBig(delta);\n    }\n\n    getVelocity(angle, mag){\n        return {\n            x: Math.cos(angle)*mag,\n            y: Math.sin(angle)*mag\n        }\n    }\n\n    setupNewShips(){\n        this.players.getKeys().forEach((key, index) => {\n            this.players[key].ship = this.physics.add.image(\n                ( Math.sign(index-1.5) / 2 + 1 ) * gameDimensions.width,\n                ( index % 2 ) * gameDimensions.height,\n                \"ship\"+this.players[key].color\n            );\n            this.players[key].ship.rotation = -Math.PI / 4  * ( index < 2 ? 1 : 3) * ( ( index % 2 ) * 2 - 1 );\n            let {x, y} = this.getVelocity(this.players[key].ship.rotation, this.settings.velocity*this.normalizers.velocity);\n            this.players[key].ship.setVelocity(x, y);\n            this.players[key].ship.setCollideWorldBounds(true);\n            this.players[key].ship.localId = key;\n            this.shipsGroup.add(this.players[key].ship);\n        });\n    }\n\n    onBigMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.settings.velocity * this.normalizers.velocity);\n        this.players[data.localId].ship.setVelocity(x, y);\n    }\n\n    moveBig(delta){\n        this.players[this.currentPlayer].ship.rotation += delta * this.settings.angularVelocity * this.normalizers.angularVelocity;\n        let {x, y} = this.getVelocity(\n            this.players[this.currentPlayer].ship.rotation,\n            this.settings.velocity * this.normalizers.velocity\n        );\n        this.players[this.currentPlayer].ship.setVelocity(x, y);\n        this.socket.emit(websocketEvents.MOVE_BIG, {\n            localId: this.currentPlayer,\n            rotation: this.players[this.currentPlayer].ship.rotation,\n            position: {\n                x: this.players[this.currentPlayer].ship.x,\n                y: this.players[this.currentPlayer].ship.y\n            }\n        });\n    }\n\n\n    onLittleMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.maxVelocityLittle*this.normalizers.velocity);\n        this.players[data.localId].ship.setMaxVelocity(x, y);\n        this.players[data.localId].ship.setAcceleration(data.acceleration.x, data.acceleration.y);\n    }\n\n    moveLittle(){\n\n    }\n\n\n    createBullet(data){\n        let bullet = this.physics.add.image(data.position.x, data.position.y, \"bullet\");\n        bullet.rotation = data.rotation;\n        let {x, y} = this.getVelocity(data.rotation, this.settings.bulletVelocity*this.normalizers.bulletVelocity);\n        bullet.setVelocity(x, y);\n        bullet.shotBy = data.localId;\n        this.bulletsGroup.add(bullet);\n        this.players[data.localId].availableBullets--;\n    }\n\n    shoot(){\n        if(this.players[this.currentPlayer].availableBullets>0){\n            let ship = this.players[this.currentPlayer].ship;\n            let angle = ship.rotation;\n            let data = {\n                position: {\n                    x: ship.x + ship.width*Math.cos(angle),\n                    y: ship.y + ship.width*Math.sin(angle)\n                },\n                rotation: angle,\n                localId: this.currentPlayer\n            };\n            this.socket.emit(websocketEvents.SHOOT, data);\n            this.createBullet(data);\n        }\n    }\n\n\n    updateState(data){\n        this.players[data.localId].state = data.state;\n    }\n\n    onCollision(ship, bullet){\n        bullet.destroy();\n        ship.destroy();\n        /*this.socket.emit(websocketEvents.CHANGE_STATE, {\n            localId: ship.localId,\n            state: --this.players[ship.localId].state\n        })*/\n    }\n\n\n    reload(data){\n        this.players[data.localId].availableBullets = data.availableBullets;\n    }\n\n\n}"]}]}
{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js","mtime":1616704214771},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1616495189815},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1616495190967},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1616495189787},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1616495190059}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL21lZGlhL2phY29wby9Wb2x1bWVEYXRpL0RvY3VtZW50aS9wYXBlcm8udGsvY29zbW9zLnBhcGVyby5tZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAqIGFzIFBoYXNlciBmcm9tICJwaGFzZXIiOwppbXBvcnQgeyBjb2xvcnMsIGdhbWVEaW1lbnNpb25zLCBzY2VuZUtleXMgfSBmcm9tICIuLi9jb25zdGFudHMvY29uc3RhbnRzIjsKaW1wb3J0IHdlYnNvY2tldEV2ZW50cyBmcm9tICIuLi9jb25zdGFudHMvd2Vic29ja2V0RXZlbnRzIjsKCnZhciBHYW1lU2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QaGFzZXIkU2NlbmUpIHsKICBfaW5oZXJpdHMoR2FtZVNjZW5lLCBfUGhhc2VyJFNjZW5lKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihHYW1lU2NlbmUpOwoKICBmdW5jdGlvbiBHYW1lU2NlbmUoc29ja2V0LCBnYW1lKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWVTY2VuZSk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7CiAgICAgIGtleTogc2NlbmVLZXlzLmdhbWUKICAgIH0pOwogICAgX3RoaXMuc29ja2V0ID0gc29ja2V0OwogICAgX3RoaXMuc2V0dGluZ3MgPSBnYW1lLnNldHRpbmdzOwogICAgX3RoaXMuY3VycmVudFBsYXllciA9IGdhbWUuY3VycmVudFBsYXllcjsKICAgIF90aGlzLm1heFZlbG9jaXR5TGl0dGxlID0gZ2FtZS5zZXR0aW5ncy52ZWxvY2l0eSArIDAuNTsKICAgIF90aGlzLnBsYXllcnMgPSB7fTsKICAgIGdhbWUucGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwbGF5ZXIpIHsKICAgICAgX3RoaXMucGxheWVyc1twbGF5ZXIubG9jYWxJZF0gPSBwbGF5ZXI7CiAgICAgIF90aGlzLnBsYXllcnNbcGxheWVyLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMgPSAzOwogICAgfSk7CiAgICBfdGhpcy5ub3JtYWxpemVycyA9IHsKICAgICAgdmVsb2NpdHk6IDEwMCwKICAgICAgYW5ndWxhclZlbG9jaXR5OiBNYXRoLlBJIC8gMTIwMCwKICAgICAgcmVsb2FkaW5nVmVsb2NpdHk6IDEgLyAyMDAwLAogICAgICBidWxsZXRWZWxvY2l0eTogMjAwCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEdhbWVTY2VuZSwgW3sKICAgIGtleTogInByZWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZWxvYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29sb3JzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIF90aGlzMi5sb2FkLmltYWdlKCJzaGlwIiArIGluZGV4LCByZXF1aXJlKCJAL2Fzc2V0cy9zaGlwcy9zaGlwIiArIGluZGV4ICsgIi5wbmciKSk7CiAgICAgIH0pOwogICAgICB0aGlzLnRleHR1cmVzLmFkZEJhc2U2NCgiYnVsbGV0IiwgcmVxdWlyZSgiQC9hc3NldHMvYnVsbGV0LnBuZyIpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLnNoaXBzR3JvdXAgPSB0aGlzLnBoeXNpY3MuYWRkLmdyb3VwKHsKICAgICAgICBjb2xsaWRlV29ybGRCb3VuZHM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuYnVsbGV0c0dyb3VwID0gdGhpcy5waHlzaWNzLmFkZC5ncm91cCh7CiAgICAgICAgY29sbGlkZVdvcmxkQm91bmRzOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLnNldHVwTmV3U2hpcHMoKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLk1PVkVfQklHLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMub25CaWdNb3ZlZChkYXRhKTsKICAgICAgfSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5NT1ZFX0xJVFRMRSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLm9uTGl0dGxlTW92ZWQoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMy5jcmVhdGVCdWxsZXQoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMudXBkYXRlU3RhdGUoZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuUkVMT0FELCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBfdGhpczMucmVsb2FkKGRhdGEpOwogICAgICB9KTsKICAgICAgdGhpcy5yb3RhdGlvbktleSA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5TUEFDRSk7CiAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQub24oImtleXVwLUVOVEVSIiwgdGhpcy5zaG9vdCwgdGhpcyk7CiAgICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIodGhpcy5zaGlwc0dyb3VwLCB0aGlzLmJ1bGxldHNHcm91cCwgdGhpcy5vbkNvbGxpc2lvbik7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUodGltZSwgZGVsdGEpIHsKICAgICAgaWYgKHRoaXMucm90YXRpb25LZXkuaXNEb3duKSB0aGlzLm1vdmVCaWcoZGVsdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFZlbG9jaXR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWZWxvY2l0eShhbmdsZSwgbWFnKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogTWF0aC5jb3MoYW5nbGUpICogbWFnLAogICAgICAgIHk6IE1hdGguc2luKGFuZ2xlKSAqIG1hZwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInNldHVwTmV3U2hpcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwTmV3U2hpcHMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgT2JqZWN0LmtleXModGhpcy5wbGF5ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGluZGV4KSB7CiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwID0gX3RoaXM0LnBoeXNpY3MuYWRkLmltYWdlKChpbmRleCA8IDIgPyAwLjA1IDogMC45NSkgKiBnYW1lRGltZW5zaW9ucy53aWR0aCwgKGluZGV4ICUgMiA9PT0gMCA/IDAuMDUgOiAwLjk1KSAqIGdhbWVEaW1lbnNpb25zLmhlaWdodCwgInNoaXAiICsgX3RoaXM0LnBsYXllcnNba2V5XS5jb2xvcik7CiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwLnJvdGF0aW9uID0gLU1hdGguUEkgLyA0ICogKGluZGV4IDwgMiA/IDEgOiAzKSAqIChpbmRleCAlIDIgKiAyIC0gMSk7CiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwLmxvY2FsSWQgPSBrZXk7CgogICAgICAgIF90aGlzNC5zaGlwc0dyb3VwLmFkZChfdGhpczQucGxheWVyc1trZXldLnNoaXApOwoKICAgICAgICB2YXIgX3RoaXM0JGdldFZlbG9jaXR5ID0gX3RoaXM0LmdldFZlbG9jaXR5KF90aGlzNC5wbGF5ZXJzW2tleV0uc2hpcC5yb3RhdGlvbiwgX3RoaXM0LnNldHRpbmdzLnZlbG9jaXR5ICogX3RoaXM0Lm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgICAgeCA9IF90aGlzNCRnZXRWZWxvY2l0eS54LAogICAgICAgICAgICB5ID0gX3RoaXM0JGdldFZlbG9jaXR5Lnk7CgogICAgICAgIF90aGlzNC5wbGF5ZXJzW2tleV0uc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKCiAgICAgICAgX3RoaXM0LnBsYXllcnNba2V5XS5zaGlwLnNldENvbGxpZGVXb3JsZEJvdW5kcyh0cnVlKTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGxheWVycyk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25CaWdNb3ZlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25CaWdNb3ZlZChkYXRhKSB7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0UG9zaXRpb24oZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnkpOwogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFJvdGF0aW9uKGRhdGEucm90YXRpb24pOwoKICAgICAgdmFyIF90aGlzJGdldFZlbG9jaXR5ID0gdGhpcy5nZXRWZWxvY2l0eShkYXRhLnJvdGF0aW9uLCB0aGlzLnNldHRpbmdzLnZlbG9jaXR5ICogdGhpcy5ub3JtYWxpemVycy52ZWxvY2l0eSksCiAgICAgICAgICB4ID0gX3RoaXMkZ2V0VmVsb2NpdHkueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eS55OwoKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3ZlQmlnIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlQmlnKGRlbHRhKSB7CiAgICAgIHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAucm90YXRpb24gKz0gZGVsdGEgKiB0aGlzLnNldHRpbmdzLmFuZ3VsYXJWZWxvY2l0eSAqIHRoaXMubm9ybWFsaXplcnMuYW5ndWxhclZlbG9jaXR5OwoKICAgICAgdmFyIF90aGlzJGdldFZlbG9jaXR5MiA9IHRoaXMuZ2V0VmVsb2NpdHkodGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5yb3RhdGlvbiwgdGhpcy5zZXR0aW5ncy52ZWxvY2l0eSAqIHRoaXMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgeCA9IF90aGlzJGdldFZlbG9jaXR5Mi54LAogICAgICAgICAgeSA9IF90aGlzJGdldFZlbG9jaXR5Mi55OwoKICAgICAgdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgICAgdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuTU9WRV9CSUcsIHsKICAgICAgICBsb2NhbElkOiB0aGlzLmN1cnJlbnRQbGF5ZXIsCiAgICAgICAgcm90YXRpb246IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAucm90YXRpb24sCiAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgIHg6IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAueCwKICAgICAgICAgIHk6IHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAueQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAib25MaXR0bGVNb3ZlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25MaXR0bGVNb3ZlZChkYXRhKSB7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0UG9zaXRpb24oZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnkpOwogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFJvdGF0aW9uKGRhdGEucm90YXRpb24pOwoKICAgICAgdmFyIF90aGlzJGdldFZlbG9jaXR5MyA9IHRoaXMuZ2V0VmVsb2NpdHkoZGF0YS5yb3RhdGlvbiwgdGhpcy5tYXhWZWxvY2l0eUxpdHRsZSAqIHRoaXMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgeCA9IF90aGlzJGdldFZlbG9jaXR5My54LAogICAgICAgICAgeSA9IF90aGlzJGdldFZlbG9jaXR5My55OwoKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRNYXhWZWxvY2l0eSh4LCB5KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRBY2NlbGVyYXRpb24oZGF0YS5hY2NlbGVyYXRpb24ueCwgZGF0YS5hY2NlbGVyYXRpb24ueSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibW92ZUxpdHRsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZUxpdHRsZSgpIHt9CiAgfSwgewogICAga2V5OiAiY3JlYXRlQnVsbGV0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVCdWxsZXQoZGF0YSkgewogICAgICB2YXIgYnVsbGV0ID0gdGhpcy5waHlzaWNzLmFkZC5pbWFnZShkYXRhLnBvc2l0aW9uLngsIGRhdGEucG9zaXRpb24ueSwgImJ1bGxldCIpOwogICAgICBidWxsZXQucm90YXRpb24gPSBkYXRhLnJvdGF0aW9uOwoKICAgICAgdmFyIF90aGlzJGdldFZlbG9jaXR5NCA9IHRoaXMuZ2V0VmVsb2NpdHkoZGF0YS5yb3RhdGlvbiwgdGhpcy5zZXR0aW5ncy5idWxsZXRWZWxvY2l0eSAqIHRoaXMubm9ybWFsaXplcnMuYnVsbGV0VmVsb2NpdHkpLAogICAgICAgICAgeCA9IF90aGlzJGdldFZlbG9jaXR5NC54LAogICAgICAgICAgeSA9IF90aGlzJGdldFZlbG9jaXR5NC55OwoKICAgICAgYnVsbGV0LnNldFZlbG9jaXR5KHgsIHkpOwogICAgICBidWxsZXQuc2hvdEJ5ID0gZGF0YS5sb2NhbElkOwogICAgICB0aGlzLmJ1bGxldHNHcm91cC5hZGQoYnVsbGV0KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uYXZhaWxhYmxlQnVsbGV0cy0tOwogICAgfQogIH0sIHsKICAgIGtleTogInNob290IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG9vdCgpIHsKICAgICAgaWYgKHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLmF2YWlsYWJsZUJ1bGxldHMgPiAwKSB7CiAgICAgICAgdmFyIHNoaXAgPSB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwOwogICAgICAgIHZhciBhbmdsZSA9IHNoaXAucm90YXRpb247CiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICBwb3NpdGlvbjogewogICAgICAgICAgICB4OiBzaGlwLnggKyBzaGlwLndpZHRoICogTWF0aC5jb3MoYW5nbGUpLAogICAgICAgICAgICB5OiBzaGlwLnkgKyBzaGlwLndpZHRoICogTWF0aC5zaW4oYW5nbGUpCiAgICAgICAgICB9LAogICAgICAgICAgcm90YXRpb246IGFuZ2xlLAogICAgICAgICAgbG9jYWxJZDogdGhpcy5jdXJyZW50UGxheWVyCiAgICAgICAgfTsKICAgICAgICB0aGlzLnNvY2tldC5lbWl0KHdlYnNvY2tldEV2ZW50cy5TSE9PVCwgZGF0YSk7CiAgICAgICAgdGhpcy5jcmVhdGVCdWxsZXQoZGF0YSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVTdGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlU3RhdGUoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zdGF0ZSA9IGRhdGEuc3RhdGU7CiAgICB9CiAgfSwgewogICAga2V5OiAib25Db2xsaXNpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29sbGlzaW9uKHNoaXAsIGJ1bGxldCkgewogICAgICBidWxsZXQuZGVzdHJveSgpOwogICAgICBzaGlwLmRlc3Ryb3koKTsKICAgICAgLyp0aGlzLnNvY2tldC5lbWl0KHdlYnNvY2tldEV2ZW50cy5DSEFOR0VfU1RBVEUsIHsKICAgICAgICAgIGxvY2FsSWQ6IHNoaXAubG9jYWxJZCwKICAgICAgICAgIHN0YXRlOiAtLXRoaXMucGxheWVyc1tzaGlwLmxvY2FsSWRdLnN0YXRlCiAgICAgIH0pKi8KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbG9hZChkYXRhKSB7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMgPSBkYXRhLmF2YWlsYWJsZUJ1bGxldHM7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gR2FtZVNjZW5lOwp9KFBoYXNlci5TY2VuZSk7CgpleHBvcnQgeyBHYW1lU2NlbmUgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js"],"names":["Phaser","colors","gameDimensions","sceneKeys","websocketEvents","GameScene","socket","game","key","settings","currentPlayer","maxVelocityLittle","velocity","players","forEach","player","localId","availableBullets","normalizers","angularVelocity","Math","PI","reloadingVelocity","bulletVelocity","value","index","load","image","require","textures","addBase64","shipsGroup","physics","add","group","collideWorldBounds","bulletsGroup","setupNewShips","on","MOVE_BIG","data","onBigMoved","MOVE_LITTLE","onLittleMoved","SHOOT","createBullet","CHANGE_STATE","updateState","RELOAD","reload","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","shoot","collider","onCollision","time","delta","isDown","moveBig","angle","mag","x","cos","y","sin","Object","keys","ship","width","height","color","rotation","getVelocity","setVelocity","setCollideWorldBounds","console","log","setPosition","position","setRotation","emit","setMaxVelocity","setAcceleration","acceleration","bullet","shotBy","state","destroy","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, gameDimensions, sceneKeys} from \"../constants/constants\";\nimport websocketEvents from \"../constants/websocketEvents\";\n\nexport default class GameScene extends Phaser.Scene {\n\n    constructor(socket, game) {\n        super({key: sceneKeys.game});\n\n        this.socket = socket;\n        this.settings = game.settings;\n        this.currentPlayer = game.currentPlayer;\n        this.maxVelocityLittle = game.settings.velocity+0.5;\n\n        this.players = {};\n        game.players.forEach(player => {\n            this.players[player.localId] = player;\n            this.players[player.localId].availableBullets = 3;\n        });\n\n        this.normalizers = {\n            velocity: 100,\n            angularVelocity: Math.PI/1200,\n            reloadingVelocity: 1/2000,\n            bulletVelocity: 200\n        }\n    }\n\n    preload(){\n\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ships/ship\"+index+\".png\"));\n        });\n        this.textures.addBase64(\"bullet\", require(\"@/assets/bullet.png\"));\n\n    }\n\n    create(){\n\n        this.shipsGroup = this.physics.add.group({\n            collideWorldBounds: true\n        });\n        this.bulletsGroup = this.physics.add.group({\n            collideWorldBounds: true\n        });\n\n        this.setupNewShips();\n\n        this.socket.on(websocketEvents.MOVE_BIG, data => this.onBigMoved(data));\n        this.socket.on(websocketEvents.MOVE_LITTLE, data => this.onLittleMoved(data));\n        this.socket.on(websocketEvents.SHOOT, data => this.createBullet(data));\n        this.socket.on(websocketEvents.CHANGE_STATE, data => this.updateState(data));\n        this.socket.on(websocketEvents.RELOAD, data => this.reload(data));\n\n        this.rotationKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n        this.input.keyboard.on(\"keyup-ENTER\", this.shoot, this);\n\n        this.physics.add.collider(this.shipsGroup, this.bulletsGroup, this.onCollision);\n    }\n\n    update(time, delta){\n        if(this.rotationKey.isDown) this.moveBig(delta);\n    }\n\n    getVelocity(angle, mag){\n        return {\n            x: Math.cos(angle)*mag,\n            y: Math.sin(angle)*mag\n        }\n    }\n\n    setupNewShips(){\n        Object.keys(this.players).forEach((key, index) => {\n            this.players[key].ship = this.physics.add.image(\n                (index<2 ? 0.05 : 0.95) * gameDimensions.width,\n                ( index%2 === 0 ? 0.05 : 0.95 ) * gameDimensions.height,\n                \"ship\"+this.players[key].color\n            );\n            this.players[key].ship.rotation = -Math.PI / 4  * ( index < 2 ? 1 : 3) * ( ( index % 2 ) * 2 - 1 );\n            this.players[key].ship.localId = key;\n            this.shipsGroup.add(this.players[key].ship);\n            let {x, y} = this.getVelocity(this.players[key].ship.rotation, this.settings.velocity*this.normalizers.velocity);\n            this.players[key].ship.setVelocity(x, y);\n            this.players[key].ship.setCollideWorldBounds(true);\n        });\n        console.log(this.players);\n    }\n\n    onBigMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.settings.velocity * this.normalizers.velocity);\n        this.players[data.localId].ship.setVelocity(x, y);\n    }\n\n    moveBig(delta){\n        this.players[this.currentPlayer].ship.rotation += delta * this.settings.angularVelocity * this.normalizers.angularVelocity;\n        let {x, y} = this.getVelocity(\n            this.players[this.currentPlayer].ship.rotation,\n            this.settings.velocity * this.normalizers.velocity\n        );\n        this.players[this.currentPlayer].ship.setVelocity(x, y);\n        this.socket.emit(websocketEvents.MOVE_BIG, {\n            localId: this.currentPlayer,\n            rotation: this.players[this.currentPlayer].ship.rotation,\n            position: {\n                x: this.players[this.currentPlayer].ship.x,\n                y: this.players[this.currentPlayer].ship.y\n            }\n        });\n    }\n\n\n    onLittleMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.maxVelocityLittle*this.normalizers.velocity);\n        this.players[data.localId].ship.setMaxVelocity(x, y);\n        this.players[data.localId].ship.setAcceleration(data.acceleration.x, data.acceleration.y);\n    }\n\n    moveLittle(){\n\n    }\n\n\n    createBullet(data){\n        let bullet = this.physics.add.image(data.position.x, data.position.y, \"bullet\");\n        bullet.rotation = data.rotation;\n        let {x, y} = this.getVelocity(data.rotation, this.settings.bulletVelocity*this.normalizers.bulletVelocity);\n        bullet.setVelocity(x, y);\n        bullet.shotBy = data.localId;\n        this.bulletsGroup.add(bullet);\n        this.players[data.localId].availableBullets--;\n    }\n\n    shoot(){\n        if(this.players[this.currentPlayer].availableBullets>0){\n            let ship = this.players[this.currentPlayer].ship;\n            let angle = ship.rotation;\n            let data = {\n                position: {\n                    x: ship.x + ship.width*Math.cos(angle),\n                    y: ship.y + ship.width*Math.sin(angle)\n                },\n                rotation: angle,\n                localId: this.currentPlayer\n            };\n            this.socket.emit(websocketEvents.SHOOT, data);\n            this.createBullet(data);\n        }\n    }\n\n\n    updateState(data){\n        this.players[data.localId].state = data.state;\n    }\n\n    onCollision(ship, bullet){\n        bullet.destroy();\n        ship.destroy();\n        /*this.socket.emit(websocketEvents.CHANGE_STATE, {\n            localId: ship.localId,\n            state: --this.players[ship.localId].state\n        })*/\n    }\n\n\n    reload(data){\n        this.players[data.localId].availableBullets = data.availableBullets;\n    }\n\n\n}"]}]}
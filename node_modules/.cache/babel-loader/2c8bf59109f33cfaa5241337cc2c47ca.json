{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js","mtime":1616677602807},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1616495189815},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1616495190967},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1616495189787},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1616495190059}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL21lZGlhL2phY29wby9Wb2x1bWVEYXRpL0RvY3VtZW50aS9wYXBlcm8udGsvY29zbW9zLnBhcGVyby5tZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hdGguc2lnbi5qcyI7CmltcG9ydCAqIGFzIFBoYXNlciBmcm9tICJwaGFzZXIiOwppbXBvcnQgeyBjb2xvcnMsIGdhbWVEaW1lbnNpb25zLCBzY2VuZUtleXMgfSBmcm9tICIuLi9jb25zdGFudHMvY29uc3RhbnRzIjsKaW1wb3J0IHdlYnNvY2tldEV2ZW50cyBmcm9tICIuLi9jb25zdGFudHMvd2Vic29ja2V0RXZlbnRzIjsKCnZhciBHYW1lU2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9QaGFzZXIkU2NlbmUpIHsKICBfaW5oZXJpdHMoR2FtZVNjZW5lLCBfUGhhc2VyJFNjZW5lKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihHYW1lU2NlbmUpOwoKICBmdW5jdGlvbiBHYW1lU2NlbmUoc29ja2V0LCBnYW1lKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhbWVTY2VuZSk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7CiAgICAgIGtleTogc2NlbmVLZXlzLmdhbWUKICAgIH0pOwogICAgX3RoaXMuc29ja2V0ID0gc29ja2V0OwogICAgX3RoaXMuc2V0dGluZ3MgPSBnYW1lLnNldHRpbmdzOwogICAgX3RoaXMuY3VycmVudFBsYXllciA9IGdhbWUuY3VycmVudFBsYXllcjsKICAgIF90aGlzLm1heFZlbG9jaXR5TGl0dGxlID0gZ2FtZS5zZXR0aW5ncy52ZWxvY2l0eSArIDAuNTsKICAgIF90aGlzLnBsYXllcnMgPSB7fTsKICAgIGdhbWUucGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChwbGF5ZXIpIHsKICAgICAgX3RoaXMucGxheWVyc1twbGF5ZXIubG9jYWxJZF0gPSBwbGF5ZXI7CiAgICAgIF90aGlzLnBsYXllcnNbcGxheWVyLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMgPSAzOwogICAgfSk7CiAgICBfdGhpcy5ub3JtYWxpemVycyA9IHsKICAgICAgdmVsb2NpdHk6IDEwMCwKICAgICAgYW5ndWxhclZlbG9jaXR5OiBNYXRoLlBJIC8gMTIwMCwKICAgICAgcmVsb2FkaW5nVmVsb2NpdHk6IDEgLyAyMDAwLAogICAgICBidWxsZXRWZWxvY2l0eTogMjAwCiAgICB9OwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEdhbWVTY2VuZSwgW3sKICAgIGtleTogInByZWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZWxvYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29sb3JzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIF90aGlzMi5sb2FkLmltYWdlKCJzaGlwIiArIGluZGV4LCByZXF1aXJlKCJAL2Fzc2V0cy9zaGlwcy9zaGlwIiArIGluZGV4ICsgIi5wbmciKSk7CiAgICAgIH0pOwogICAgICB0aGlzLnRleHR1cmVzLmFkZEJhc2U2NCgiYnVsbGV0IiwgcmVxdWlyZSgiQC9hc3NldHMvYnVsbGV0LnBuZyIpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHsKICAgICAgdGhpcy5zaGlwc0dyb3VwID0gdGhpcy5waHlzaWNzLmFkZC5ncm91cCgpOwogICAgICB0aGlzLmJ1bGxldHNHcm91cCA9IHRoaXMucGh5c2ljcy5hZGQuZ3JvdXAoKTsKICAgICAgdGhpcy5zZXR1cE5ld1NoaXBzKCk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5NT1ZFX0JJRywgdGhpcy5vbkJpZ01vdmVkKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLk1PVkVfTElUVExFLCB0aGlzLm9uTGl0dGxlTW92ZWQpOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIHRoaXMuY3JlYXRlQnVsbGV0KTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLkNIQU5HRV9TVEFURSwgdGhpcy51cGRhdGVTdGF0ZSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5SRUxPQUQsIHRoaXMucmVsb2FkKTsKICAgICAgdGhpcy5yb3RhdGlvbktleSA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5TUEFDRSk7CiAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQub24oImtleXVwLUVOVEVSIiwgdGhpcy5zaG9vdCk7CiAgICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIodGhpcy5zaGlwc0dyb3VwLCB0aGlzLmJ1bGxldHNHcm91cCwgdGhpcy5vbkNvbGxpc2lvbik7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUodGltZSwgZGVsdGEpIHsKICAgICAgaWYgKHRoaXMucm90YXRpb25LZXkuaXNEb3duKSB0aGlzLm1vdmVCaWcoZGVsdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFZlbG9jaXR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWZWxvY2l0eShhbmdsZSwgbWFnKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogTWF0aC5jb3MoYW5nbGUpICogbWFnLAogICAgICAgIHk6IE1hdGguc2luKGFuZ2xlKSAqIG1hZwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInNldHVwTmV3U2hpcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwTmV3U2hpcHMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgT2JqZWN0LmtleXModGhpcy5wbGF5ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGluZGV4KSB7CiAgICAgICAgX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwID0gX3RoaXMzLnBoeXNpY3MuYWRkLmltYWdlKChNYXRoLnNpZ24oaW5kZXggLSAxLjUpIC8gMiArIDEpICogZ2FtZURpbWVuc2lvbnMud2lkdGgsIGluZGV4ICUgMiAqIGdhbWVEaW1lbnNpb25zLmhlaWdodCwgInNoaXAiICsgX3RoaXMzLnBsYXllcnNba2V5XS5jb2xvcik7CiAgICAgICAgX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwLnJvdGF0aW9uID0gLU1hdGguUEkgLyA0ICogKGluZGV4IDwgMiA/IDEgOiAzKSAqIChpbmRleCAlIDIgKiAyIC0gMSk7CgogICAgICAgIHZhciBfdGhpczMkZ2V0VmVsb2NpdHkgPSBfdGhpczMuZ2V0VmVsb2NpdHkoX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwLnJvdGF0aW9uLCBfdGhpczMuc2V0dGluZ3MudmVsb2NpdHkgKiBfdGhpczMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgICB4ID0gX3RoaXMzJGdldFZlbG9jaXR5LngsCiAgICAgICAgICAgIHkgPSBfdGhpczMkZ2V0VmVsb2NpdHkueTsKCiAgICAgICAgX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwLnNldFZlbG9jaXR5KHgsIHkpOwoKICAgICAgICBfdGhpczMucGxheWVyc1trZXldLnNoaXAuc2V0Q29sbGlkZVdvcmxkQm91bmRzKHRydWUpOwoKICAgICAgICBfdGhpczMucGxheWVyc1trZXldLnNoaXAubG9jYWxJZCA9IGtleTsKCiAgICAgICAgX3RoaXMzLnNoaXBzR3JvdXAuYWRkKF90aGlzMy5wbGF5ZXJzW2tleV0uc2hpcCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uQmlnTW92ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmlnTW92ZWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFBvc2l0aW9uKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRSb3RhdGlvbihkYXRhLnJvdGF0aW9uKTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eSA9IHRoaXMuZ2V0VmVsb2NpdHkoZGF0YS5yb3RhdGlvbiwgdGhpcy5zZXR0aW5ncy52ZWxvY2l0eSAqIHRoaXMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgeCA9IF90aGlzJGdldFZlbG9jaXR5LngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHkueTsKCiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0VmVsb2NpdHkoeCwgeSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibW92ZUJpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZUJpZyhkZWx0YSkgewogICAgICB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uICs9IGRlbHRhICogdGhpcy5zZXR0aW5ncy5hbmd1bGFyVmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLmFuZ3VsYXJWZWxvY2l0eTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTIgPSB0aGlzLmdldFZlbG9jaXR5KHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAucm90YXRpb24sIHRoaXMuc2V0dGluZ3MudmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTIueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTIueTsKCiAgICAgIHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAuc2V0VmVsb2NpdHkoeCwgeSk7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQod2Vic29ja2V0RXZlbnRzLk1PVkVfQklHLCB7CiAgICAgICAgbG9jYWxJZDogdGhpcy5jdXJyZW50UGxheWVyLAogICAgICAgIHJvdGF0aW9uOiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uLAogICAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgICB4OiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLngsCiAgICAgICAgICB5OiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uTGl0dGxlTW92ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTGl0dGxlTW92ZWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFBvc2l0aW9uKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRSb3RhdGlvbihkYXRhLnJvdGF0aW9uKTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTMgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMubWF4VmVsb2NpdHlMaXR0bGUgKiB0aGlzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTMueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTMueTsKCiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0TWF4VmVsb2NpdHkoeCwgeSk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0QWNjZWxlcmF0aW9uKGRhdGEuYWNjZWxlcmF0aW9uLngsIGRhdGEuYWNjZWxlcmF0aW9uLnkpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVMaXR0bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVMaXR0bGUoKSB7fQogIH0sIHsKICAgIGtleTogImNyZWF0ZUJ1bGxldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQnVsbGV0KGRhdGEpIHsKICAgICAgdmFyIGJ1bGxldCA9IHRoaXMucGh5c2ljcy5hZGQuaW1hZ2UoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksICJidWxsZXQiKTsKICAgICAgYnVsbGV0LnJvdGF0aW9uID0gZGF0YS5yb3RhdGlvbjsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTQgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMuc2V0dGluZ3MuYnVsbGV0VmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLmJ1bGxldFZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTQueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTQueTsKCiAgICAgIGJ1bGxldC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgICAgYnVsbGV0LnNob3RCeSA9IGRhdGEubG9jYWxJZDsKICAgICAgdGhpcy5idWxsZXRzR3JvdXAuYWRkKGJ1bGxldCk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMtLTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG9vdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvb3QoKSB7CiAgICAgIGlmICh0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5hdmFpbGFibGVCdWxsZXRzID4gMCkgewogICAgICAgIHZhciBzaGlwID0gdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcDsKICAgICAgICB2YXIgYW5nbGUgPSBzaGlwLnJvdGF0aW9uOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgeDogc2hpcC54ICsgc2hpcC53aWR0aCAqIE1hdGguY29zKGFuZ2xlKSwKICAgICAgICAgICAgeTogc2hpcC55ICsgc2hpcC53aWR0aCAqIE1hdGguc2luKGFuZ2xlKQogICAgICAgICAgfSwKICAgICAgICAgIHJvdGF0aW9uOiBhbmdsZSwKICAgICAgICAgIGxvY2FsSWQ6IHRoaXMuY3VycmVudFBsYXllcgogICAgICAgIH07CiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIGRhdGEpOwogICAgICAgIHRoaXMuY3JlYXRlQnVsbGV0KGRhdGEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlU3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0YXRlKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc3RhdGUgPSBkYXRhLnN0YXRlOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uQ29sbGlzaW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbGxpc2lvbihzaGlwLCBidWxsZXQpIHsKICAgICAgYnVsbGV0LmRlc3Ryb3koKTsKICAgICAgc2hpcC5kZXN0cm95KCk7CiAgICAgIC8qdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCB7CiAgICAgICAgICBsb2NhbElkOiBzaGlwLmxvY2FsSWQsCiAgICAgICAgICBzdGF0ZTogLS10aGlzLnBsYXllcnNbc2hpcC5sb2NhbElkXS5zdGF0ZQogICAgICB9KSovCiAgICB9CiAgfSwgewogICAga2V5OiAicmVsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWxvYWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5hdmFpbGFibGVCdWxsZXRzID0gZGF0YS5hdmFpbGFibGVCdWxsZXRzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdhbWVTY2VuZTsKfShQaGFzZXIuU2NlbmUpOwoKZXhwb3J0IHsgR2FtZVNjZW5lIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js"],"names":["Phaser","colors","gameDimensions","sceneKeys","websocketEvents","GameScene","socket","game","key","settings","currentPlayer","maxVelocityLittle","velocity","players","forEach","player","localId","availableBullets","normalizers","angularVelocity","Math","PI","reloadingVelocity","bulletVelocity","value","index","load","image","require","textures","addBase64","shipsGroup","physics","add","group","bulletsGroup","setupNewShips","on","MOVE_BIG","onBigMoved","MOVE_LITTLE","onLittleMoved","SHOOT","createBullet","CHANGE_STATE","updateState","RELOAD","reload","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","shoot","collider","onCollision","time","delta","isDown","moveBig","angle","mag","x","cos","y","sin","Object","keys","ship","sign","width","height","color","rotation","getVelocity","setVelocity","setCollideWorldBounds","data","setPosition","position","setRotation","emit","setMaxVelocity","setAcceleration","acceleration","bullet","shotBy","state","destroy","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, gameDimensions, sceneKeys} from \"../constants/constants\";\nimport websocketEvents from \"../constants/websocketEvents\";\n\nexport default class GameScene extends Phaser.Scene {\n\n    constructor(socket, game) {\n        super({key: sceneKeys.game});\n\n        this.socket = socket;\n        this.settings = game.settings;\n        this.currentPlayer = game.currentPlayer;\n        this.maxVelocityLittle = game.settings.velocity+0.5;\n\n        this.players = {};\n        game.players.forEach(player => {\n            this.players[player.localId] = player;\n            this.players[player.localId].availableBullets = 3;\n        });\n\n        this.normalizers = {\n            velocity: 100,\n            angularVelocity: Math.PI/1200,\n            reloadingVelocity: 1/2000,\n            bulletVelocity: 200\n        }\n    }\n\n    preload(){\n\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ships/ship\"+index+\".png\"));\n        });\n        this.textures.addBase64(\"bullet\", require(\"@/assets/bullet.png\"));\n\n    }\n\n    create(){\n\n        this.shipsGroup = this.physics.add.group();\n        this.bulletsGroup = this.physics.add.group();\n\n        this.setupNewShips();\n\n        this.socket.on(websocketEvents.MOVE_BIG, this.onBigMoved);\n        this.socket.on(websocketEvents.MOVE_LITTLE, this.onLittleMoved);\n        this.socket.on(websocketEvents.SHOOT, this.createBullet);\n        this.socket.on(websocketEvents.CHANGE_STATE, this.updateState);\n        this.socket.on(websocketEvents.RELOAD, this.reload);\n\n        this.rotationKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n        this.input.keyboard.on(\"keyup-ENTER\", this.shoot);\n\n        this.physics.add.collider(this.shipsGroup, this.bulletsGroup, this.onCollision);\n    }\n\n    update(time, delta){\n        if(this.rotationKey.isDown) this.moveBig(delta);\n    }\n\n    getVelocity(angle, mag){\n        return {\n            x: Math.cos(angle)*mag,\n            y: Math.sin(angle)*mag\n        }\n    }\n\n    setupNewShips(){\n        Object.keys(this.players).forEach((key, index) => {\n            this.players[key].ship = this.physics.add.image(\n                ( Math.sign(index-1.5) / 2 + 1 ) * gameDimensions.width,\n                ( index % 2 ) * gameDimensions.height,\n                \"ship\"+this.players[key].color\n            );\n            this.players[key].ship.rotation = -Math.PI / 4  * ( index < 2 ? 1 : 3) * ( ( index % 2 ) * 2 - 1 );\n            let {x, y} = this.getVelocity(this.players[key].ship.rotation, this.settings.velocity*this.normalizers.velocity);\n            this.players[key].ship.setVelocity(x, y);\n            this.players[key].ship.setCollideWorldBounds(true);\n            this.players[key].ship.localId = key;\n            this.shipsGroup.add(this.players[key].ship);\n        });\n    }\n\n    onBigMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.settings.velocity * this.normalizers.velocity);\n        this.players[data.localId].ship.setVelocity(x, y);\n    }\n\n    moveBig(delta){\n        this.players[this.currentPlayer].ship.rotation += delta * this.settings.angularVelocity * this.normalizers.angularVelocity;\n        let {x, y} = this.getVelocity(\n            this.players[this.currentPlayer].ship.rotation,\n            this.settings.velocity * this.normalizers.velocity\n        );\n        this.players[this.currentPlayer].ship.setVelocity(x, y);\n        this.socket.emit(websocketEvents.MOVE_BIG, {\n            localId: this.currentPlayer,\n            rotation: this.players[this.currentPlayer].ship.rotation,\n            position: {\n                x: this.players[this.currentPlayer].ship.x,\n                y: this.players[this.currentPlayer].ship.y\n            }\n        });\n    }\n\n\n    onLittleMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.maxVelocityLittle*this.normalizers.velocity);\n        this.players[data.localId].ship.setMaxVelocity(x, y);\n        this.players[data.localId].ship.setAcceleration(data.acceleration.x, data.acceleration.y);\n    }\n\n    moveLittle(){\n\n    }\n\n\n    createBullet(data){\n        let bullet = this.physics.add.image(data.position.x, data.position.y, \"bullet\");\n        bullet.rotation = data.rotation;\n        let {x, y} = this.getVelocity(data.rotation, this.settings.bulletVelocity*this.normalizers.bulletVelocity);\n        bullet.setVelocity(x, y);\n        bullet.shotBy = data.localId;\n        this.bulletsGroup.add(bullet);\n        this.players[data.localId].availableBullets--;\n    }\n\n    shoot(){\n        if(this.players[this.currentPlayer].availableBullets>0){\n            let ship = this.players[this.currentPlayer].ship;\n            let angle = ship.rotation;\n            let data = {\n                position: {\n                    x: ship.x + ship.width*Math.cos(angle),\n                    y: ship.y + ship.width*Math.sin(angle)\n                },\n                rotation: angle,\n                localId: this.currentPlayer\n            };\n            this.socket.emit(websocketEvents.SHOOT, data);\n            this.createBullet(data);\n        }\n    }\n\n\n    updateState(data){\n        this.players[data.localId].state = data.state;\n    }\n\n    onCollision(ship, bullet){\n        bullet.destroy();\n        ship.destroy();\n        /*this.socket.emit(websocketEvents.CHANGE_STATE, {\n            localId: ship.localId,\n            state: --this.players[ship.localId].state\n        })*/\n    }\n\n\n    reload(data){\n        this.players[data.localId].availableBullets = data.availableBullets;\n    }\n\n\n}"]}]}
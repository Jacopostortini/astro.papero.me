{"remainingRequest":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js??ref--13-0!/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js","dependencies":[{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js","mtime":1616668933569},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/cache-loader/dist/cjs.js","mtime":1616495189815},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/thread-loader/dist/cjs.js","mtime":1616495190967},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/babel-loader/lib/index.js","mtime":1616495189787},{"path":"/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/node_modules/eslint-loader/index.js","mtime":1616495190059}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL21lZGlhL2phY29wby9Wb2x1bWVEYXRpL0RvY3VtZW50aS9wYXBlcm8udGsvY29zbW9zLnBhcGVyby5tZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2Fzc2VydFRoaXNJbml0aWFsaXplZCBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9tZWRpYS9qYWNvcG8vVm9sdW1lRGF0aS9Eb2N1bWVudGkvcGFwZXJvLnRrL2Nvc21vcy5wYXBlcm8ubWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvbWVkaWEvamFjb3BvL1ZvbHVtZURhdGkvRG9jdW1lbnRpL3BhcGVyby50ay9jb3Ntb3MucGFwZXJvLm1lL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLnNpZ24uanMiOwppbXBvcnQgKiBhcyBQaGFzZXIgZnJvbSAicGhhc2VyIjsKaW1wb3J0IHsgY29sb3JzLCBnYW1lRGltZW5zaW9ucywgc2NlbmVLZXlzIH0gZnJvbSAiLi4vY29uc3RhbnRzL2NvbnN0YW50cyI7CmltcG9ydCB3ZWJzb2NrZXRFdmVudHMgZnJvbSAiLi4vY29uc3RhbnRzL3dlYnNvY2tldEV2ZW50cyI7Cgp2YXIgR2FtZVNjZW5lID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUGhhc2VyJFNjZW5lKSB7CiAgX2luaGVyaXRzKEdhbWVTY2VuZSwgX1BoYXNlciRTY2VuZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoR2FtZVNjZW5lKTsKCiAgZnVuY3Rpb24gR2FtZVNjZW5lKHNvY2tldCwgZ2FtZSkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHYW1lU2NlbmUpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgewogICAgICBrZXk6IHNjZW5lS2V5cy5nYW1lCiAgICB9KTsKICAgIF90aGlzLnNvY2tldCA9IHNvY2tldDsKICAgIF90aGlzLnNldHRpbmdzID0gZ2FtZS5zZXR0aW5nczsKICAgIF90aGlzLmN1cnJlbnRQbGF5ZXIgPSBnYW1lLmN1cnJlbnRQbGF5ZXI7CiAgICBfdGhpcy5tYXhWZWxvY2l0eUxpdHRsZSA9IGdhbWUuc2V0dGluZ3MudmVsb2NpdHkgKyAwLjU7CiAgICBfdGhpcy5wbGF5ZXJzID0ge307CiAgICBnYW1lLnBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAocGxheWVyKSB7CiAgICAgIF90aGlzLnBsYXllcnNbcGxheWVyLmxvY2FsSWRdID0gcGxheWVyOwogICAgICBfdGhpcy5wbGF5ZXJzW3BsYXllci5sb2NhbElkXS5hdmFpbGFibGVCdWxsZXRzID0gMzsKICAgIH0pOwogICAgX3RoaXMubm9ybWFsaXplcnMgPSB7CiAgICAgIHZlbG9jaXR5OiAxMDAsCiAgICAgIGFuZ3VsYXJWZWxvY2l0eTogTWF0aC5QSSAvIDEyMDAsCiAgICAgIHJlbG9hZGluZ1ZlbG9jaXR5OiAxIC8gMjAwMCwKICAgICAgYnVsbGV0VmVsb2NpdHk6IDIwMAogICAgfTsKICAgIF90aGlzLnNoaXBzR3JvdXAgPSBuZXcgUGhhc2VyLkdyb3VwKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTsKICAgIF90aGlzLmJ1bGxldHNHcm91cCA9IG5ldyBQaGFzZXIuR3JvdXAoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEdhbWVTY2VuZSwgW3sKICAgIGtleTogInByZWxvYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZWxvYWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgY29sb3JzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgewogICAgICAgIF90aGlzMi5sb2FkLmltYWdlKCJzaGlwIiArIGluZGV4LCByZXF1aXJlKCJAL2Fzc2V0cy9zaGlwcy9zaGlwIiArIGluZGV4ICsgIi5wbmciKSk7CiAgICAgIH0pOwogICAgICB0aGlzLnRleHR1cmVzLmFkZEJhc2U2NCgiYnVsbGV0IiwgcmVxdWlyZSgiQC9hc3NldHMvYnVsbGV0LnBuZyIpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHsKICAgICAgdGhpcy5zZXR1cE5ld1NoaXBzKCk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5NT1ZFX0JJRywgdGhpcy5vbkJpZ01vdmVkKTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLk1PVkVfTElUVExFLCB0aGlzLm9uTGl0dGxlTW92ZWQpOwogICAgICB0aGlzLnNvY2tldC5vbih3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIHRoaXMuY3JlYXRlQnVsbGV0KTsKICAgICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLkNIQU5HRV9TVEFURSwgdGhpcy51cGRhdGVTdGF0ZSk7CiAgICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5SRUxPQUQsIHRoaXMucmVsb2FkKTsKICAgICAgdGhpcy5yb3RhdGlvbktleSA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXlDb2Rlcy5TUEFDRSk7CiAgICAgIHRoaXMuaW5wdXQua2V5Ym9hcmQub24oImtleXVwLUVOVEVSIiwgdGhpcy5zaG9vdCk7CiAgICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIodGhpcy5zaGlwc0dyb3VwLCB0aGlzLmJ1bGxldHNHcm91cCwgdGhpcy5vbkNvbGxpc2lvbik7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUodGltZSwgZGVsdGEpIHsKICAgICAgaWYgKHRoaXMucm90YXRpb25LZXkuaXNEb3duKSB0aGlzLm1vdmVCaWcoZGVsdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFZlbG9jaXR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWZWxvY2l0eShhbmdsZSwgbWFnKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogTWF0aC5jb3MoYW5nbGUpICogbWFnLAogICAgICAgIHk6IE1hdGguc2luKGFuZ2xlKSAqIG1hZwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInNldHVwTmV3U2hpcHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwTmV3U2hpcHMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5wbGF5ZXJzLmdldEtleXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXksIGluZGV4KSB7CiAgICAgICAgX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwID0gX3RoaXMzLnBoeXNpY3MuYWRkLmltYWdlKChNYXRoLnNpZ24oaW5kZXggLSAxLjUpIC8gMiArIDEpICogZ2FtZURpbWVuc2lvbnMud2lkdGgsIGluZGV4ICUgMiAqIGdhbWVEaW1lbnNpb25zLmhlaWdodCwgInNoaXAiICsgX3RoaXMzLnBsYXllcnNba2V5XS5jb2xvcik7CiAgICAgICAgX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwLnJvdGF0aW9uID0gLU1hdGguUEkgLyA0ICogKGluZGV4IDwgMiA/IDEgOiAzKSAqIChpbmRleCAlIDIgKiAyIC0gMSk7CgogICAgICAgIHZhciBfdGhpczMkZ2V0VmVsb2NpdHkgPSBfdGhpczMuZ2V0VmVsb2NpdHkoX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwLnJvdGF0aW9uLCBfdGhpczMuc2V0dGluZ3MudmVsb2NpdHkgKiBfdGhpczMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgICB4ID0gX3RoaXMzJGdldFZlbG9jaXR5LngsCiAgICAgICAgICAgIHkgPSBfdGhpczMkZ2V0VmVsb2NpdHkueTsKCiAgICAgICAgX3RoaXMzLnBsYXllcnNba2V5XS5zaGlwLnNldFZlbG9jaXR5KHgsIHkpOwoKICAgICAgICBfdGhpczMucGxheWVyc1trZXldLnNoaXAuc2V0Q29sbGlkZVdvcmxkQm91bmRzKHRydWUpOwoKICAgICAgICBfdGhpczMucGxheWVyc1trZXldLnNoaXAubG9jYWxJZCA9IGtleTsKCiAgICAgICAgX3RoaXMzLnNoaXBzR3JvdXAuYWRkKF90aGlzMy5wbGF5ZXJzW2tleV0uc2hpcCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uQmlnTW92ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmlnTW92ZWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFBvc2l0aW9uKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRSb3RhdGlvbihkYXRhLnJvdGF0aW9uKTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eSA9IHRoaXMuZ2V0VmVsb2NpdHkoZGF0YS5yb3RhdGlvbiwgdGhpcy5zZXR0aW5ncy52ZWxvY2l0eSAqIHRoaXMubm9ybWFsaXplcnMudmVsb2NpdHkpLAogICAgICAgICAgeCA9IF90aGlzJGdldFZlbG9jaXR5LngsCiAgICAgICAgICB5ID0gX3RoaXMkZ2V0VmVsb2NpdHkueTsKCiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0VmVsb2NpdHkoeCwgeSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibW92ZUJpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZUJpZyhkZWx0YSkgewogICAgICB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uICs9IGRlbHRhICogdGhpcy5zZXR0aW5ncy5hbmd1bGFyVmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLmFuZ3VsYXJWZWxvY2l0eTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTIgPSB0aGlzLmdldFZlbG9jaXR5KHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAucm90YXRpb24sIHRoaXMuc2V0dGluZ3MudmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTIueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTIueTsKCiAgICAgIHRoaXMucGxheWVyc1t0aGlzLmN1cnJlbnRQbGF5ZXJdLnNoaXAuc2V0VmVsb2NpdHkoeCwgeSk7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQod2Vic29ja2V0RXZlbnRzLk1PVkVfQklHLCB7CiAgICAgICAgbG9jYWxJZDogdGhpcy5jdXJyZW50UGxheWVyLAogICAgICAgIHJvdGF0aW9uOiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnJvdGF0aW9uLAogICAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgICB4OiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLngsCiAgICAgICAgICB5OiB0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5zaGlwLnkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uTGl0dGxlTW92ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTGl0dGxlTW92ZWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5zaGlwLnNldFBvc2l0aW9uKGRhdGEucG9zaXRpb24ueCwgZGF0YS5wb3NpdGlvbi55KTsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc2hpcC5zZXRSb3RhdGlvbihkYXRhLnJvdGF0aW9uKTsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTMgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMubWF4VmVsb2NpdHlMaXR0bGUgKiB0aGlzLm5vcm1hbGl6ZXJzLnZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTMueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTMueTsKCiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0TWF4VmVsb2NpdHkoeCwgeSk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLnNoaXAuc2V0QWNjZWxlcmF0aW9uKGRhdGEuYWNjZWxlcmF0aW9uLngsIGRhdGEuYWNjZWxlcmF0aW9uLnkpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdmVMaXR0bGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVMaXR0bGUoKSB7fQogIH0sIHsKICAgIGtleTogImNyZWF0ZUJ1bGxldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlQnVsbGV0KGRhdGEpIHsKICAgICAgdmFyIGJ1bGxldCA9IHRoaXMucGh5c2ljcy5hZGQuaW1hZ2UoZGF0YS5wb3NpdGlvbi54LCBkYXRhLnBvc2l0aW9uLnksICJidWxsZXQiKTsKICAgICAgYnVsbGV0LnJvdGF0aW9uID0gZGF0YS5yb3RhdGlvbjsKCiAgICAgIHZhciBfdGhpcyRnZXRWZWxvY2l0eTQgPSB0aGlzLmdldFZlbG9jaXR5KGRhdGEucm90YXRpb24sIHRoaXMuc2V0dGluZ3MuYnVsbGV0VmVsb2NpdHkgKiB0aGlzLm5vcm1hbGl6ZXJzLmJ1bGxldFZlbG9jaXR5KSwKICAgICAgICAgIHggPSBfdGhpcyRnZXRWZWxvY2l0eTQueCwKICAgICAgICAgIHkgPSBfdGhpcyRnZXRWZWxvY2l0eTQueTsKCiAgICAgIGJ1bGxldC5zZXRWZWxvY2l0eSh4LCB5KTsKICAgICAgYnVsbGV0LnNob3RCeSA9IGRhdGEubG9jYWxJZDsKICAgICAgdGhpcy5idWxsZXRzR3JvdXAuYWRkKGJ1bGxldCk7CiAgICAgIHRoaXMucGxheWVyc1tkYXRhLmxvY2FsSWRdLmF2YWlsYWJsZUJ1bGxldHMtLTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG9vdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvb3QoKSB7CiAgICAgIGlmICh0aGlzLnBsYXllcnNbdGhpcy5jdXJyZW50UGxheWVyXS5hdmFpbGFibGVCdWxsZXRzID4gMCkgewogICAgICAgIHZhciBzaGlwID0gdGhpcy5wbGF5ZXJzW3RoaXMuY3VycmVudFBsYXllcl0uc2hpcDsKICAgICAgICB2YXIgYW5nbGUgPSBzaGlwLnJvdGF0aW9uOwogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgeDogc2hpcC54ICsgc2hpcC53aWR0aCAqIE1hdGguY29zKGFuZ2xlKSwKICAgICAgICAgICAgeTogc2hpcC55ICsgc2hpcC53aWR0aCAqIE1hdGguc2luKGFuZ2xlKQogICAgICAgICAgfSwKICAgICAgICAgIHJvdGF0aW9uOiBhbmdsZSwKICAgICAgICAgIGxvY2FsSWQ6IHRoaXMuY3VycmVudFBsYXllcgogICAgICAgIH07CiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuU0hPT1QsIGRhdGEpOwogICAgICAgIHRoaXMuY3JlYXRlQnVsbGV0KGRhdGEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlU3RhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVN0YXRlKGRhdGEpIHsKICAgICAgdGhpcy5wbGF5ZXJzW2RhdGEubG9jYWxJZF0uc3RhdGUgPSBkYXRhLnN0YXRlOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uQ29sbGlzaW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbGxpc2lvbihzaGlwLCBidWxsZXQpIHsKICAgICAgYnVsbGV0LmRlc3Ryb3koKTsKICAgICAgc2hpcC5kZXN0cm95KCk7CiAgICAgIC8qdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuQ0hBTkdFX1NUQVRFLCB7CiAgICAgICAgICBsb2NhbElkOiBzaGlwLmxvY2FsSWQsCiAgICAgICAgICBzdGF0ZTogLS10aGlzLnBsYXllcnNbc2hpcC5sb2NhbElkXS5zdGF0ZQogICAgICB9KSovCiAgICB9CiAgfSwgewogICAga2V5OiAicmVsb2FkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWxvYWQoZGF0YSkgewogICAgICB0aGlzLnBsYXllcnNbZGF0YS5sb2NhbElkXS5hdmFpbGFibGVCdWxsZXRzID0gZGF0YS5hdmFpbGFibGVCdWxsZXRzOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdhbWVTY2VuZTsKfShQaGFzZXIuU2NlbmUpOwoKZXhwb3J0IHsgR2FtZVNjZW5lIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/media/jacopo/VolumeDati/Documenti/papero.tk/cosmos.papero.me/src/scenes/GameScene.js"],"names":["Phaser","colors","gameDimensions","sceneKeys","websocketEvents","GameScene","socket","game","key","settings","currentPlayer","maxVelocityLittle","velocity","players","forEach","player","localId","availableBullets","normalizers","angularVelocity","Math","PI","reloadingVelocity","bulletVelocity","shipsGroup","Group","bulletsGroup","value","index","load","image","require","textures","addBase64","setupNewShips","on","MOVE_BIG","onBigMoved","MOVE_LITTLE","onLittleMoved","SHOOT","createBullet","CHANGE_STATE","updateState","RELOAD","reload","rotationKey","input","keyboard","addKey","Input","Keyboard","KeyCodes","SPACE","shoot","physics","add","collider","onCollision","time","delta","isDown","moveBig","angle","mag","x","cos","y","sin","getKeys","ship","sign","width","height","color","rotation","getVelocity","setVelocity","setCollideWorldBounds","data","setPosition","position","setRotation","emit","setMaxVelocity","setAcceleration","acceleration","bullet","shotBy","state","destroy","Scene"],"mappings":"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","sourcesContent":["import * as Phaser from \"phaser\";\nimport {colors, gameDimensions, sceneKeys} from \"../constants/constants\";\nimport websocketEvents from \"../constants/websocketEvents\";\n\nexport default class GameScene extends Phaser.Scene {\n\n    constructor(socket, game) {\n        super({key: sceneKeys.game});\n\n        this.socket = socket;\n        this.settings = game.settings;\n        this.currentPlayer = game.currentPlayer;\n        this.maxVelocityLittle = game.settings.velocity+0.5;\n\n        this.players = {};\n        game.players.forEach(player => {\n            this.players[player.localId] = player;\n            this.players[player.localId].availableBullets = 3;\n        });\n\n        this.normalizers = {\n            velocity: 100,\n            angularVelocity: Math.PI/1200,\n            reloadingVelocity: 1/2000,\n            bulletVelocity: 200\n        }\n\n        this.shipsGroup = new Phaser.Group(this);\n        this.bulletsGroup = new Phaser.Group(this);\n    }\n\n    preload(){\n\n        colors.forEach((value, index) => {\n            this.load.image(\"ship\"+index, require(\"@/assets/ships/ship\"+index+\".png\"));\n        });\n        this.textures.addBase64(\"bullet\", require(\"@/assets/bullet.png\"));\n\n    }\n\n    create(){\n        this.setupNewShips();\n\n        this.socket.on(websocketEvents.MOVE_BIG, this.onBigMoved);\n        this.socket.on(websocketEvents.MOVE_LITTLE, this.onLittleMoved);\n        this.socket.on(websocketEvents.SHOOT, this.createBullet);\n        this.socket.on(websocketEvents.CHANGE_STATE, this.updateState);\n        this.socket.on(websocketEvents.RELOAD, this.reload);\n\n        this.rotationKey = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);\n        this.input.keyboard.on(\"keyup-ENTER\", this.shoot);\n\n        this.physics.add.collider(this.shipsGroup, this.bulletsGroup, this.onCollision);\n    }\n\n    update(time, delta){\n        if(this.rotationKey.isDown) this.moveBig(delta);\n    }\n\n    getVelocity(angle, mag){\n        return {\n            x: Math.cos(angle)*mag,\n            y: Math.sin(angle)*mag\n        }\n    }\n\n    setupNewShips(){\n        this.players.getKeys().forEach((key, index) => {\n            this.players[key].ship = this.physics.add.image(\n                ( Math.sign(index-1.5) / 2 + 1 ) * gameDimensions.width,\n                ( index % 2 ) * gameDimensions.height,\n                \"ship\"+this.players[key].color\n            );\n            this.players[key].ship.rotation = -Math.PI / 4  * ( index < 2 ? 1 : 3) * ( ( index % 2 ) * 2 - 1 );\n            let {x, y} = this.getVelocity(this.players[key].ship.rotation, this.settings.velocity*this.normalizers.velocity);\n            this.players[key].ship.setVelocity(x, y);\n            this.players[key].ship.setCollideWorldBounds(true);\n            this.players[key].ship.localId = key;\n            this.shipsGroup.add(this.players[key].ship);\n        });\n    }\n\n    onBigMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.settings.velocity * this.normalizers.velocity);\n        this.players[data.localId].ship.setVelocity(x, y);\n    }\n\n    moveBig(delta){\n        this.players[this.currentPlayer].ship.rotation += delta * this.settings.angularVelocity * this.normalizers.angularVelocity;\n        let {x, y} = this.getVelocity(\n            this.players[this.currentPlayer].ship.rotation,\n            this.settings.velocity * this.normalizers.velocity\n        );\n        this.players[this.currentPlayer].ship.setVelocity(x, y);\n        this.socket.emit(websocketEvents.MOVE_BIG, {\n            localId: this.currentPlayer,\n            rotation: this.players[this.currentPlayer].ship.rotation,\n            position: {\n                x: this.players[this.currentPlayer].ship.x,\n                y: this.players[this.currentPlayer].ship.y\n            }\n        });\n    }\n\n\n    onLittleMoved(data){\n        this.players[data.localId].ship.setPosition(data.position.x, data.position.y);\n        this.players[data.localId].ship.setRotation(data.rotation);\n        let {x, y} = this.getVelocity(data.rotation, this.maxVelocityLittle*this.normalizers.velocity);\n        this.players[data.localId].ship.setMaxVelocity(x, y);\n        this.players[data.localId].ship.setAcceleration(data.acceleration.x, data.acceleration.y);\n    }\n\n    moveLittle(){\n\n    }\n\n\n    createBullet(data){\n        let bullet = this.physics.add.image(data.position.x, data.position.y, \"bullet\");\n        bullet.rotation = data.rotation;\n        let {x, y} = this.getVelocity(data.rotation, this.settings.bulletVelocity*this.normalizers.bulletVelocity);\n        bullet.setVelocity(x, y);\n        bullet.shotBy = data.localId;\n        this.bulletsGroup.add(bullet);\n        this.players[data.localId].availableBullets--;\n    }\n\n    shoot(){\n        if(this.players[this.currentPlayer].availableBullets>0){\n            let ship = this.players[this.currentPlayer].ship;\n            let angle = ship.rotation;\n            let data = {\n                position: {\n                    x: ship.x + ship.width*Math.cos(angle),\n                    y: ship.y + ship.width*Math.sin(angle)\n                },\n                rotation: angle,\n                localId: this.currentPlayer\n            };\n            this.socket.emit(websocketEvents.SHOOT, data);\n            this.createBullet(data);\n        }\n    }\n\n\n    updateState(data){\n        this.players[data.localId].state = data.state;\n    }\n\n    onCollision(ship, bullet){\n        bullet.destroy();\n        ship.destroy();\n        /*this.socket.emit(websocketEvents.CHANGE_STATE, {\n            localId: ship.localId,\n            state: --this.players[ship.localId].state\n        })*/\n    }\n\n\n    reload(data){\n        this.players[data.localId].availableBullets = data.availableBullets;\n    }\n\n\n}"]}]}